!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=62)}([function(t,n){(function(n){t.exports=n}).call(this,{})},function(t,n,e){(function(n){!function(n,r){t.exports=r(e(7),e(54),e(5),e(53),e(52))}(0,function(t,e,r,i,o){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e,r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i,o=o&&o.hasOwnProperty("default")?o.default:o;const u="object"==typeof self?self:"object"==typeof n?n:"object"==typeof window?window:{},a="function"==typeof u.setImmediate?u.setImmediate:function(t,n){return setTimeout(t,0,n)};function s(){}function c(){return this}var f=t.toString;function l(t){return function(t,n){return n.replace(/^/gm,"  ").replace("  ","")}(0,e(2,t))}function p(t,n){return function(e,r,i){switch(arguments.length){case 1:return t(n,e);case 2:return t(n,e,r);default:return t(n,e,r,i)}}}function h(t,n,e){return function(r,i){return 1===arguments.length?t(n,e,r):t(n,e,r,i)}}function d(t,n,e,r){return function(i){return t(n,e,r,i)}}function y(t){return function(n){return a(t,n)}}var m="fantasy-land/of",_=["first","second","third","fourth","fifth"],v="fluture",g="Future",E=3,T=v+"/"+g+"@"+E;function b(t){throw new Error(t)}function A(t){throw new TypeError(t)}function R(t,n,e,r){A(t+" expects its "+_[n]+" argument to "+e+"\n  Actual: "+f(r))}function S(t,n){A(t+" was invoked outside the context of a Future. You might want to use a dispatcher instead\n  Called on: "+f(n))}function N(t,n,e,i){var o=r.parse(r(e)),u=o.name===g?"\n"+(o.namespace!==v?function(t,n){return"The Future was not created by "+v+". Make sure you transform other Futures to "+v+" Futures. Got "+(n?"a Future from "+n:"an unscoped Future")+".\n  See: https://github.com/fluture-js/Fluture#casting-futures"}(0,o.namespace):o.version!==E?"The Future was created by "+(o.version<E?"an older":"a newer")+" version of "+v+". This means that one of the sources which creates Futures is outdated. Update this source, or transform its created Futures to be compatible.\n  See: https://github.com/fluture-js/Fluture#casting-futures":"Nothing seems wrong. Contact the Fluture maintainers."):"";A(t+" expects "+(_[n]?"its "+_[n]+" argument to be a valid Future":n)+"."+u+"\n  Actual: "+f(e)+" :: "+o.name+(i||""))}function M(t){return"function"==typeof t}function I(t){return t instanceof Promise||Boolean(t)&&M(t.then)}function O(t){return t===1/0||function(t){return"number"==typeof t}(t)&&t>0&&t%1==0}function x(t){return null!==t&&"object"==typeof t}var w={isEmpty:!0,size:0,head:null,tail:null};function C(t){b("Future#value was called on a rejected Future\n  Actual: Future.reject("+f(t)+")")}function F(t){return M(t)||R("Future",0,"be a Function",t),new U(t)}function L(t){return t instanceof F||r(t)===T}F["@@type"]=T,F.prototype["fantasy-land/ap"]=function(t){return t._ap(this)},F.prototype["fantasy-land/map"]=function(t){return this._map(t)},F.prototype["fantasy-land/bimap"]=function(t,n){return this._bimap(t,n)},F.prototype["fantasy-land/chain"]=function(t){return this._chain(t)},F.prototype.ap=function(t){return L(this)||S("Future#ap",this),L(t)||N("Future#ap",0,t),this._ap(t)},F.prototype.map=function(t){return L(this)||S("Future#map",this),M(t)||R("Future#map",0,"to be a Function",t),this._map(t)},F.prototype.bimap=function(t,n){return L(this)||S("Future#bimap",this),M(t)||R("Future#bimap",0,"to be a Function",t),M(n)||R("Future#bimap",1,"to be a Function",n),this._bimap(t,n)},F.prototype.chain=function(t){return L(this)||S("Future#chain",this),M(t)||R("Future#chain",0,"to be a Function",t),this._chain(t)},F.prototype.mapRej=function(t){return L(this)||S("Future#mapRej",this),M(t)||R("Future#mapRej",0,"to be a Function",t),this._mapRej(t)},F.prototype.chainRej=function(t){return L(this)||S("Future#chainRej",this),M(t)||R("Future#chainRej",0,"to be a Function",t),this._chainRej(t)},F.prototype.race=function(t){return L(this)||S("Future#race",this),L(t)||N("Future#race",0,t),this._race(t)},F.prototype.both=function(t){return L(this)||S("Future#both",this),L(t)||N("Future#both",0,t),this._both(t)},F.prototype.and=function(t){return L(this)||S("Future#and",this),L(t)||N("Future#and",0,t),this._and(t)},F.prototype.or=function(t){return L(this)||S("Future#or",this),L(t)||N("Future#or",0,t),this._or(t)},F.prototype.swap=function(){return L(this)||S("Future#ap",this),this._swap()},F.prototype.fold=function(t,n){return L(this)||S("Future#ap",this),M(t)||R("Future#fold",0,"to be a Function",t),M(n)||R("Future#fold",1,"to be a Function",n),this._fold(t,n)},F.prototype.finally=function(t){return L(this)||S("Future#finally",this),L(t)||N("Future#finally",0,t),this._finally(t)},F.prototype.lastly=function(t){return L(this)||S("Future#lastly",this),L(t)||N("Future#lastly",0,t),this._finally(t)},F.prototype.fork=function(t,n){return L(this)||S("Future#fork",this),M(t)||R("Future#fork",0,"to be a Function",t),M(n)||R("Future#fork",0,"to be a Function",n),this._fork(t,n)},F.prototype.value=function(t){return L(this)||S("Future#value",this),M(t)||R("Future#value",0,"to be a Function",t),this._fork(C,t)},F.prototype.done=function(t){return L(this)||S("Future#done",this),M(t)||R("Future#done",0,"to be a Function",t),this._fork(function(n){t(n)},function(n){t(null,n)})},F.prototype.promise=function(){var t=this;return new Promise(function(n,e){t._fork(e,n)})},F.prototype.isRejected=function(){return!1},F.prototype.isResolved=function(){return!1},F.prototype.isSettled=function(){return this.isRejected()||this.isResolved()},F.prototype.extractLeft=function(){return[]},F.prototype.extractRight=function(){return[]};var P=Object.create(F.prototype);function U(t){this._computation=t}function B(t){this._value=t}function j(t){return new B(t)}function k(t){this._value=t}function D(t){return new k(t)}function V(){this._isNever=!0}P._ap=function(t){return new at(this)._ap(t)},P._map=function(t){return new at(this)._map(t)},P._bimap=function(t,n){return new at(this)._bimap(t,n)},P._chain=function(t){return new at(this)._chain(t)},P._mapRej=function(t){return new at(this)._mapRej(t)},P._chainRej=function(t){return new at(this)._chainRej(t)},P._race=function(t){return new at(this)._race(t)},P._both=function(t){return new at(this)._both(t)},P._and=function(t){return new at(this)._and(t)},P._or=function(t){return new at(this)._or(t)},P._swap=function(){return new at(this)._swap()},P._fold=function(t,n){return new at(this)._fold(t,n)},P._finally=function(t){return new at(this)._finally(t)},U.prototype=Object.create(P),U.prototype._fork=function(t,n){var e=!0,r=this._computation(function(n){e&&(e=!1,t(n))},function(t){e&&(e=!1,n(t))});return function(t,n){void 0===t||M(t)&&0===t.length||A("Future expected its computation to return a nullary function or void\n  Actual: "+f(t)+"\n  From calling: "+l(n))}(r,this._computation),function(){e&&(e=!1,r&&r())}},U.prototype.toString=function(){return"Future("+l(this._computation)+")"},B.prototype=Object.create(P),B.prototype._ap=c,B.prototype._map=c,B.prototype._chain=c,B.prototype._race=c,B.prototype._both=c,B.prototype._and=c,B.prototype._or=function(t){return t},B.prototype._finally=function(t){return t._and(this)},B.prototype._swap=function(){return new k(this._value)},B.prototype._fork=function(t){return t(this._value),s},B.prototype.isRejected=function(){return!0},B.prototype.extractLeft=function(){return[this._value]},B.prototype.toString=function(){return"Future.reject("+f(this._value)+")"},k.prototype=Object.create(P),k.prototype._race=c,k.prototype._mapRej=c,k.prototype._or=c,k.prototype._and=function(t){return t},k.prototype._both=function(t){var n=this._value;return t._map(function(t){return[n,t]})},k.prototype._swap=function(){return new B(this._value)},k.prototype._finally=function(t){var n=this._value;return t._map(function(){return n})},k.prototype._fork=function(t,n){return n(this._value),s},k.prototype.isResolved=function(){return!0},k.prototype.extractRight=function(){return[this._value]},k.prototype.toString=function(){return"Future.of("+f(this._value)+")"},V.prototype=Object.create(F.prototype),V.prototype._ap=c,V.prototype._map=c,V.prototype._bimap=c,V.prototype._chain=c,V.prototype._mapRej=c,V.prototype._chainRej=c,V.prototype._both=c,V.prototype._or=c,V.prototype._swap=c,V.prototype._fold=c,V.prototype._finally=c,V.prototype._race=function(t){return t},V.prototype._fork=function(){return s},V.prototype.toString=function(){return"Future.never"};var G=new V;function H(t){return L(t)&&!0===t._isNever}function q(t){var n=this;n.rej=s,n.res=s,n.rejected=!1,n.resolved=!1,n.value=null,n.cancel=t._fork(function(t){n.value=t,n.rejected=!0,n.cancel=s,n.rej(t)},function(t){n.value=t,n.resolved=!0,n.cancel=s,n.res(t)})}q.prototype=Object.create(P),q.prototype._fork=function(t,n){return this.rejected?t(this.value):this.resolved?n(this.value):(this.rej=t,this.res=n),this.cancel};var X={rejected:function(t){return this.cancel(),new B(t)},resolved:function(t){return this.cancel(),new k(t)},run:function(){return this},cancel:function(){}};function z(t){this.other=t}function W(t){this.mapper=t}function K(t,n){this.lmapper=t,this.rmapper=n}function Y(t){this.mapper=t}function $(t){this.mapper=t}function Q(t){this.mapper=t}function J(){}function Z(t,n){this.lmapper=t,this.rmapper=n}function tt(t){this.other=t}function nt(t){this.other=t}function et(t){this.other=t}function rt(t){this.other=t}function it(t){this.other=t}function ot(t,n){var e=this;e.other=n,e.cancel=n._fork(function(n){t(new B(n),e)},function(n){t(new k(n),e)})}function ut(t,n){var e=this;e.other=n,e.cancel=n._fork(function(n){t(new B(n),e)},s)}function at(t,n){this._spawn=t,this._actions=n||w}function st(t){return{done:!1,value:t}}function ct(t){return{done:!0,value:t}}z.prototype=Object.create(X),z.prototype.resolved=function(t){return function(t){M(t)||A("Future#ap expects its first argument to be a Future of a Function\n  Actual: Future.of("+f(t)+")")}(t),this.other._map(function(n){return t(n)})},z.prototype.toString=function(){return"ap("+this.other.toString()+")"},W.prototype=Object.create(X),W.prototype.resolved=function(t){return new k(this.mapper(t))},W.prototype.toString=function(){return"map("+l(this.mapper)+")"},K.prototype=Object.create(X),K.prototype.rejected=function(t){return new B(this.lmapper(t))},K.prototype.resolved=function(t){return new k(this.rmapper(t))},K.prototype.toString=function(){return"bimap("+l(this.lmapper)+", "+l(this.rmapper)+")"},Y.prototype=Object.create(X),Y.prototype.resolved=function(t){return function(t,n,e){return L(t)?t:N("Future#chain","the function it's given to return a Future",t,"\n  From calling: "+l(n)+"\n  With: "+f(e))}(this.mapper(t),this.mapper,t)},Y.prototype.toString=function(){return"chain("+l(this.mapper)+")"},$.prototype=Object.create(X),$.prototype.rejected=function(t){return new B(this.mapper(t))},$.prototype.toString=function(){return"mapRej("+l(this.mapper)+")"},Q.prototype=Object.create(X),Q.prototype.rejected=function(t){return function(t,n,e){return L(t)?t:N("Future#chainRej","the function it's given to return a Future",t,"\n  From calling: "+l(n)+"\n  With: "+f(e))}(this.mapper(t),this.mapper,t)},Q.prototype.toString=function(){return"chainRej("+l(this.mapper)+")"},J.prototype=Object.create(X),J.prototype.rejected=function(t){return new k(t)},J.prototype.resolved=function(t){return new B(t)},J.prototype.toString=function(){return"swap()"},Z.prototype=Object.create(X),Z.prototype.rejected=function(t){return new k(this.lmapper(t))},Z.prototype.resolved=function(t){return new k(this.rmapper(t))},Z.prototype.toString=function(){return"fold("+l(this.lmapper)+", "+l(this.rmapper)+")"},tt.prototype=Object.create(X),tt.prototype.rejected=function(t){return this.other._and(new B(t))},tt.prototype.resolved=function(t){return this.other._map(function(){return t})},tt.prototype.cancel=function(){this.other._fork(s,s)()},tt.prototype.toString=function(){return"finally("+this.other.toString()+")"},nt.prototype=Object.create(X),nt.prototype.resolved=function(){return this.other},nt.prototype.toString=function(){return"and("+this.other.toString()+")"},et.prototype=Object.create(X),et.prototype.rejected=function(){return this.other},et.prototype.toString=function(){return"or("+this.other.toString()+")"},rt.prototype=Object.create(X),rt.prototype.run=function(t){return new ot(t,new q(this.other))},rt.prototype.toString=function(){return"race("+this.other.toString()+")"},it.prototype=Object.create(X),it.prototype.resolved=function(t){return this.other._map(function(n){return[t,n]})},it.prototype.run=function(t){return new ut(t,new q(this.other))},it.prototype.toString=function(){return"both("+this.other.toString()+")"},ot.prototype=Object.create(rt.prototype),ut.prototype=Object.create(it.prototype),at.prototype=Object.create(F.prototype),at.prototype._transform=function(t){return new at(this._spawn,function(t,n){return{isEmpty:!1,size:n.size+1,head:t,tail:n}}(t,this._actions))},at.prototype._ap=function(t){return this._transform(new z(t))},at.prototype._map=function(t){return this._transform(new W(t))},at.prototype._bimap=function(t,n){return this._transform(new K(t,n))},at.prototype._chain=function(t){return this._transform(new Y(t))},at.prototype._mapRej=function(t){return this._transform(new $(t))},at.prototype._chainRej=function(t){return this._transform(new Q(t))},at.prototype._race=function(t){return H(t)?this:this._transform(new rt(t))},at.prototype._both=function(t){return this._transform(new it(t))},at.prototype._and=function(t){return this._transform(new nt(t))},at.prototype._or=function(t){return this._transform(new et(t))},at.prototype._swap=function(){return this._transform(new J)},at.prototype._fold=function(t,n){return this._transform(new Z(t,n))},at.prototype._finally=function(t){return this._transform(new tt(t))},at.prototype._fork=function(t,n){var e,r,o,u,a=new i(this._actions.size),c=new i(this._actions.size),f=s,l=!0;function p(i){if(o=!0,(e=i)._spawn){for(var u=e._actions;!u.isEmpty;)a.unshift(u.head),u=u.tail;e=e._spawn}l&&function(){for(l=!1;;){if(o=!1,r=a.shift())f=e._fork(h,d),o||m();else{if(!(r=c.shift()))break;f=e._fork(h,d)}if(!o)return void(l=!0)}f=e._fork(t,n)}()}function h(t){p(r.rejected(t))}function d(t){p(r.resolved(t))}function y(t,n){if(f(),a.clear(),l&&r!==n)for(r.cancel();(u=c.shift())&&u!==n;)u.cancel();p(t)}function m(){for(;u=a.pop();){if(u=u.run(y),o)return;c.unshift(u)}r=r.run(y)}return p(this),function(){for(f(),r&&r.cancel();u=c.shift();)u.cancel()}},at.prototype.toString=function(){for(var t="",n=this._actions;!n.isEmpty;)t="."+n.head.toString()+t,n=n.tail;return this._spawn.toString()+t};var ft=0,lt=1,pt=2;function ht(t,n){this._step=t,this._init=n}function dt(n,e){return t.Apply.test(e)||R("Future.ap",1,"be an Apply",e),t.ap(n,e)}function yt(n,e){return t.Apply.test(n)||R("Future.ap",0,"be an Apply",n),1===arguments.length?p(dt,n):dt(n,e)}function mt(n,e){return t.Alt.test(e)||R("alt",1,"be an Alt",e),t.alt(n,e)}function _t(n,e){return t.Alt.test(n)||R("alt",0,"be an Alt",n),1===arguments.length?p(mt,n):mt(n,e)}function vt(n,e){return t.Functor.test(e)||R("Future.map",1,"be a Functor",e),t.map(n,e)}function gt(t,n){return M(t)||R("Future.map",0,"be a Function",t),1===arguments.length?p(vt,t):vt(t,n)}function Et(n,e,r){return t.Bifunctor.test(r)||R("Future.bimap",2,"be a Bifunctor",r),t.bimap(n,e,r)}function Tt(t,n,e){return M(n)||R("Future.bimap",1,"be a Function",n),2===arguments.length?h(Et,t,n):Et(t,n,e)}function bt(t,n,e){return M(t)||R("Future.bimap",0,"be a Function",t),1===arguments.length?p(Tt,t):2===arguments.length?Tt(t,n):Tt(t,n,e)}function At(n,e){return t.Chain.test(e)||R("Future.chain",1,"be a Chain",e),t.chain(n,e)}function Rt(t,n){return M(t)||R("Future.chain",0,"be a Function",t),1===arguments.length?p(At,t):At(t,n)}function St(t,n){return L(n)||N("Future.mapRej",1,n),n.mapRej(t)}function Nt(t,n){return L(n)||N("Future.chainRej",1,n),n.chainRej(t)}function Mt(t,n){return L(n)||N("Future.finally",1,n),n.finally(t)}function It(t,n){return L(t)||N("Future.finally",0,t),1===arguments.length?p(Mt,t):Mt(t,n)}function Ot(t,n){return L(n)||N("Future.and",1,n),t.and(n)}function xt(t,n){return L(n)||N("Future.both",1,n),t.both(n)}function wt(t,n){return L(n)||N("Future.or",1,n),t.or(n)}function Ct(t,n){return L(n)||N("Future.race",1,n),n.race(t)}function Ft(t,n){return L(t)||N("Future.race",0,t),1===arguments.length?p(Ct,t):Ct(t,n)}function Lt(t,n,e){return L(e)||N("Future.fold",2,e),e.fold(t,n)}function Pt(t,n,e){return M(n)||R("Future.fold",1,"be a function",n),2===arguments.length?h(Lt,t,n):Lt(t,n,e)}function Ut(t,n){return L(n)||N("Future.done",1,n),n.done(t)}function Bt(t,n,e){return L(e)||N("Future.fork",2,e),e._fork(t,n)}function jt(t,n,e){return M(n)||R("Future.fork",1,"be a function",n),2===arguments.length?h(Bt,t,n):Bt(t,n,e)}function kt(t,n){return L(n)||N("Future.value",1,n),n.value(t)}function Dt(t,n){this._mval=t,this._mfunc=n}function Vt(t){return t.isSettled()?t:H(t)?this:"number"==typeof t._time?t._time<this._time?t:this:P._race.call(this,t)}function Gt(t,n){this._time=t,this._value=n}function Ht(t,n){this._time=t,this._value=n}function qt(t,n){return t===1/0?G:new Gt(t,n)}function Xt(t,n){return t===1/0?G:new Ht(t,n)}function zt(t){this._fn=t}function Wt(t){return M(t)||R("Future.try",0,"be a function",t),new zt(t)}ht.prototype=Object.create(P),ht.prototype._fork=function(t,n){var e=this._step,r=this._init,i=ft,o=s,u=st(r);function a(t){u=t,i=i===ft?lt:c()}function c(){for(;!u.done;){i=ft;var r=e(st,ct,u.value);if(o=r._fork(t,a),i!==lt)return void(i=pt)}n(u.value)}return c(),function(){o()}},ht.prototype.toString=function(){return"Future.chainRec("+l(this._step)+", "+f(this._init)+")"},Dt.prototype=Object.create(P),Dt.prototype._fork=function(t,n){var e,r,i,o,u=!1,a=!1,c=!1;function l(n){c||(c=!0,t(n))}return i=this._mval._fork(l,function(t){if(i=s,!u)return a=!0,void(r=t);n(e(t))}),o=this._mfunc._fork(l,function(t){if(o=s,function(t){M(t)||A("Future#ap expects its first argument to be a Future of a Function\n  Actual: Future.of("+f(t)+")")}(t),!a)return u=!0,void(e=t);n(t(r))}),function(){i(),o()}},Dt.prototype.toString=function(){return"new ParallelAp("+this._mval.toString()+", "+this._mfunc.toString()+")"},Gt.prototype=Object.create(P),Gt.prototype._race=Vt,Gt.prototype._swap=function(){return new Ht(this._time,this._value)},Gt.prototype._fork=function(t,n){var e=setTimeout(n,this._time,this._value);return function(){clearTimeout(e)}},Gt.prototype.extractRight=function(){return[this._value]},Gt.prototype.toString=function(){return"Future.after("+f(this._time)+", "+f(this._value)+")"},Ht.prototype=Object.create(P),Ht.prototype._race=Vt,Ht.prototype._swap=function(){return new Gt(this._time,this._value)},Ht.prototype._fork=function(t){var n=setTimeout(t,this._time,this._value);return function(){clearTimeout(n)}},Ht.prototype.extractLeft=function(){return[this._value]},Ht.prototype.toString=function(){return"Future.rejectAfter("+f(this._time)+", "+f(this._value)+")"},zt.prototype=Object.create(P),zt.prototype._fork=function(t,n){var e;try{e=this._fn()}catch(n){return t(n),s}return n(e),s},zt.prototype.toString=function(){return"Future.try("+l(this._fn)+")"};var Kt=Jt.Cold=0,Yt=Jt.Pending=1,$t=Jt.Rejected=2,Qt=Jt.Resolved=3;function Jt(t){this._pure=t,this.reset()}function Zt(t,n){this._fn=t,this._a=n}function tn(t,n,e){this._fn=t,this._a=n,this._b=e}function nn(t,n,e,r){this._fn=t,this._a=n,this._b=e,this._c=r}function en(t,n){this._fn=t,this._a=n}function rn(t,n,e){this._fn=t,this._a=n,this._b=e}function on(t,n,e,r){this._fn=t,this._a=n,this._b=e,this._c=r}function un(t,n){this._fn=t,this._a=n}function an(t,n,e){this._fn=t,this._a=n,this._b=e}function sn(t,n,e,r){this._fn=t,this._a=n,this._b=e,this._c=r}function cn(t){return function(t){return x(t)&&function(t){return"boolean"==typeof t}(t.done)}(t)||A("Future.do was given an invalid generator: Its iterator did not return a valid iteration from iterator.next()\n  Actual: "+f(t)),t.done||L(t.value)?t:N("Future.do","the iterator to produce only valid Futures",t.value,"\n  Tip: If you're using a generator, make sure you always yield a Future")}function fn(t){this._generator=t}function ln(t){return M(t)||R("Future.do",0,"be a Function",t),new fn(t)}function pn(t,n,e){this._acquire=t,this._dispose=n,this._consume=e}function hn(t,n,e){return M(e)||R("Future.hook",2,"be a Future",e),new pn(t,n,e)}function dn(t,n,e){return M(n)||R("Future.hook",1,"be a function",n),2===arguments.length?h(hn,t,n):hn(t,n,e)}function yn(t){this._fn=t}function mn(t,n){return L(t)?t:N("Future.parallel","its second argument to be an array of valid Futures. The value at position "+n+" in the array is not a Future",t)}function _n(t,n){this._futures=n,this._length=n.length,this._max=Math.min(this._length,t)}Jt.prototype=Object.create(P),Jt.prototype.isRejected=function(){return this._state===$t},Jt.prototype.isResolved=function(){return this._state===Qt},Jt.prototype.extractLeft=function(){return this.isRejected()?[this._value]:[]},Jt.prototype.extractRight=function(){return this.isResolved()?[this._value]:[]},Jt.prototype._addToQueue=function(t,n){var e=this;if(e._state>Yt)return s;var r=e._queue.push(new function(t,n){this[$t]=t,this[Qt]=n}(t,n))-1;return e._queued=e._queued+1,function(){e._state>Yt||(e._queue[r]=void 0,e._queued=e._queued-1,0===e._queued&&e.reset())}},Jt.prototype._drainQueue=function(){if(!(this._state<=Yt)&&0!==this._queued){for(var t=this._queue,n=t.length,e=this._state,r=this._value,i=0;i<n;i++)t[i]&&t[i][e](r),t[i]=void 0;this._queue=void 0,this._queued=0}},Jt.prototype.reject=function(t){this._state>Yt||(this._value=t,this._state=$t,this._drainQueue())},Jt.prototype.resolve=function(t){this._state>Yt||(this._value=t,this._state=Qt,this._drainQueue())},Jt.prototype.run=function(){var t=this;t._state>Kt||(t._state=Yt,t._cancel=t._pure._fork(function(n){t.reject(n)},function(n){t.resolve(n)}))},Jt.prototype.reset=function(){this._state!==Kt&&(this._state>Yt&&this._cancel(),this._cancel=s,this._queue=[],this._queued=0,this._value=void 0,this._state=Kt)},Jt.prototype._fork=function(t,n){var e=s;switch(this._state){case Yt:e=this._addToQueue(t,n);break;case $t:t(this._value);break;case Qt:n(this._value);break;default:e=this._addToQueue(t,n),this.run()}return e},Jt.prototype.toString=function(){return"Future.cache("+this._pure.toString()+")"},Zt.prototype=Object.create(P),Zt.prototype._fork=function(t,n){var e;try{e=this._fn(this._a)}catch(n){return t(n),s}return n(e),s},Zt.prototype.toString=function(){return"Future.encase("+l(this._fn)+", "+f(this._a)+")"},tn.prototype=Object.create(P),tn.prototype._fork=function(t,n){var e;try{e=this._fn(this._a,this._b)}catch(n){return t(n),s}return n(e),s},tn.prototype.toString=function(){return"Future.encase2("+l(this._fn)+", "+f(this._a)+", "+f(this._b)+")"},nn.prototype=Object.create(P),nn.prototype._fork=function(t,n){var e;try{e=this._fn(this._a,this._b,this._c)}catch(n){return t(n),s}return n(e),s},nn.prototype.toString=function(){return"Future.encase3("+l(this._fn)+", "+f(this._a)+", "+f(this._b)+", "+f(this._c)+")"},en.prototype=Object.create(P),en.prototype._fork=function(t,n){var e=!0;return this._fn(this._a,function(r,i){e&&(e=!1,r?t(r):n(i))}),function(){e=!1}},en.prototype.toString=function(){return"Future.encaseN("+l(this._fn)+", "+f(this._a)+")"},rn.prototype=Object.create(P),rn.prototype._fork=function(t,n){var e=!0;return this._fn(this._a,this._b,function(r,i){e&&(e=!1,r?t(r):n(i))}),function(){e=!1}},rn.prototype.toString=function(){return"Future.encaseN2("+l(this._fn)+", "+f(this._a)+", "+f(this._b)+")"},on.prototype=Object.create(P),on.prototype._fork=function(t,n){var e=!0;return this._fn(this._a,this._b,this._c,function(r,i){e&&(e=!1,r?t(r):n(i))}),function(){e=!1}},on.prototype.toString=function(){return"Future.encaseN3("+l(this._fn)+", "+f(this._a)+", "+f(this._b)+", "+f(this._c)+")"},un.prototype=Object.create(P),un.prototype._fork=function(t,n){var e=this._fn,r=this._a,i=!0;return function(t,n,e){return I(t)?t:A("Future.encaseP expects the function it's given to return a Promise/Thenable\n  Actual: "+f(t)+"\n  From calling: "+l(n)+"\n  With: "+f(e))}(e(r),e,r).then(y(function(t){i&&(i=!1,n(t))}),y(function(n){i&&(i=!1,t(n))})),function(){i=!1}},un.prototype.toString=function(){return"Future.encaseP("+l(this._fn)+", "+f(this._a)+")"},an.prototype=Object.create(P),an.prototype._fork=function(t,n){var e=this._fn,r=this._a,i=this._b,o=!0;return function(t,n,e,r){return I(t)?t:A("Future.encaseP2 expects the function it's given to return a Promise/Thenable\n  Actual: "+f(t)+"\n  From calling: "+l(n)+"\n  With 1: "+f(e)+"\n  With 2: "+f(r))}(e(r,i),e,r,i).then(y(function(t){o&&(o=!1,n(t))}),y(function(n){o&&(o=!1,t(n))})),function(){o=!1}},an.prototype.toString=function(){return"Future.encaseP2("+l(this._fn)+", "+f(this._a)+", "+f(this._b)+")"},sn.prototype=Object.create(P),sn.prototype._fork=function(t,n){var e=this._fn,r=this._a,i=this._b,o=this._c,u=!0;return function(t,n,e,r,i){return I(t)?t:A("Future.encaseP3 expects the function it's given to return a Promise/Thenable\n  Actual: "+f(t)+"\n  From calling: "+l(n)+"\n  With 1: "+f(e)+"\n  With 2: "+f(r)+"\n  With 3: "+f(i))}(e(r,i,o),e,r,i,o).then(y(function(t){u&&(u=!1,n(t))}),y(function(n){u&&(u=!1,t(n))})),function(){u=!1}},sn.prototype.toString=function(){return"Future.encaseP3("+l(this._fn)+", "+f(this._a)+", "+f(this._b)+", "+f(this._c)+")"},fn.prototype=Object.create(P),fn.prototype._fork=function(t,n){var e,r,i=function(t){return function(t){return x(t)&&M(t.next)}(t)?t:R("Future.do",0,'return an iterator, maybe you forgot the "*"',t)}(this._generator()),o=ft,u=s;function a(t){if(r=t,o===pt)return c();o=lt,e=cn(i.next(r))}function c(){for(e=cn(i.next(r));!e.done;)if(o=ft,u=e.value._fork(t,a),o!==lt)return void(o=pt);n(e.value)}return c(),function(){u()}},fn.prototype.toString=function(){return"Future.do("+l(this._generator)+")"},pn.prototype=Object.create(P),pn.prototype._fork=function(t,n){var e,r,i,o,u=this._acquire,a=this._dispose,c=this._consume,p=s,h=s;function d(){h(o)}function y(){var n=a(i);return function(t,n,e){L(t)||N("Future.hook","the first function it's given to return a Future",t,"\n  From calling: "+l(n)+"\n  With: "+f(e))}(n,a,i),e=n._fork(t,d)}function m(){p(),y()()}function _(n){h=t,o=n,y()}function v(t){h=n,o=t,y()}return r=u._fork(t,function(t){var n=c(i=t);!function(t,n,e){L(t)||N("Future.hook","the second function it's given to return a Future",t,"\n  From calling: "+l(n)+"\n  With: "+f(e))}(n,c,i),e=m,p=n._fork(_,v)}),e=e||r,function(){e()}},pn.prototype.toString=function(){return"Future.hook("+this._acquire.toString()+", "+l(this._dispose)+", "+l(this._consume)+")"},yn.prototype=Object.create(P),yn.prototype._fork=function(t,n){var e=!0;return this._fn(function(r,i){e&&(e=!1,r?t(r):n(i))}),function(){e=!1}},yn.prototype.toString=function(){return"Future.node("+l(this._fn)+")"},_n.prototype=Object.create(P),_n.prototype._fork=function(t,n){var e=this._futures,r=this._length,i=this._max,o=new Array(r),u=new Array(r),a=0,c=0,f=!1;function l(){a=r;for(var t=0;t<r;t++)o[t]&&o[t]()}function p(i){c++,o[i]=e[i]._fork(function(n){o[i]=s,l(),t(n)},function(t){o[i]=s,u[i]=t,c--,a===r&&0===c?n(u):f&&h()})}function h(){for(f=!1;a<r&&c<i;)p(a++);f=!0}return h(),l},_n.prototype.toString=function(){return"Future.parallel("+this._max+", "+f(this._futures)+")"};var vn=new k([]);function gn(t,n){(function(t){return Array.isArray(t)})(n)||R("Future.parallel",1,"be an array",n);var e=function(t,n){for(var e=t.length,r=new Array(e),i=0;i<e;i++)r[i]=n(t[i],i,t);return r}(n,mn);return 0===e.length?vn:new _n(t,e)}function En(t){this._fn=t}En.prototype=Object.create(P),En.prototype._fork=function(t,n){var e=!0;return function(t,n){return I(t)?t:A("Future.tryP expects the function it's given to return a Promise/Thenable\n  Actual: "+f(t)+"\n  From calling: "+l(n))}(this._fn(),this._fn).then(y(function(t){e&&(e=!1,n(t))}),y(function(n){e&&(e=!1,t(n))})),function(){e=!1}},En.prototype.toString=function(){return"Future.tryP("+f(this._fn)+")"},"function"!=typeof Object.create&&b("Please polyfill Object.create to use Fluture"),"function"!=typeof Object.assign&&b("Please polyfill Object.assign to use Fluture"),"function"!=typeof Array.isArray&&b("Please polyfill Array.isArray to use Fluture"),F.of=F[m]=D,F.chainRec=F["fantasy-land/chainRec"]=function(t,n){return new ht(t,n)},F.reject=j,F.ap=yt,F.map=gt,F.bimap=bt,F.chain=Rt;var Tn=o(F,G,Ft,function(t,n){return new Dt(t,n)});function bn(t){return t instanceof Tn||r(t)===Tn["@@type"]}Tn.of=Tn[m],Tn.zero=Tn["fantasy-land/zero"],Tn.map=gt,Tn.ap=yt,Tn.alt=_t;var An=Object.freeze({Future:F,default:F,Par:Tn,isParallel:bn,seq:function(t){return bn(t)||R("Future.seq",0,"to be a Par",t),t.sequential},isFuture:L,reject:j,of:D,never:G,isNever:H,after:function(t,n){return O(t)||R("Future.after",0,"be a positive integer",t),1===arguments.length?p(qt,t):qt(t,n)},rejectAfter:function(t,n){return O(t)||R("Future.rejectAfter",0,"be a positive integer",t),1===arguments.length?p(Xt,t):Xt(t,n)},attempt:Wt,try:Wt,cache:function(t){return L(t)||N("Future.cache",0,t),new Jt(t)},encase:function t(n,e){return M(n)||R("Future.encase",0,"be a function",n),1===arguments.length?p(t,n):new Zt(n,e)},encase2:function t(n,e,r){switch(M(n)||R("Future.encase2",0,"be a function",n),arguments.length){case 1:return p(t,n);case 2:return h(t,n,e);default:return new tn(n,e,r)}},encase3:function t(n,e,r,i){switch(M(n)||R("Future.encase3",0,"be a function",n),arguments.length){case 1:return p(t,n);case 2:return h(t,n,e);case 3:return d(t,n,e,r);default:return new nn(n,e,r,i)}},encaseN:function t(n,e){return M(n)||R("Future.encaseN",0,"be a function",n),1===arguments.length?p(t,n):new en(n,e)},encaseN2:function t(n,e,r){switch(M(n)||R("Future.encaseN2",0,"be a function",n),arguments.length){case 1:return p(t,n);case 2:return h(t,n,e);default:return new rn(n,e,r)}},encaseN3:function t(n,e,r,i){switch(M(n)||R("Future.encaseN3",0,"be a function",n),arguments.length){case 1:return p(t,n);case 2:return h(t,n,e);case 3:return d(t,n,e,r);default:return new on(n,e,r,i)}},encaseP:function t(n,e){return M(n)||R("Future.encaseP",0,"be a function",n),1===arguments.length?p(t,n):new un(n,e)},encaseP2:function t(n,e,r){switch(M(n)||R("Future.encaseP2",0,"be a function",n),arguments.length){case 1:return p(t,n);case 2:return h(t,n,e);default:return new an(n,e,r)}},encaseP3:function t(n,e,r,i){switch(M(n)||R("Future.encaseP3",0,"be a function",n),arguments.length){case 1:return p(t,n);case 2:return h(t,n,e);case 3:return d(t,n,e,r);default:return new sn(n,e,r,i)}},go:ln,do:ln,hook:function(t,n,e){return L(t)||N("Future.hook",0,t),1===arguments.length?p(dn,t):2===arguments.length?dn(t,n):dn(t,n,e)},node:function(t){return M(t)||R("Future.node",0,"be a function",t),new yn(t)},parallel:function(t,n){return O(t)||R("Future.parallel",0,"be a positive integer",t),1===arguments.length?p(gn,t):gn(t,n)},tryP:function(t){return M(t)||R("Future.tryP",0,"be a function",t),new En(t)},ap:yt,alt:_t,map:gt,bimap:bt,chain:Rt,mapRej:function(t,n){return M(t)||R("Future.mapRej",0,"be a Function",t),1===arguments.length?p(St,t):St(t,n)},chainRej:function(t,n){return M(t)||R("Future.chainRej",0,"be a Function",t),1===arguments.length?p(Nt,t):Nt(t,n)},lastly:It,finally:It,and:function(t,n){return L(t)||N("Future.and",0,t),1===arguments.length?p(Ot,t):Ot(t,n)},both:function(t,n){return L(t)||N("Future.both",0,t),1===arguments.length?p(xt,t):xt(t,n)},or:function(t,n){return L(t)||N("Future.or",0,t),1===arguments.length?p(wt,t):wt(t,n)},race:Ft,swap:function(t){return L(t)||N("Future.swap",0,t),t.swap()},fold:function(t,n,e){return M(t)||R("Future.fold",0,"be a function",t),1===arguments.length?p(Pt,t):2===arguments.length?Pt(t,n):Pt(t,n,e)},done:function(t,n){return M(t)||R("Future.done",0,"be a Function",t),1===arguments.length?p(Ut,t):Ut(t,n)},fork:function(t,n,e){return M(t)||R("Future.fork",0,"be a function",t),1===arguments.length?p(jt,t):2===arguments.length?jt(t,n):jt(t,n,e)},promise:function(t){return L(t)||N("Future.promise",0,t),t.promise()},value:function(t,n){return M(t)||R("Future.value",0,"be a Function",t),1===arguments.length?p(kt,t):kt(t,n)},extractLeft:function(t){return L(t)||N("Future.extractLeft",0,t),t.extractLeft()},extractRight:function(t){return L(t)||N("Future.extractRight",0,t),t.extractRight()}});return Object.assign(F,An)})}).call(this,e(36))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=Object.prototype.hasOwnProperty;function i(t){return"function"==typeof t}function o(t){return void 0===t}function u(t){return"[object String]"===Object.prototype.toString.call(t)}n.has=function(t,n){return r.call(t,n)},n.defaultCompare=function(t,n){return t<n?-1:t===n?0:1},n.defaultEquals=function(t,n){return t===n},n.defaultToString=function(t){return null===t?"COLLECTION_NULL":o(t)?"COLLECTION_UNDEFINED":u(t)?"$s"+t:"$o"+t.toString()},n.makeString=function(t,e){if(void 0===e&&(e=","),null===t)return"COLLECTION_NULL";if(o(t))return"COLLECTION_UNDEFINED";if(u(t))return t.toString();var r="{",i=!0;for(var a in t)n.has(t,a)&&(i?i=!1:r+=e,r=r+a+":"+t[a]);return r+"}"},n.isFunction=i,n.isUndefined=o,n.isString=u,n.reverseCompareFunction=function(t){return o(t)||!i(t)?function(t,n){return t<n?1:t===n?0:-1}:function(n,e){return-1*t(n,e)}},n.compareToEquals=function(t){return function(n,e){return 0===t(n,e)}}},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(0)?(i=[],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryShow=u()}(function(){"use strict";var t="@@show",n=[];function e(t){return function(n){return r(n)+": "+r(t[n])}}function r(i){if(n.indexOf(i)>=0)return"<Circular>";switch(Object.prototype.toString.call(i)){case"[object Boolean]":return"object"==typeof i?"new Boolean ("+r(i.valueOf())+")":i.toString();case"[object Number]":return"object"==typeof i?"new Number ("+r(i.valueOf())+")":1/i==-1/0?"-0":i.toString(10);case"[object String]":return"object"==typeof i?"new String ("+r(i.valueOf())+")":JSON.stringify(i);case"[object Date]":return"new Date ("+r(isNaN(i.valueOf())?NaN:i.toISOString())+")";case"[object Error]":return"new "+i.name+" ("+r(i.message)+")";case"[object Arguments]":return"function () { return arguments; } ("+Array.prototype.map.call(i,r).join(", ")+")";case"[object Array]":n.push(i);try{return"["+i.map(r).concat(Object.keys(i).sort().filter(function(t){return!/^\d+$/.test(t)}).map(e(i))).join(", ")+"]"}finally{n.pop()}case"[object Object]":n.push(i);try{return t in i&&(null==i.constructor||i.constructor.prototype!==i)?i[t]():"{"+Object.keys(i).sort().map(e(i)).join(", ")+"}"}finally{n.pop()}default:return String(i)}}return r})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),i=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||r.defaultToString}return t.prototype.getValue=function(t){var n=this.table["$"+this.toStr(t)];if(!r.isUndefined(n))return n.value},t.prototype.setValue=function(t,n){if(!r.isUndefined(t)&&!r.isUndefined(n)){var e,i="$"+this.toStr(t),o=this.table[i];return r.isUndefined(o)?(this.nElements++,e=void 0):e=o.value,this.table[i]={key:t,value:n},e}},t.prototype.remove=function(t){var n="$"+this.toStr(t),e=this.table[n];if(!r.isUndefined(e))return delete this.table[n],this.nElements--,e.value},t.prototype.keys=function(){var t=[];for(var n in this.table)if(r.has(this.table,n)){var e=this.table[n];t.push(e.key)}return t},t.prototype.values=function(){var t=[];for(var n in this.table)if(r.has(this.table,n)){var e=this.table[n];t.push(e.value)}return t},t.prototype.forEach=function(t){for(var n in this.table)if(r.has(this.table,n)){var e=this.table[n];if(!1===t(e.key,e.value))return}},t.prototype.containsKey=function(t){return!r.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var t="{";return this.forEach(function(n,e){t+="\n\t"+n+" : "+e}),t+"\n}"},t}();n.default=i},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(0)?(i=[],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type",n=new RegExp("^([\\s\\S]+)/([\\s\\S]+?)(?:@([0-9]+))?$");function e(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}return e.parse=function(t){var e=n.exec(t);return{namespace:null==e||null==e[1]?null:e[1],name:null==e?t:e[2],version:null==e||null==e[3]?0:Number(e[3])}},e})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2);function i(t,n,e){for(var i=e||r.defaultEquals,o=t.length,u=0;u<o;u++)if(i(t[u],n))return u;return-1}n.indexOf=i,n.lastIndexOf=function(t,n,e){for(var i=e||r.defaultEquals,o=t.length-1;o>=0;o--)if(i(t[o],n))return o;return-1},n.contains=function(t,n,e){return i(t,n,e)>=0},n.remove=function(t,n,e){var r=i(t,n,e);return!(r<0||(t.splice(r,1),0))},n.frequency=function(t,n,e){for(var i=e||r.defaultEquals,o=t.length,u=0,a=0;a<o;a++)i(t[a],n)&&u++;return u},n.equals=function(t,n,e){var i=e||r.defaultEquals;if(t.length!==n.length)return!1;for(var o=t.length,u=0;u<o;u++)if(!i(t[u],n[u]))return!1;return!0},n.copy=function(t){return t.concat()},n.swap=function(t,n,e){if(n<0||n>=t.length||e<0||e>=t.length)return!1;var r=t[n];return t[n]=t[e],t[e]=r,!0},n.toString=function(t){return"["+t.toString()+"]"},n.forEach=function(t,n){for(var e=0,r=t;e<r.length;e++)if(!1===n(r[e]))return}},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(28)):null!=e(0)?(i=[e(28)],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function i(t){return function(n){return t}}function o(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,i=0;i<n.length;i+=1){var o=n[i];if(null==r||!t&&!u(o,r))return null;r=r[o]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var v=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function g(n,e,r){function i(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([v(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var o=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v8.2.1#"+n,e,function(t){return o.every(function(n){var e=r[n]===h?t.constructor:t;return null!=i(n)(e)})});return u.methods=o.reduce(function(t,n){return t[n]=i(n),t},{}),u}var E=g("Setoid",[],{equals:d}),T=g("Ord",[E],{lte:d}),b=g("Semigroupoid",[],{compose:d}),A=g("Category",[b],{id:h}),R=g("Semigroup",[],{concat:d}),S=g("Monoid",[R],{empty:h}),N=g("Group",[S],{invert:d}),M=g("Filterable",[],{filter:d}),I=g("Functor",[],{map:d}),O=g("Bifunctor",[I],{bimap:d}),x=g("Profunctor",[I],{promap:d}),w=g("Apply",[I],{ap:d}),C=g("Applicative",[w],{of:h}),F=g("Chain",[w],{chain:d}),L=g("ChainRec",[F],{chainRec:h}),P=g("Monad",[C,F],{}),U=g("Alt",[I],{alt:d}),B=g("Plus",[U],{zero:h}),j=g("Alternative",[C,B],{}),k=g("Foldable",[],{reduce:d}),D=g("Traversable",[I,k],{traverse:d}),V=g("Extend",[I],{extend:d}),G=g("Comonad",[V],{extract:d}),H=g("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!Q(this[n],t[n]))return!1;return!0}function z(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!Q(this[n],t[n]))return Z(this[n],t[n])}}function W(t){return this.concat(t)}function K(t){var n={};function e(t){n[t]=this[t]}return o(this,e),o(t,e),n}var Y={Null:{prototype:{toString:function(){return"null"},"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{toString:function(){return"undefined"},"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{toString:function(){return"object"==typeof this?"new Boolean("+$(this.valueOf())+")":this.toString()},"fantasy-land/equals":function(t){return"object"==typeof this?Q(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{toString:function(){return"object"==typeof this?"new Number("+$(this.valueOf())+")":1/this==-1/0?"-0":this.toString(10)},"fantasy-land/equals":function(t){return"object"==typeof this?Q(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{toString:function(){var t=isNaN(this.valueOf())?NaN:this.toISOString();return"new Date("+$(t)+")"},"fantasy-land/equals":function(t){return Q(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return Z(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{toString:function(){return"object"==typeof this?"new String("+$(this.valueOf())+")":JSON.stringify(this)},"fantasy-land/equals":function(t){return"object"==typeof this?Q(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?Z(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},i={head:n,tail:r};i!==r;){for(var o=r,u=t(f,l,i.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):o={head:s.value,tail:o}}for(i=i.tail;o!==r;)i={head:o.head,tail:i},o=o.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{toString:function(){for(var t=this.map($),n=Object.keys(this).sort(),e=0;e<n.length;e+=1){var r=n[e];/^\d+$/.test(r)||t.push($(r)+": "+$(this[r]))}return"["+t.join(", ")+"]"},"fantasy-land/equals":X,"fantasy-land/lte":z,"fantasy-land/concat":W,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,i=t(this[e]);r<i.length;r+=1)n.push(i[r]);return n},"fantasy-land/alt":W,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function i(o,u){switch(u){case 0:return at(t,[]);case 2:return ut(s,n(e[o]),n(e[o+1]));default:var a=2*Math.floor(u/4);return ut(r,i(o,a),i(o+a,u-a))}}return this.length%2==1?ut(r,rt(q,n(this[0])),i(1,this.length-1)):i(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{toString:function(){return"(function () { return arguments; }("+Array.prototype.map.call(this,$).join(", ")+"))"},"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return z.call(this,t)}}},Error:{prototype:{toString:function(){return"new "+this.name+"("+$(this.message)+")"},"fantasy-land/equals":function(t){return Q(this.name,t.name)&&Q(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{toString:function(){for(var t=[],n=Object.keys(this).sort(),e=0;e<n.length;e+=1){var r=n[e];t.push($(r)+": "+$(this[r]))}return"{"+t.join(", ")+"}"},"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return Q(e,Object.keys(t).sort())&&e.every(function(e){return Q(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),i=e.shift();if(r<i)return!0;if(r>i)return!1;if(!Q(this[r],t[r]))return Z(this[r],t[r])}},"fantasy-land/concat":K,"fantasy-land/filter":function(t){var n={};return o(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return o(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return o(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":K,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return ut(function(t){return function(n){var e={};return e[r]=n,K.call(t,e)}},t,n(e[r]))},at(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(tt(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},$=function(){var n=[];function e(t,e){n.push(e);try{return t.call(e)}finally{n.pop()}}return function(r){if(n.indexOf(r)>=0)return"<Circular>";var i=t(r);if("Object"===i){var o;try{o=e(r.toString,r)}catch(t){}if(null!=o&&"[object Object]"!==o)return o}return e(_([i,"prototype","toString"])||r.toString,r)}}(),Q=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function J(t,n){return c(t,n)&&!Z(n,t)}var Z=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return Q(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function tt(t,n){return R.methods.concat(t)(n)}function nt(t){return S.methods.empty(t)()}function et(t,n){return M.methods.filter(n)(t)}function rt(t,n){return I.methods.map(n)(t)}function it(t,n,e){return O.methods.bimap(e)(t,n)}function ot(t,n){return w.methods.ap(n)(t)}function ut(t,n,e){return ot(rt(t,n),e)}function at(t,n){return C.methods.of(t)(n)}function st(t,n){return F.methods.chain(n)(t)}function ct(t,n,e){return k.methods.reduce(e)(t,n)}function ft(t,n){var e=ct(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return Z}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var i=0;i<e.length;i+=1)e[i]=e[i].x;return e}var o=n.constructor,u=nt(o);for(i=0;i<e.length;i+=1)u=tt(u,at(o,e[i].x));return u}function lt(t,n,e){return D.methods.traverse(e)(t,n)}function pt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:R,Monoid:S,Group:N,Filterable:M,Functor:I,Bifunctor:O,Profunctor:x,Apply:w,Applicative:C,Chain:F,ChainRec:L,Monad:P,Alt:U,Plus:B,Alternative:j,Foldable:k,Traversable:D,Extend:V,Comonad:G,Contravariant:H,toString:$,equals:Q,lt:J,lte:Z,gt:function(t,n){return J(n,t)},gte:function(t,n){return Z(n,t)},min:function(t,n){return Z(t,n)?t:n},max:function(t,n){return Z(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:tt,empty:nt,invert:function(t){return N.methods.invert(t)()},filter:et,reject:function(t,n){return et(function(n){return!t(n)},n)},map:rt,flip:function(t,n){return I.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:it,mapLeft:function(t,n){return it(t,a,n)},promap:function(t,n,e){return x.methods.promap(e)(t,n)},ap:ot,lift2:ut,lift3:function(t,n,e,r){return ot(ot(rt(t,n),e),r)},apFirst:function(t,n){return ut(i,t,n)},apSecond:function(t,n){return ut(i(a),t,n)},of:at,append:function(t,n){return tt(n,at(n.constructor,t))},prepend:function(t,n){return tt(at(n.constructor,t),n)},chain:st,join:function(t){return st(a,t)},chainRec:function(t,n,e){return L.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:ct,size:function(t){return Array.isArray(t)?t.length:ct(function(t,n){return t+1},0,t)},elem:function(t,n){return ct(function(n,e){return n||Q(t,e)},!1,n)},foldMap:function(t,n,e){return ct(function(t,e){return tt(t,n(e))},nt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return ct(function(t,e){return tt(at(n,e),t)},nt(n),t)},sort:function(t){return ft(a,t)},sortBy:ft,takeWhile:function(t,n){var e=!0;return et(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return et(function(n){return e=e||!t(n)},n)},traverse:lt,sequence:function(t,n){return lt(t,a,n)},extend:pt,duplicate:function(t){return pt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){(function(r){var i,o,u;!function(r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r(e(39),e(12),e(34),e(31),e(3),e(10),e(5)):null!=e(0)?(o=[e(39),e(12),e(34),e(31),e(3),e(10),e(5)],void 0===(u="function"==typeof(i=r)?i.apply(n,o):i)||(t.exports=u)):self.sanctuary=r(self.sanctuaryDef,self.sanctuaryEither,self.sanctuaryMaybe,self.sanctuaryPair,self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(t,n,i,o,u,a,s){"use strict";if("undefined"!=typeof __doctest){var c=__doctest.require("sanctuary-descending"),f=(__doctest.require("./test/internal/List").Nil,__doctest.require("./test/internal/List").Cons,__doctest.require("./test/internal/Sum"));!function(n){var e=t.UnaryType("sanctuary/Descending")("")(b(c["@@type"]))(y(K(Array))(a.extract));n.create({checkTypes:!0,env:n.env.concat([e(t.Unknown),__doctest.require("./test/internal/List").Type(t.Unknown),f.Type])}).env=n.env}(e(8))}var l=n.Left,p=n.Right,h=i.Nothing,d=i.Just;function y(t){return function(n){return function(e){return t(n(e))}}}function m(t){return function(n){return function(e){return t(e)(n)}}}function _(n){return function(e){return t.Function([n,e])}}function v(t){return y(function(n){return t in n?d(n[t]):h})(T)}function g(t){return function(n){return n[t]()}}function E(t){return function(n){return function(e){return e[t](n)}}}function T(t){return null==t?Object.create(null):Object(t)}function b(t){return function(n){return s(n)===t}}function A(t){return t.value}var R=t.TypeVariable("a"),S=t.TypeVariable("b"),N=t.TypeVariable("c"),M=t.TypeVariable("d"),I=t.TypeVariable("e"),O=t.TypeVariable("g"),x=t.TypeVariable("l"),w=t.TypeVariable("r"),C=t.UnaryTypeVariable("f"),F=t.UnaryTypeVariable("m"),L=t.UnaryTypeVariable("t"),P=t.UnaryTypeVariable("w"),U=t.BinaryTypeVariable("p"),B=t.BinaryTypeVariable("s"),j=t.BinaryType("sanctuary/Either")("https://github.com/sanctuary-js/sanctuary-either")(b("sanctuary-either/Either@1"))(ct(K(Array))($([])))(ct($([]))(K(Array))),k=t.UnaryType("sanctuary/Maybe")("https://github.com/sanctuary-js/sanctuary-maybe")(b("sanctuary-maybe/Maybe@1"))(rt([])(K(Array))),D=t.BinaryType("sanctuary/Pair")("https://github.com/sanctuary-js/sanctuary-pair")(b("sanctuary-pair/Pair@1"))(function(t){return[t.fst]})(function(t){return[t.snd]}),V=t.UnaryType("sanctuary/TypeRep")("https://github.com/fantasyland/fantasy-land#type-representatives")(function(n){return t.AnyFunction._test(n)||null!=n&&t.String._test(n["@@type"])})($([])),G=t.RecordType({checkTypes:t.Boolean,env:t.Array(t.Any)}),H={};function q(e){var r=t.create(e),o={env:e.env,is:r("is")({})([t.Type,t.Any,t.Boolean])(t.test(e.env)),MaybeType:k,Maybe:i,Nothing:h,EitherType:j,Either:n,PairType:D};return Object.keys(H).forEach(function(t){o[t]=r(t)(H[t].consts)(H[t].types)(H[t].impl)}),o.unchecked=e.checkTypes?q({checkTypes:!1,env:e.env}):o,o}function X(t){return function(n){return a.filter(t,n)}}function z(t){return function(n){return a.map(t,n)}}function W(t){return function(n){return function(e){return a.reduce(function(n,e){return t(n)(e)},n,e)}}}function K(t){return function(n){return a.of(t,n)}}function Y(t){return t}function $(t){return function(n){return t}}function Q(t){return function(n){return n(t)}}function J(t){return function(n){return function(e){return t(n,e)}}}function Z(t){return function(n){return function(e){return function(r){return t(n,e,r)}}}}function tt(t){return function(n){return function(e){return function(r){return function(i){return t(n,e,r,i)}}}}}function nt(t){return t.isJust}function et(t){return null==t?h:d(t)}function rt(t){return function(n){return function(e){return e.isJust?n(e.value):t}}}function it(t){return function(n){return function(e){return e.isJust?n(e.value):t()}}}function ot(t){return z(A)(X(nt)(t))}function ut(t){return y(ht)(ft(Y)(t))}function at(t){return t.isLeft}function st(t){return t.isRight}function ct(t){return function(n){return function(e){return(e.isLeft?t:n)(e.value)}}}function ft(t){return function(n){return function(e){try{return p(n(e))}catch(n){return l(t(n))}}}}function lt(t){return function(n){return function(e){return function(r){try{return p(n(e)(r))}catch(n){return l(t(n))}}}}}function pt(t){return function(n){return function(e){return function(r){return function(i){try{return p(n(e)(r)(i))}catch(n){return l(t(n))}}}}}}function ht(t){return t.isLeft?h:d(t.value)}function dt(t){return!t}function yt(t){return function(n){return function(e){return function(r){return(t(r)?n:e)(r)}}}}function mt(t){return function(n){for(var e=[],r=t(n);r.isJust;r=t(r.value.snd))e.push(r.value.fst);return e}}function _t(t){return function(n){return function(e){for(var r=[],i=Math.min(n.length,e.length),o=0;o<i;o+=1)r.push(t(n[o])(e[o]));return r}}}function vt(t){return function(n){var e={};return e[t]=n,e}}function gt(t){return function(n){return t+n}}function Et(t){return function(n){return t*n}}function Tt(t){return"(?:"+t.join("|")+")"}H.create={consts:{},types:[G,t.Object],impl:q},H.type={consts:{},types:[t.Any,t.RecordType({namespace:k(t.String),name:t.String,version:t.NonNegativeInteger})],impl:function(t){var n=s.parse(s(t));return n.namespace=et(n.namespace),n}},H.show={consts:{},types:[t.Any,t.String],impl:u},H.equals={consts:{a:[a.Setoid]},types:[R,R,t.Boolean],impl:J(a.equals)},H.lt={consts:{a:[a.Ord]},types:[R,R,t.Boolean],impl:function(t){return function(n){return a.lt(n,t)}}},H.lte={consts:{a:[a.Ord]},types:[R,R,t.Boolean],impl:function(t){return function(n){return a.lte(n,t)}}},H.gt={consts:{a:[a.Ord]},types:[R,R,t.Boolean],impl:function(t){return function(n){return a.gt(n,t)}}},H.gte={consts:{a:[a.Ord]},types:[R,R,t.Boolean],impl:function(t){return function(n){return a.gte(n,t)}}},H.min={consts:{a:[a.Ord]},types:[R,R,R],impl:J(a.min)},H.max={consts:{a:[a.Ord]},types:[R,R,R],impl:J(a.max)},H.id={consts:{c:[a.Category]},types:[V(N),N],impl:a.id},H.concat={consts:{a:[a.Semigroup]},types:[R,R,R],impl:J(a.concat)},H.empty={consts:{a:[a.Monoid]},types:[V(R),R],impl:a.empty},H.invert={consts:{g:[a.Group]},types:[O,O],impl:a.invert},H.filter={consts:{f:[a.Filterable]},types:[t.Predicate(R),C(R),C(R)],impl:X},H.reject={consts:{f:[a.Filterable]},types:[t.Predicate(R),C(R),C(R)],impl:J(a.reject)},H.takeWhile={consts:{f:[a.Filterable]},types:[t.Predicate(R),C(R),C(R)],impl:J(a.takeWhile)},H.dropWhile={consts:{f:[a.Filterable]},types:[t.Predicate(R),C(R),C(R)],impl:J(a.dropWhile)},H.map={consts:{f:[a.Functor]},types:[_(R)(S),C(R),C(S)],impl:z},H.flip={consts:{f:[a.Functor]},types:[C(_(R)(S)),R,C(S)],impl:J(a.flip)},H.bimap={consts:{p:[a.Bifunctor]},types:[_(R)(S),_(N)(M),U(R)(N),U(S)(M)],impl:Z(a.bimap)},H.mapLeft={consts:{p:[a.Bifunctor]},types:[_(R)(S),U(R)(N),U(S)(N)],impl:J(a.mapLeft)},H.promap={consts:{p:[a.Profunctor]},types:[_(R)(S),_(N)(M),U(S)(N),U(R)(M)],impl:Z(a.promap)},H.alt={consts:{f:[a.Alt]},types:[C(R),C(R),C(R)],impl:J(a.alt)},H.zero={consts:{f:[a.Plus]},types:[V(t.TypeVariable("f")),C(R)],impl:a.zero},H.reduce={consts:{f:[a.Foldable]},types:[_(R)(_(S)(R)),R,C(S),R],impl:W},H.traverse={consts:{f:[a.Applicative],t:[a.Traversable]},types:[V(t.TypeVariable("f")),_(R)(C(S)),L(R),C(L(S))],impl:Z(a.traverse)},H.sequence={consts:{f:[a.Applicative],t:[a.Traversable]},types:[V(t.TypeVariable("f")),L(C(R)),C(L(R))],impl:J(a.sequence)},H.ap={consts:{f:[a.Apply]},types:[C(_(R)(S)),C(R),C(S)],impl:J(a.ap)},H.lift2={consts:{f:[a.Apply]},types:[_(R)(_(S)(N)),C(R),C(S),C(N)],impl:Z(a.lift2)},H.lift3={consts:{f:[a.Apply]},types:[_(R)(_(S)(_(N)(M))),C(R),C(S),C(N),C(M)],impl:tt(a.lift3)},H.apFirst={consts:{f:[a.Apply]},types:[C(R),C(S),C(R)],impl:J(a.apFirst)},H.apSecond={consts:{f:[a.Apply]},types:[C(R),C(S),C(S)],impl:J(a.apSecond)},H.of={consts:{f:[a.Applicative]},types:[V(t.TypeVariable("f")),R,C(R)],impl:K},H.chain={consts:{m:[a.Chain]},types:[_(R)(F(S)),F(R),F(S)],impl:J(a.chain)},H.join={consts:{m:[a.Chain]},types:[F(F(R)),F(R)],impl:a.join},H.chainRec={consts:{m:[a.ChainRec]},types:[V(t.TypeVariable("m")),_(R)(F(j(R)(S))),R,F(S)],impl:function(t){return function(n){return function(n){return a.chainRec(t,e,n)};function e(t,e,r){return a.map(ct(t)(e),n(r))}}}},H.extend={consts:{w:[a.Extend]},types:[_(P(R))(S),P(R),P(S)],impl:J(a.extend)},H.duplicate={consts:{w:[a.Extend]},types:[P(R),P(P(R))],impl:a.duplicate},H.extract={consts:{w:[a.Comonad]},types:[P(R),R],impl:a.extract},H.contramap={consts:{f:[a.Contravariant]},types:[_(S)(R),C(R),C(S)],impl:J(a.contramap)},H.I={consts:{},types:[R,R],impl:Y},H.K={consts:{},types:[R,S,R],impl:$},H.T={consts:{},types:[R,_(R)(S),S],impl:Q},H.curry2={consts:{},types:[t.Function([R,S,N]),R,S,N],impl:J},H.curry3={consts:{},types:[t.Function([R,S,N,M]),R,S,N,M],impl:Z},H.curry4={consts:{},types:[t.Function([R,S,N,M,I]),R,S,N,M,I],impl:tt},H.curry5={consts:{},types:[t.Function([R,S,N,M,I,w]),R,S,N,M,I,w],impl:function(t){return function(n){return function(e){return function(r){return function(i){return function(o){return t(n,e,r,i,o)}}}}}}},H.compose={consts:{s:[a.Semigroupoid]},types:[B(S)(N),B(R)(S),B(R)(N)],impl:J(a.compose)},H.pipe={consts:{f:[a.Foldable]},types:[C(_(t.Any)(t.Any)),R,S],impl:function(t){return function(n){return W(Q)(n)(t)}}},H.pipeK={consts:{f:[a.Foldable],m:[a.Chain]},types:[C(_(t.Any)(F(t.Any))),F(R),F(S)],impl:function(t){return function(n){return a.reduce(function(t,n){return a.chain(n,t)},n,t)}}},H.on={consts:{},types:[_(S)(_(S)(N)),_(R)(S),R,R,N],impl:function(t){return function(n){return function(e){return function(r){return t(n(e))(n(r))}}}}},H.Pair={consts:{},types:[R,S,D(R)(S)],impl:o},H.fst={consts:{},types:[D(R)(S),R],impl:o.fst},H.snd={consts:{},types:[D(R)(S),S],impl:o.snd},H.swap={consts:{},types:[D(R)(S),D(S)(R)],impl:o.swap},H.Just={consts:{},types:[R,k(R)],impl:d},H.isNothing={consts:{},types:[k(R),t.Boolean],impl:function(t){return t.isNothing}},H.isJust={consts:{},types:[k(R),t.Boolean],impl:nt},H.fromMaybe={consts:{},types:[R,k(R),R],impl:m(rt)(Y)},H.fromMaybe_={consts:{},types:[t.Thunk(R),k(R),R],impl:m(it)(Y)},H.maybeToNullable={consts:{},types:[k(R),t.Nullable(R)],impl:function(t){return t.isJust?t.value:null}},H.toMaybe={consts:{},types:[R,k(R)],impl:et},H.maybe={consts:{},types:[S,_(R)(S),k(R),S],impl:rt},H.maybe_={consts:{},types:[t.Thunk(S),_(R)(S),k(R),S],impl:it},H.justs={consts:{f:[a.Filterable,a.Functor]},types:[C(k(R)),C(R)],impl:ot},H.mapMaybe={consts:{f:[a.Filterable,a.Functor]},types:[_(R)(k(S)),C(R),C(S)],impl:y(y(ot))(z)},H.encase={consts:{},types:[_(R)(S),R,k(S)],impl:ut},H.encase2={consts:{},types:[_(R)(_(S)(N)),R,S,k(N)],impl:y(y(y(ht)))(lt(Y))},H.encase3={consts:{},types:[_(R)(_(S)(_(N)(M))),R,S,N,k(M)],impl:y(y(y(y(ht))))(pt(Y))},H.maybeToEither={consts:{},types:[R,k(S),j(R)(S)],impl:function(t){return rt(l(t))(p)}},H.Left={consts:{},types:[R,j(R)(S)],impl:l},H.Right={consts:{},types:[S,j(R)(S)],impl:p},H.isLeft={consts:{},types:[j(R)(S),t.Boolean],impl:at},H.isRight={consts:{},types:[j(R)(S),t.Boolean],impl:st},H.fromEither={consts:{},types:[S,j(R)(S),S],impl:function(t){return ct($(t))(Y)}},H.toEither={consts:{},types:[R,S,j(R)(S)],impl:function(t){return function(n){return null==n?l(t):p(n)}}},H.either={consts:{},types:[_(R)(N),_(S)(N),j(R)(S),N],impl:ct},H.lefts={consts:{f:[a.Filterable,a.Functor]},types:[C(j(R)(S)),C(R)],impl:y(z(A))(X(at))},H.rights={consts:{f:[a.Filterable,a.Functor]},types:[C(j(R)(S)),C(S)],impl:y(z(A))(X(st))},H.tagBy={consts:{},types:[t.Predicate(R),R,j(R)(R)],impl:function(t){return yt(t)(p)(l)}},H.encaseEither={consts:{},types:[_(t.Error)(x),_(R)(w),R,j(x)(w)],impl:ft},H.encaseEither2={consts:{},types:[_(t.Error)(x),_(R)(_(S)(w)),R,S,j(x)(w)],impl:lt},H.encaseEither3={consts:{},types:[_(t.Error)(x),_(R)(_(S)(_(N)(w))),R,S,N,j(x)(w)],impl:pt},H.eitherToMaybe={consts:{},types:[j(R)(S),k(S)],impl:ht},H.and={consts:{},types:[t.Boolean,t.Boolean,t.Boolean],impl:function(t){return function(n){return t&&n}}},H.or={consts:{},types:[t.Boolean,t.Boolean,t.Boolean],impl:function(t){return function(n){return t||n}}},H.not={consts:{},types:[t.Boolean,t.Boolean],impl:dt},H.complement={consts:{},types:[t.Predicate(R),R,t.Boolean],impl:y(dt)},H.ifElse={consts:{},types:[t.Predicate(R),_(R)(S),_(R)(S),R,S],impl:yt},H.when={consts:{},types:[t.Predicate(R),_(R)(R),R,R],impl:function(t){return m(yt(t))(Y)}},H.unless={consts:{},types:[t.Predicate(R),_(R)(R),R,R],impl:function(t){return yt(t)(Y)}},H.allPass={consts:{f:[a.Foldable]},types:[C(t.Predicate(R)),R,t.Boolean],impl:function(t){return function(n){return a.reduce(function(t,e){return t&&e(n)},!0,t)}}},H.anyPass={consts:{f:[a.Foldable]},types:[C(t.Predicate(R)),R,t.Boolean],impl:function(t){return function(n){return a.reduce(function(t,e){return t||e(n)},!1,t)}}},H.slice={consts:{},types:[t.Integer,t.Integer,t.Array(R),k(t.Array(R))],impl:function(t){return function(n){return function(e){var r=t<0?t+e.length:t,i=n<0?n+e.length:n;return Math.abs(t)<=e.length&&Math.abs(n)<=e.length&&r<=i?d(e.slice(r,i)):h}}}},H.at={consts:{},types:[t.Integer,t.Array(R),k(R)],impl:function(t){return function(n){var e=t<0?n.length+t:t;return e<0||e>=n.length?h:d(n[e])}}},H.head={consts:{},types:[t.Array(R),k(R)],impl:function(t){return t.length>0?d(t[0]):h}},H.last={consts:{},types:[t.Array(R),k(R)],impl:function(t){return t.length>0?d(t[t.length-1]):h}},H.tail={consts:{},types:[t.Array(R),k(t.Array(R))],impl:function(t){return t.length>0?d(t.slice(1)):h}},H.init={consts:{},types:[t.Array(R),k(t.Array(R))],impl:function(t){return t.length>0?d(t.slice(0,-1)):h}},H.take={consts:{},types:[t.Integer,t.Array(R),k(t.Array(R))],impl:function(t){return function(n){return t>=0&&t<=n.length?d(n.slice(0,t)):h}}},H.takeLast={consts:{},types:[t.Integer,t.Array(R),k(t.Array(R))],impl:function(t){return function(n){return t>=0&&t<=n.length?d(n.slice(n.length-t)):h}}},H.drop={consts:{},types:[t.Integer,t.Array(R),k(t.Array(R))],impl:function(t){return function(n){return t>=0&&t<=n.length?d(n.slice(t)):h}}},H.dropLast={consts:{},types:[t.Integer,t.Array(R),k(t.Array(R))],impl:function(t){return function(n){return t>=0&&t<=n.length?d(n.slice(0,n.length-t)):h}}},H.size={consts:{f:[a.Foldable]},types:[C(R),t.Integer],impl:a.size},H.append={consts:{f:[a.Applicative,a.Semigroup]},types:[R,C(R),C(R)],impl:J(a.append)},H.prepend={consts:{f:[a.Applicative,a.Semigroup]},types:[R,C(R),C(R)],impl:J(a.prepend)},H.joinWith={consts:{},types:[t.String,t.Array(t.String),t.String],impl:E("join")},H.elem={consts:{a:[a.Setoid],f:[a.Foldable]},types:[R,C(R),t.Boolean],impl:J(a.elem)},H.find={consts:{f:[a.Foldable]},types:[t.Predicate(R),C(R),k(R)],impl:function(t){return function(n){return a.reduce(function(n,e){return n.isJust?n:t(e)?d(e):h},h,n)}}},H.foldMap={consts:{b:[a.Monoid],f:[a.Foldable]},types:[V(S),_(R)(S),C(R),S],impl:Z(a.foldMap)},H.unfoldr={consts:{},types:[_(S)(k(D(R)(S))),S,t.Array(R)],impl:mt},H.range={consts:{},types:[t.Integer,t.Integer,t.Array(t.Integer)],impl:function(t){return function(n){for(var e=[],r=t;r<n;r+=1)e.push(r);return e}}},H.groupBy={consts:{},types:[_(R)(t.Predicate(R)),t.Array(R),t.Array(t.Array(R))],impl:function(t){return function(n){if(0===n.length)return[];for(var e=n[0],r=[e],i=[r],o=1;o<n.length;o+=1){var u=n[o];t(e)(u)?r.push(u):i.push(r=[e=u])}return i}}},H.reverse={consts:{f:[a.Applicative,a.Foldable,a.Monoid]},types:[C(R),C(R)],impl:a.reverse},H.sort={consts:{a:[a.Ord],m:[a.Applicative,a.Foldable,a.Monoid]},types:[F(R),F(R)],impl:a.sort},H.sortBy={consts:{b:[a.Ord],m:[a.Applicative,a.Foldable,a.Monoid]},types:[_(R)(S),F(R),F(R)],impl:J(a.sortBy)},H.zip={consts:{},types:[t.Array(R),t.Array(S),t.Array(D(R)(S))],impl:_t(o)},H.zipWith={consts:{},types:[_(R)(_(S)(N)),t.Array(R),t.Array(S),t.Array(N)],impl:_t},H.prop={consts:{},types:[t.String,R,S],impl:function(t){return function(n){var e=T(n);if(t in e)return e[t];throw new TypeError("prop expected object to have a property named "+t+"; "+u(n)+" does not")}}},H.props={consts:{},types:[t.Array(t.String),R,S],impl:function(t){return function(n){return t.reduce(function(n,e){var r=T(n);if(e in r)return r[e];throw new TypeError("props expected object to have a property at "+u(t)+"; "+u(n)+" does not")},n)}}},H.get={consts:{},types:[t.Predicate(t.Any),t.String,R,k(S)],impl:function(t){return y(y(X(t)))(v)}},H.gets={consts:{},types:[t.Predicate(t.Any),t.Array(t.String),R,k(S)],impl:function(t){return function(n){return function(e){return a.filter(t,n.reduce(function(t,n){return a.chain(v(n),t)},d(e)))}}}},H.singleton={consts:{},types:[t.String,R,t.StrMap(R)],impl:vt},H.insert={consts:{},types:[t.String,R,t.StrMap(R),t.StrMap(R)],impl:function(t){return function(n){return function(e){return a.concat(e,vt(t)(n))}}}},H.remove={consts:{},types:[t.String,t.StrMap(R),t.StrMap(R)],impl:function(t){return function(n){var e=a.concat(n,{});return delete e[t],e}}},H.keys={consts:{},types:[t.StrMap(R),t.Array(t.String)],impl:Object.keys},H.values={consts:{},types:[t.StrMap(R),t.Array(R)],impl:function(t){return a.map(function(n){return t[n]},Object.keys(t))}},H.pairs={consts:{},types:[t.StrMap(R),t.Array(D(t.String)(R))],impl:function(t){return a.map(function(n){return o(n)(t[n])},Object.keys(t))}},H.fromPairs={consts:{f:[a.Foldable]},types:[C(D(t.String)(R)),t.StrMap(R)],impl:function(t){return a.reduce(function(t,n){return t[n.fst]=n.snd,t},{},t)}},H.negate={consts:{},types:[t.ValidNumber,t.ValidNumber],impl:function(t){return-t}},H.add={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:gt},H.sum={consts:{f:[a.Foldable]},types:[C(t.FiniteNumber),t.FiniteNumber],impl:W(gt)(0)},H.sub={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:function(t){return function(n){return n-t}}},H.mult={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Et},H.product={consts:{f:[a.Foldable]},types:[C(t.FiniteNumber),t.FiniteNumber],impl:W(Et)(1)},H.div={consts:{},types:[t.NonZeroFiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:function(t){return function(n){return n/t}}},H.pow={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:function(t){return function(n){return Math.pow(n,t)}}},H.mean={consts:{f:[a.Foldable]},types:[C(t.FiniteNumber),k(t.FiniteNumber)],impl:function(t){var n=a.reduce(function(t,n){return t.total+=n,t.count+=1,t},{total:0,count:0},t);return n.count>0?d(n.total/n.count):h}},H.even={consts:{},types:[t.Integer,t.Boolean],impl:function(t){return t%2==0}},H.odd={consts:{},types:[t.Integer,t.Boolean],impl:function(t){return t%2!=0}},H.parseDate={consts:{},types:[t.String,k(t.ValidDate)],impl:function(t){var n=new Date(t);return isNaN(n.valueOf())?h:d(n)}};var bt=new RegExp("^\\s*[+-]?"+Tt(["Infinity","NaN",Tt(["[0-9]+","[0-9]+[.][0-9]+","[0-9]+[.]","[.][0-9]+"])+(Tt(["[Ee][+-]?[0-9]+"])+"?")])+"\\s*$");H.parseFloat={consts:{},types:[t.String,k(t.Number)],impl:function(t){return bt.test(t)?d(parseFloat(t)):h}};var At=t.NullaryType("sanctuary/Radix")("")(function(n){return t.Integer._test(n)&&n>=2&&n<=36});H.parseInt={consts:{},types:[At,t.String,k(t.Integer)],impl:function(n){return function(e){var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".slice(0,n),i=new RegExp("^["+r+"]+$","i"),o=e.replace(/^[+-]/,"");if(i.test(16===n?o.replace(/^0x/i,""):o)){var u=parseInt(e,n);if(t.Integer._test(u))return d(u)}return h}}},H.parseJson={consts:{},types:[t.Predicate(t.Any),t.String,k(R)],impl:function(t){return y(X(t))(ut(JSON.parse))}};var Rt=t.RecordType({match:t.String,groups:t.Array(k(t.String))});function St(t){return{match:t[0],groups:a.map(et,t.slice(1))}}function Nt(t,n){var e=t.lastIndex,r=n();return t.lastIndex=e,r}return H.regex={consts:{},types:[t.RegexFlags,t.String,t.RegExp],impl:function(t){return function(n){return new RegExp(n,t)}}},H.regexEscape={consts:{},types:[t.String,t.String],impl:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},H.test={consts:{},types:[t.RegExp,t.String,t.Boolean],impl:function(t){return function(n){return Nt(t,function(){return t.test(n)})}}},H.match={consts:{},types:[t.NonGlobalRegExp,t.String,k(Rt)],impl:function(t){return function(n){return a.map(St,et(n.match(t)))}}},H.matchAll={consts:{},types:[t.GlobalRegExp,t.String,t.Array(Rt)],impl:function(t){return function(n){return Nt(t,function(){return mt(function(e){return a.map(function(t){return o(St(t))(null)},et(t.exec(n)))})([])})}}},H.toUpper={consts:{},types:[t.String,t.String],impl:g("toUpperCase")},H.toLower={consts:{},types:[t.String,t.String],impl:g("toLowerCase")},H.trim={consts:{},types:[t.String,t.String],impl:g("trim")},H.stripPrefix={consts:{},types:[t.String,t.String,k(t.String)],impl:function(t){return function(n){var e=t.length;return n.slice(0,e)===t?d(n.slice(e)):h}}},H.stripSuffix={consts:{},types:[t.String,t.String,k(t.String)],impl:function(t){return function(n){var e=n.length-t.length;return n.slice(e)===t?d(n.slice(0,e)):h}}},H.words={consts:{},types:[t.String,t.Array(t.String)],impl:function(t){var n=t.split(/\s+/),e=n.length;return n.slice(""===n[0]?1:0,""===n[e-1]?e-1:e)}},H.unwords={consts:{},types:[t.Array(t.String),t.String],impl:E("join")(" ")},H.lines={consts:{},types:[t.String,t.Array(t.String)],impl:function(t){return""===t?[]:t.replace(/\r\n?/g,"\n").match(/^(?=[\s\S]).*/gm)}},H.unlines={consts:{},types:[t.Array(t.String),t.String],impl:function(t){return t.reduce(function(t,n){return t+n+"\n"},"")}},H.splitOn={consts:{},types:[t.String,t.String,t.Array(t.String)],impl:E("split")},H.splitOnRegex={consts:{},types:[t.GlobalRegExp,t.String,t.Array(t.String)],impl:function(t){return function(n){return Nt(t,function(){for(var e,r=[],i=0;null!=(e=t.exec(n));)if(t.lastIndex===i&&""===e[0]){if(t.lastIndex===n.length)return r;t.lastIndex+=1}else r.push(n.slice(i,e.index)),i=e.index+e[0].length;return r.push(n.slice(i)),r})}}},q({checkTypes:void 0===r||null==r||null==Object({NODE_ENV:"production",BROADCAST:void 0,BUILD_VERSION:"0.0.1-alpha"})||!1,env:a.concat(t.env,[t.FiniteNumber,t.NonZeroFiniteNumber,j(t.Unknown)(t.Unknown),_(t.Unknown)(t.Unknown),t.GlobalRegExp,t.NonGlobalRegExp,t.Integer,t.NonNegativeInteger,k(t.Unknown),t.Array2(t.Unknown)(t.Unknown),D(t.Unknown)(t.Unknown),t.RegexFlags,t.Type,t.TypeClass,t.ValidDate,t.ValidNumber])})})}).call(this,e(17))},function(t,n,e){"use strict";e.r(n),e.d(n,"lambda1",function(){return h}),e.d(n,"lambda2",function(){return _}),e.d(n,"lambda3",function(){return T}),e.d(n,"lambda4",function(){return S}),e.d(n,"lambda5",function(){return O}),e.d(n,"lambda6",function(){return F}),e.d(n,"Stream",function(){return $}),e.d(n,"StreamLoop",function(){return J}),e.d(n,"StreamSink",function(){return Z}),e.d(n,"Cell",function(){return W}),e.d(n,"CellLoop",function(){return tt}),e.d(n,"CellSink",function(){return nt}),e.d(n,"Transaction",function(){return D}),e.d(n,"Tuple2",function(){return et}),e.d(n,"Unit",function(){return H}),e.d(n,"Operational",function(){return q}),e.d(n,"getTotalRegistrations",function(){return u}),e.d(n,"Vertex",function(){return l}),e.d(n,"TimerSystemImpl",function(){return rt}),e.d(n,"TimerSystem",function(){return ut}),e.d(n,"SecondsTimerSystem",function(){return at}),e.d(n,"MillisecondsTimerSystem",function(){return ct}),e.d(n,"IOAction",function(){return lt});var r=e(14),i=e(7),o=0;function u(){return o}var a,s=function(){function t(t,n){if(this.registered=!1,this.deregister_=null,null===t)throw new Error("null origin!");this.origin=t,this.register_=n}return t.prototype.register=function(t){var n=this;this.registered||(this.registered=!0,null!==this.register_?this.deregister_=this.register_():(this.origin.increment(t),this.deregister_=function(){return n.origin.decrement(t)}))},t.prototype.deregister=function(t){this.registered&&(this.registered=!1,null!==this.deregister_&&this.deregister_())},t}();!function(t){t[t.black=0]="black",t[t.gray=1]="gray",t[t.white=2]="white",t[t.purple=3]="purple"}(a||(a={}));var c=[],f=0,l=function(){function t(t,n,e){this.targets=[],this.childrn=[],this.visited=!1,this.color=a.black,this.buffered=!1,this.refCountAdj=0,this.name=t,this.rank=n,this.sources=e,this.id=f++}return t.prototype.refCount=function(){return this.targets.length},t.prototype.register=function(t){return this.increment(t)},t.prototype.deregister=function(n){this.decrement(n),t.collectCycles()},t.prototype.incRefCount=function(t){var n=!1;if(0==this.refCount())for(var e=0;e<this.sources.length;e++)this.sources[e].register(this);return this.targets.push(t),t.childrn.push(this),t.ensureBiggerThan(this.rank)&&(n=!0),o++,n},t.prototype.decRefCount=function(t){for(var n=!1,e=t.childrn.length-1;e>=0;e--)t.childrn[e]===this&&t.childrn.splice(e,1);for(e=0;e<this.targets.length;e++)if(this.targets[e]===t){this.targets.splice(e,1),n=!0;break}if(n){if(0==this.refCount())for(e=0;e<this.sources.length;e++)this.sources[e].deregister(this);o--}},t.prototype.addSource=function(t){this.sources.push(t),this.refCount()>0&&t.register(this)},t.prototype.ensureBiggerThan=function(t){if(this.rank>t||this.visited)return!1;this.visited=!0,this.rank=t+1;for(var n=0;n<this.targets.length;n++)this.targets[n].ensureBiggerThan(this.rank);return this.visited=!1,!0},t.prototype.descr=function(){var t=null;switch(this.color){case a.black:t="black";break;case a.gray:t="gray";break;case a.white:t="white";break;case a.purple:t="purple"}for(var n=this.id+" "+this.name+" ["+this.refCount()+"/"+this.refCountAdj+"] "+t+" ->",e=this.children(),r=0;r<e.length;r++)n=n+" "+e[r].id;return n},t.prototype.children=function(){return this.childrn},t.prototype.increment=function(t){return this.incRefCount(t)},t.prototype.decrement=function(t){this.decRefCount(t),0==this.refCount()?this.release():this.possibleRoots()},t.prototype.release=function(){this.color=a.black,this.buffered||this.free()},t.prototype.free=function(){for(;this.targets.length>0;)this.decRefCount(this.targets[0])},t.prototype.possibleRoots=function(){this.color!=a.purple&&(this.color=a.purple,this.buffered||(this.buffered=!0,c.push(this)))},t.collectCycles=function(){if(!t.collectingCycles)try{t.collectingCycles=!0,t.markRoots(),t.scanRoots(),t.collectRoots()}finally{t.collectingCycles=!1}},t.markRoots=function(){for(var t=[],n=0;n<c.length;n++)c[n].color==a.purple?(c[n].markGray(),t.push(c[n])):(c[n].buffered=!1,c[n].color==a.black&&0==c[n].refCount()&&c[n].free());c=t},t.scanRoots=function(){for(var t=0;t<c.length;t++)c[t].scan()},t.collectRoots=function(){for(var t=0;t<c.length;t++)c[t].buffered=!1,c[t].collectWhite();c=[]},t.prototype.markGray=function(){if(this.color!=a.gray){this.color=a.gray;for(var t=this.children(),n=0;n<t.length;n++)t[n].refCountAdj--,t[n].markGray()}},t.prototype.scan=function(){if(this.color==a.gray)if(this.refCount()+this.refCountAdj>0)this.scanBlack();else{this.color=a.white;for(var t=this.children(),n=0;n<t.length;n++)t[n].scan()}},t.prototype.scanBlack=function(){this.color=a.black;for(var t=this.children(),n=0;n<t.length;n++)t[n].refCountAdj++,t[n].color!=a.black&&t[n].scanBlack()},t.prototype.collectWhite=function(){if(this.color==a.white&&!this.buffered){this.color=a.black,this.refCountAdj=0;for(var t=this.children(),n=0;n<t.length;n++)t[n].collectWhite();this.free()}},t.NULL=new t("user",1e12,[]),t.collectingCycles=!1,t}(),p=function(t,n){this.f=t,this.deps=n};function h(t,n){return new p(t,n)}function d(t){return t instanceof p?t.deps:[]}function y(t){return t instanceof p?t.f:t}var m=function(t,n){this.f=t,this.deps=n};function _(t,n){return new m(t,n)}function v(t){return t instanceof m?t.deps:[]}function g(t){return t instanceof m?t.f:t}var E=function(t,n){this.f=t,this.deps=n};function T(t,n){return new E(t,n)}function b(t){return t instanceof E?t.deps:[]}function A(t){return t instanceof E?t.f:t}var R=function(t,n){this.f=t,this.deps=n};function S(t,n){return new R(t,n)}function N(t){return t instanceof R?t.deps:[]}function M(t){return t instanceof R?t.f:t}var I=function(t,n){this.f=t,this.deps=n};function O(t,n){return new I(t,n)}function x(t){return t instanceof I?t.deps:[]}function w(t){return t instanceof I?t.f:t}var C=function(t,n){this.f=t,this.deps=n};function F(t,n){return new C(t,n)}function L(t){return t instanceof C?t.deps:[]}function P(t){return t instanceof C?t.f:t}function U(t){for(var n=[],e=0;e<t.length;e++){var r=t[e];n.push(new s(r.getVertex__(),null))}return n}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};function j(t,n){function e(){this.constructor=t}B(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var k=function(){function t(n,e){this.rank=n,this.action=e,this.seq=t.nextSeq++}return t.prototype.toString=function(){return this.seq.toString()},t.nextSeq=0,t}(),D=function(){function t(){this.inCallback=0,this.toRegen=!1,this.prioritizedQ=new r.PriorityQueue(function(t,n){return t.rank.rank<n.rank.rank?1:t.rank.rank>n.rank.rank?-1:t.seq<n.seq?1:t.seq>n.seq?-1:0}),this.entries=new r.Set(function(t){return t.toString()}),this.sampleQ=[],this.lastQ=[],this.postQ=null}return t.prototype.requestRegen=function(){this.toRegen=!0},t.prototype.prioritized=function(t,n){var e=new k(t,n);this.prioritizedQ.enqueue(e),this.entries.add(e)},t.prototype.sample=function(t){this.sampleQ.push(t)},t.prototype.last=function(t){this.lastQ.push(t)},t.prototype.post=function(t,n){for(null==this.postQ&&(this.postQ=[]);this.postQ.length<=t;)this.postQ.push(null);var e=this.postQ[t],r=null===e?n:function(){e(),n()};this.postQ[t]=r},t.prototype.checkRegen=function(){if(this.toRegen){this.toRegen=!1,this.prioritizedQ.clear();for(var t=this.entries.toArray(),n=0;n<t.length;n++)this.prioritizedQ.enqueue(t[n])}},t.prototype.isActive=function(){return!!t.currentTransaction},t.prototype.close=function(){for(;;){for(;this.checkRegen(),!this.prioritizedQ.isEmpty();){var n=this.prioritizedQ.dequeue();this.entries.remove(n),n.action()}var e=this.sampleQ;this.sampleQ=[];for(var r=0;r<e.length;r++)e[r]();if(this.prioritizedQ.isEmpty()&&this.sampleQ.length<1)break}for(r=0;r<this.lastQ.length;r++)this.lastQ[r]();if(this.lastQ=[],null!=this.postQ){for(r=0;r<this.postQ.length;r++)if(null!=this.postQ[r]){var i=t.currentTransaction;try{if(r>0){t.currentTransaction=new t;try{this.postQ[r](),t.currentTransaction.close()}catch(n){throw t.currentTransaction.close(),n}}else t.currentTransaction=null,this.postQ[r]();t.currentTransaction=i}catch(n){throw t.currentTransaction=i,n}}this.postQ=null}},t.onStart=function(n){t.onStartHooks.push(n)},t.run=function(n){var e=t.currentTransaction;if(null===e){if(!t.runningOnStartHooks){t.runningOnStartHooks=!0;try{for(var r=0;r<t.onStartHooks.length;r++)t.onStartHooks[r]()}finally{t.runningOnStartHooks=!1}}t.currentTransaction=new t}try{var i=n();return null===e&&(t.currentTransaction.close(),t.currentTransaction=null),i}catch(n){throw null===e&&(t.currentTransaction.close(),t.currentTransaction=null),n}},t.currentTransaction=null,t.onStartHooks=[],t.runningOnStartHooks=!1,t}(),V=function(){function t(t,n){this.f=g(t),this.out=n,this.out.getVertex__().sources=this.out.getVertex__().sources.concat(U(v(t))),this.accumValid=!1}return t.prototype.send_=function(t){var n=this;this.accumValid?this.accum=this.f(this.accum,t):(D.currentTransaction.prioritized(this.out.getVertex__(),function(){n.out.send_(n.accum),n.accumValid=!1,n.accum=null}),this.accum=t,this.accumValid=!0)},t}(),G=function(){function t(t){this.f=t}return t.prototype.get=function(){return this.f()},t.prototype.map=function(n){var e=this;return new t(function(){return n(e.f())})},t.prototype.lift=function(n,e){var r=this;return new t(function(){return e(r.f(),n.f())})},t.prototype.lift3=function(n,e,r){var i=this;return new t(function(){return r(i.f(),n.f(),e.f())})},t.prototype.lift4=function(n,e,r,i){var o=this;return new t(function(){return i(o.f(),n.f(),e.f(),r.f())})},t}(),H=function(){function t(){}return t.UNIT=new t,t}(),q=function(){function t(){}return t.updates=function(t){return t.getStream__()},t.value=function(n){return D.run(function(){var e=new Q;D.currentTransaction.prioritized(e.getVertex__(),function(){e.send_(H.UNIT)});var r=e.snapshot1(n);return t.updates(n).orElse(r)})},t.defer=function(n){return t.split(n.map(function(t){return[t]}))},t.split=function(t){var n=new Q(null);return n.setVertex__(new l("split",0,[new s(t.getVertex__(),function(){return t.listen_(n.getVertex__(),function(t){for(var e=function(e){D.currentTransaction.post(e,function(){D.run(function(){n.send_(t[e])})})},r=0;r<t.length;r++)e(r)},!1)})])),n},t}(),X=function(t){this.hasValue=!1,this.value=null,this.cell=t},z=function(){this.f=null,this.f_present=!1,this.a=null,this.a_present=!1},W=function(){function t(t,n){var e=this;this.value=t,n?D.run(function(){return e.setStream(n)}):(this.str=new $,this.vertex=new l("ConstCell",0,[]))}return t.prototype.setStream=function(t){var n=this;this.str=t;var e=this,r=new s(t.getVertex__(),function(){return t.listen_(e.vertex,function(t){null==e.valueUpdate&&D.currentTransaction.last(function(){e.value=e.valueUpdate,e.lazyInitValue=null,e.valueUpdate=null}),e.valueUpdate=t},!1)});this.vertex=new l("Cell",0,[r]),this.vertex.register(l.NULL),D.currentTransaction.last(function(){n.vertex.deregister(l.NULL)})},t.prototype.getVertex__=function(){return this.vertex},t.prototype.getStream__=function(){return this.str},t.prototype.sample=function(){var t=this;return D.run(function(){return t.sampleNoTrans__()})},t.prototype.sampleNoTrans__=function(){return this.value},t.prototype.sampleLazy=function(){var t=this;return D.run(function(){return t.sampleLazyNoTrans__()})},t.prototype.sampleLazyNoTrans__=function(){var t=this,n=new X(t);return D.currentTransaction.sample(function(){n.value=null!=t.valueUpdate?t.valueUpdate:t.sampleNoTrans__(),n.hasValue=!0,n.cell=null}),new G(function(){return n.hasValue?n.value:n.cell.sample()})},t.prototype.map=function(t){var n=this;return D.run(function(){return q.updates(n).map(t).holdLazy(n.sampleLazy().map(y(t)))})},t.prototype.lift=function(n,e){var r=g(e),i=this.map(function(t){return function(n){return r(t,n)}});return t.apply(i,n,U(v(e)))},t.prototype.lift3=function(n,e,r){var i=A(r),o=this.map(function(t){return function(n){return function(e){return i(t,n,e)}}});return t.apply(t.apply(o,n),e,U(b(r)))},t.prototype.lift4=function(n,e,r,i){var o=M(i),u=this.map(function(t){return function(n){return function(e){return function(r){return o(t,n,e,r)}}}});return t.apply(t.apply(t.apply(u,n),e),r,U(N(i)))},t.prototype.lift5=function(n,e,r,i,o){var u=w(o),a=this.map(function(t){return function(n){return function(e){return function(r){return function(i){return u(t,n,e,r,i)}}}}});return t.apply(t.apply(t.apply(t.apply(a,n),e),r),i,U(x(o)))},t.prototype.lift6=function(n,e,r,i,o,u){var a=P(u),s=this.map(function(t){return function(n){return function(e){return function(r){return function(i){return function(o){return a(t,n,e,r,i,o)}}}}}});return t.apply(t.apply(t.apply(t.apply(t.apply(s,n),e),r),i),o,U(L(u)))},t.apply=function(t,n,e){return D.run(function(){var r=new z,i=new Q,o=q.value(t),u=q.value(n),a=new s(o.getVertex__(),function(){return o.listen_(i.getVertex__(),function(t){r.f=t,r.f_present=!0,r.a_present&&i.send_(r.f(r.a))},!1)}),c=new s(u.getVertex__(),function(){return u.listen_(i.getVertex__(),function(t){r.a=t,r.a_present=!0,r.f_present&&i.send_(r.f(r.a))},!1)});return i.setVertex__(new l("apply",0,[a,c].concat(e||[]))),i.coalesce__(function(t,n){return n}).holdLazy(new G(function(){return t.sampleNoTrans__()(n.sampleNoTrans__())}))})},t.switchC=function(t){return D.run(function(){var n=t.sampleLazy().map(function(t){return t.sample()}),e=new Q,r=null,i=q.value(t),o=new s(i.getVertex__(),function(){var t=null===r?null:q.value(r).listen_(e.getVertex__(),function(t){return e.send_(t)},!1),n=i.listen_(e.getVertex__(),function(n){r=n,null!==t&&t(),t=q.value(n).listen_(e.getVertex__(),function(t){return e.send_(t)},!1)},!1);return function(){n(),t()}});return e.setVertex__(new l("switchC",0,[o])),e.coalesce__(function(t,n){return n}).holdLazy(n)})},t.switchS=function(t){return D.run(function(){var n=new Q,e=function(t){n.send_(t)},r=new s(t.getVertex__(),function(){var r=t.sampleNoTrans__().listen_(n.getVertex__(),e,!1),i=t.getStream__().listen_(n.getVertex__(),function(t){r(),r=t.listen_(n.getVertex__(),e,!0)},!1);return function(){i(),r()}});return n.setVertex__(new l("switchS",0,[r])),n})},t.prototype.listen=function(t){var n=this;return D.run(function(){return q.value(n).listen(t)})},t["fantasy-land/of"]=function(n){return new t(n)},t.prototype["fantasy-land/map"]=function(t){return this.map(t)},t.prototype["fantasy-land/ap"]=function(n){return t.apply(n,this)},t.prototype["fantasy-land/chain"]=function(n){return t.switchC(this.map(n))},t.prototype["fantasy-land/extend"]=function(n){return new t(n(this))},t.prototype["fantasy-land/extract"]=function(){return this.sample()},t}(),K=function(t,n){this.h=t,this.target=n},Y=function(t){function n(n,e){var r=t.call(this,null,null)||this;return D.run(function(){e&&r.setStream(e),r.lazyInitValue=n}),r}return j(n,t),n.prototype.sampleNoTrans__=function(){return null==this.value&&null!=this.lazyInitValue&&(this.value=this.lazyInitValue.get(),this.lazyInitValue=null),this.value},n}(W),$=function(){function t(t){this.listeners=[],this.firings=[],this.vertex=t||new l("Stream",0,[])}return t.prototype.getVertex__=function(){return this.vertex},t.prototype.map=function(t){var n=this,e=new Q(null),r=y(t);return e.vertex=new l("map",0,[new s(this.vertex,function(){return n.listen_(e.vertex,function(t){e.send_(r(t))},!1)})].concat(U(d(t)))),e},t.prototype.mapTo=function(t){var n=this,e=new Q(null);return e.vertex=new l("mapTo",0,[new s(this.vertex,function(){return n.listen_(e.vertex,function(n){e.send_(t)},!1)})]),e},t.prototype.orElse=function(t){return this.merge(t,function(t,n){return t})},t.prototype.merge_=function(t){var n=this,e=new Q,r=new l("merge",0,[]);return r.sources.push(new s(this.vertex,function(){return n.listen_(r,function(t){e.send_(t)},!1)})),e.vertex.sources=e.vertex.sources.concat([new s(r,function(){return r.register(e.vertex),function(){r.deregister(e.vertex)}}),new s(t.vertex,function(){return t.listen_(e.vertex,function(t){e.send_(t)},!1)})]),e},t.prototype.coalesce__=function(t){var n=this,e=new Q,r=new V(t,e);return e.vertex.sources=e.vertex.sources.concat([new s(this.vertex,function(){return n.listen_(e.vertex,function(t){r.send_(t)},!1)})]).concat(U(v(t))),e},t.prototype.merge=function(t,n){var e=this;return D.run(function(){return e.merge_(t).coalesce__(n)})},t.prototype.filter=function(t){var n=this,e=new Q(null),r=y(t);return e.vertex=new l("filter",0,[new s(this.vertex,function(){return n.listen_(e.vertex,function(t){r(t)&&e.send_(t)},!1)})].concat(U(d(t)))),e},t.prototype.filterNotNull=function(){var t=this,n=new Q(null);return n.vertex=new l("filterNotNull",0,[new s(this.vertex,function(){return t.listen_(n.vertex,function(t){null!==t&&n.send_(t)},!1)})]),n},t.prototype.gate=function(t){return this.snapshot(t,function(t,n){return n?t:null}).filterNotNull()},t.prototype.snapshot1=function(t){var n=this,e=new Q(null);return e.vertex=new l("snapshot1",0,[new s(this.vertex,function(){return n.listen_(e.vertex,function(n){e.send_(t.sampleNoTrans__())},!1)}),new s(t.getVertex__(),null)]),e},t.prototype.snapshot=function(t,n){var e=this,r=new Q(null),i=g(n);return r.vertex=new l("snapshot",0,[new s(this.vertex,function(){return e.listen_(r.vertex,function(n){r.send_(i(n,t.sampleNoTrans__()))},!1)}),new s(t.getVertex__(),null)].concat(U(v(n)))),r},t.prototype.snapshot3=function(t,n,e){var r=this,i=new Q(null),o=A(e);return i.vertex=new l("snapshot",0,[new s(this.vertex,function(){return r.listen_(i.vertex,function(e){i.send_(o(e,t.sampleNoTrans__(),n.sampleNoTrans__()))},!1)}),new s(t.getVertex__(),null),new s(n.getVertex__(),null)].concat(U(b(e)))),i},t.prototype.snapshot4=function(t,n,e,r){var i=this,o=new Q(null),u=M(r);return o.vertex=new l("snapshot",0,[new s(this.vertex,function(){return i.listen_(o.vertex,function(r){o.send_(u(r,t.sampleNoTrans__(),n.sampleNoTrans__(),e.sampleNoTrans__()))},!1)}),new s(t.getVertex__(),null),new s(n.getVertex__(),null),new s(e.getVertex__(),null)].concat(U(N(r)))),o},t.prototype.snapshot5=function(t,n,e,r,i){var o=this,u=new Q(null),a=w(i);return u.vertex=new l("snapshot",0,[new s(this.vertex,function(){return o.listen_(u.vertex,function(i){u.send_(a(i,t.sampleNoTrans__(),n.sampleNoTrans__(),e.sampleNoTrans__(),r.sampleNoTrans__()))},!1)}),new s(t.getVertex__(),null),new s(n.getVertex__(),null),new s(e.getVertex__(),null),new s(r.getVertex__(),null)].concat(U(x(i)))),u},t.prototype.snapshot6=function(t,n,e,r,i,o){var u=this,a=new Q(null),c=P(o);return a.vertex=new l("snapshot",0,[new s(this.vertex,function(){return u.listen_(a.vertex,function(o){a.send_(c(o,t.sampleNoTrans__(),n.sampleNoTrans__(),e.sampleNoTrans__(),r.sampleNoTrans__(),i.sampleNoTrans__()))},!1)}),new s(t.getVertex__(),null),new s(n.getVertex__(),null),new s(e.getVertex__(),null),new s(r.getVertex__(),null),new s(i.getVertex__(),null)].concat(U(L(o)))),a},t.prototype.hold=function(t){return new W(t,this)},t.prototype.holdLazy=function(t){return new Y(t,this)},t.prototype.collect=function(t,n){return this.collectLazy(new G(function(){return t}),n)},t.prototype.collectLazy=function(t,n){var e=this;return D.run(function(){var r=new J,i=r.holdLazy(t),o=e.snapshot(i,n),u=o.map(function(t){return t.a}),a=o.map(function(t){return t.b});return r.loop(a),u})},t.prototype.accum=function(t,n){return this.accumLazy(new G(function(){return t}),n)},t.prototype.accumLazy=function(t,n){var e=this;return D.run(function(){var r=new J,i=r.holdLazy(t),o=e.snapshot(i,n);return r.loop(o),o.holdLazy(t)})},t.prototype.once=function(){var t=this;return D.run(function(){return t.gate(t.mapTo(!1).hold(!0))})},t.prototype.listen=function(t){var n=this;return D.run(function(){return n.listen_(l.NULL,t,!1)})},t.prototype.listen_=function(t,n,e){var r=this;this.vertex.register(t)&&D.currentTransaction.requestRegen();var i=new K(n,t);if(this.listeners.push(i),!e&&0!=this.firings.length){var o=this.firings.slice();D.currentTransaction.prioritized(t,function(){for(var t=0;t<o.length;t++)n(o[t])})}return function(){for(var n=!1,e=0;e<r.listeners.length;e++)if(r.listeners[e]==i){r.listeners.splice(e,1),n=!0;break}n&&r.vertex.deregister(t)}},t.prototype["fantasy-land/map"]=function(t){return this.map(t)},t.prototype["fantasy-land/concat"]=function(t){return this.merge(t,function(t,n){return i.Semigroup.test(t)?Object(i.concat)(t,n):t})},t.prototype["fantasy-land/empty"]=function(){return new t},t}(),Q=function(t){function n(n){return t.call(this,n)||this}return j(n,t),n.prototype.setVertex__=function(t){this.vertex=t},n.prototype.send_=function(t){var n=this;if(0==this.vertex.refCount())throw new Error("send() was invoked before listeners were registered");0==this.firings.length&&D.currentTransaction.last(function(){n.firings=[]}),this.firings.push(t);for(var e=this.listeners.slice(),r=function(n){var r=e[n].h;D.currentTransaction.prioritized(e[n].target,function(){D.currentTransaction.inCallback++;try{r(t),D.currentTransaction.inCallback--}catch(t){throw D.currentTransaction.inCallback--,t}})},i=0;i<e.length;i++)r(i)},n}($),J=function(t){function n(){var n=t.call(this)||this;if(n.assigned__=!1,n.vertex.name="StreamLoop",null===D.currentTransaction)throw new Error("StreamLoop/CellLoop must be used within an explicit transaction");return n}return j(n,t),n.prototype.loop=function(t){var n=this;if(this.assigned__)throw new Error("StreamLoop looped more than once");this.assigned__=!0,this.vertex.addSource(new s(t.getVertex__(),function(){return t.listen_(n.vertex,function(t){n.send_(t)},!1)}))},n}(Q),Z=function(t){function n(n){var e=t.call(this)||this;return n||(n=function(t,n){throw new Error("send() called more than once per transaction, which isn't allowed. Did you want to combine the events? Then pass a combining function to your StreamSink constructor.")}),e.coalescer=new V(n,e),e}return j(n,t),n.prototype.send=function(t){var n=this;D.run(function(){if(D.currentTransaction.inCallback>0)throw new Error("You are not allowed to use send() inside a Sodium callback");n.coalescer.send_(t)})},n}(Q),tt=function(t){function n(){return t.call(this,null,new J)||this}return j(n,t),n.prototype.loop=function(t){var n=this;D.run(function(){n.getStream__().loop(t.getStream__()),n.lazyInitValue=t.sampleLazy()})},n.prototype.sampleNoTrans__=function(){if(!this.getStream__().assigned__)throw new Error("CellLoop sampled before it was looped");return t.prototype.sampleNoTrans__.call(this)},n}(Y),nt=function(t){function n(n,e){return t.call(this,n,new Z(e))||this}return j(n,t),n.prototype.send=function(t){this.getStream__().send(t)},n}(W),et=function(t,n){this.a=t,this.b=n},rt=function(){},it=0,ot=function(t,n){this.t=t,this.sAlarm=n,this.seq=++it},ut=function(){function t(t){var n=this;this.eventQueue=new r.BSTree(function(t,n){return t.t<n.t?-1:t.t>n.t?1:t.seq<n.seq?-1:t.seq>n.seq?1:0}),D.run(function(){n.impl=t,n.tMinimum=0;var e=new nt(t.now());n.time=e,n.time.listen(function(t){}),D.onStart(function(){for(var r=n.tMinimum=Math.max(n.tMinimum,t.now()),i=function(){var t=null;if(!n.eventQueue.isEmpty()){var i=n.eventQueue.minimum();i.t<=r&&(t=i)}if(null==t)return"break";e.send(t.t),D.run(function(){return t.sAlarm.send_(t.t)})};"break"!==i(););e.send(r)})})}return t.prototype.at=function(t){var n=this,e=null,r=null,i=!1,o=null,u=!1,a=new Q(null),c=function(){null!==r&&(r(),n.eventQueue.remove(e)),r=null,e=null,i&&(u||(u=!0,o=t.sampleNoTrans__()),null!==o&&(e=new ot(o,a),n.eventQueue.add(e),r=n.impl.setTimer(o,function(){n.tMinimum=Math.max(n.tMinimum,o),D.run(function(){})})))};return a.setVertex__(new l("at",0,[new s(t.getVertex__(),function(){i=!0,u=!1,D.currentTransaction.prioritized(a.getVertex__(),c);var n=t.getStream__().listen_(a.getVertex__(),function(t){o=t,u=!0,c()},!1);return function(){i=!1,c(),n()}})])),a},t}(),at=function(t){function n(){return t.call(this,new st)||this}return j(n,t),n}(ut),st=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return j(n,t),n.prototype.setTimer=function(t,n){var e=setTimeout(n,Math.max(1e3*(t-this.now()),0));return function(){clearTimeout(e)}},n.prototype.now=function(){return.001*Date.now()},n}(rt),ct=function(t){function n(){return t.call(this,new ft)||this}return j(n,t),n}(ut),ft=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return j(n,t),n.prototype.setTimer=function(t,n){var e=setTimeout(n,Math.max(t-this.now(),0));return function(){clearTimeout(e)}},n.prototype.now=function(){return Date.now()},n}(rt),lt=function(){function t(){}
/*!
     * Convert a function that performs asynchronous I/O taking input A
     * and returning a value of type B into an I/O action of type
     * (sa : Stream<A>) => Stream<B>
     */return t.fromAsync=function(t){return function(n){var e=new Q(null);return e.setVertex__(new l("map",0,[new s(n.getVertex__(),function(){return n.listen_(e.getVertex__(),function(n){t(n,function(t){D.run(function(){e.send_(t)})})},!1)})])),e}},t}()},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(35)):null!=e(0)?(i=[e(35)],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function i(t){return function(n){return t}}function o(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,i=0;i<n.length;i+=1){var o=n[i];if(null==r||!t&&!u(o,r))return null;r=r[o]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var v=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function g(n,e,r){function i(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([v(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var o=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v9.0.0#"+n,e,function(t){return o.every(function(n){var e=r[n]===h?t.constructor:t;return null!=i(n)(e)})});return u.methods=o.reduce(function(t,n){return t[n]=i(n),t},{}),u}var E=g("Setoid",[],{equals:d}),T=g("Ord",[E],{lte:d}),b=g("Semigroupoid",[],{compose:d}),A=g("Category",[b],{id:h}),R=g("Semigroup",[],{concat:d}),S=g("Monoid",[R],{empty:h}),N=g("Group",[S],{invert:d}),M=g("Filterable",[],{filter:d}),I=g("Functor",[],{map:d}),O=g("Bifunctor",[I],{bimap:d}),x=g("Profunctor",[I],{promap:d}),w=g("Apply",[I],{ap:d}),C=g("Applicative",[w],{of:h}),F=g("Chain",[w],{chain:d}),L=g("ChainRec",[F],{chainRec:h}),P=g("Monad",[C,F],{}),U=g("Alt",[I],{alt:d}),B=g("Plus",[U],{zero:h}),j=g("Alternative",[C,B],{}),k=g("Foldable",[],{reduce:d}),D=g("Traversable",[I,k],{traverse:d}),V=g("Extend",[I],{extend:d}),G=g("Comonad",[V],{extract:d}),H=g("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!$(this[n],t[n]))return!1;return!0}function z(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!$(this[n],t[n]))return J(this[n],t[n])}}function W(t){return this.concat(t)}function K(t){var n={};function e(t){n[t]=this[t]}return o(this,e),o(t,e),n}var Y={Null:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{"fantasy-land/equals":function(t){return $(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return J(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},i={head:n,tail:r};i!==r;){for(var o=r,u=t(f,l,i.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):o={head:s.value,tail:o}}for(i=i.tail;o!==r;)i={head:o.head,tail:i},o=o.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{"fantasy-land/equals":X,"fantasy-land/lte":z,"fantasy-land/concat":W,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,i=t(this[e]);r<i.length;r+=1)n.push(i[r]);return n},"fantasy-land/alt":W,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function i(o,u){switch(u){case 0:return ut(t,[]);case 2:return ot(s,n(e[o]),n(e[o+1]));default:var a=2*Math.floor(u/4);return ot(r,i(o,a),i(o+a,u-a))}}return this.length%2==1?ot(r,et(q,n(this[0])),i(1,this.length-1)):i(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return z.call(this,t)}}},Error:{prototype:{"fantasy-land/equals":function(t){return $(this.name,t.name)&&$(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return $(e,Object.keys(t).sort())&&e.every(function(e){return $(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),i=e.shift();if(r<i)return!0;if(r>i)return!1;if(!$(this[r],t[r]))return J(this[r],t[r])}},"fantasy-land/concat":K,"fantasy-land/filter":function(t){var n={};return o(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return o(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return o(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":K,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return ot(function(t){return function(n){var e={};return e[r]=n,K.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(Z(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},$=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function Q(t,n){return c(t,n)&&!J(n,t)}var J=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return $(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function Z(t,n){return R.methods.concat(t)(n)}function tt(t){return S.methods.empty(t)()}function nt(t,n){return M.methods.filter(n)(t)}function et(t,n){return I.methods.map(n)(t)}function rt(t,n,e){return O.methods.bimap(e)(t,n)}function it(t,n){return w.methods.ap(n)(t)}function ot(t,n,e){return it(et(t,n),e)}function ut(t,n){return C.methods.of(t)(n)}function at(t,n){return F.methods.chain(n)(t)}function st(t,n,e){return k.methods.reduce(e)(t,n)}function ct(t,n){var e=st(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return J}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var i=0;i<e.length;i+=1)e[i]=e[i].x;return e}var o=n.constructor,u=tt(o);for(i=0;i<e.length;i+=1)u=Z(u,ut(o,e[i].x));return u}function ft(t,n,e){return D.methods.traverse(e)(t,n)}function lt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:R,Monoid:S,Group:N,Filterable:M,Functor:I,Bifunctor:O,Profunctor:x,Apply:w,Applicative:C,Chain:F,ChainRec:L,Monad:P,Alt:U,Plus:B,Alternative:j,Foldable:k,Traversable:D,Extend:V,Comonad:G,Contravariant:H,equals:$,lt:Q,lte:J,gt:function(t,n){return Q(n,t)},gte:function(t,n){return J(n,t)},min:function(t,n){return J(t,n)?t:n},max:function(t,n){return J(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:Z,empty:tt,invert:function(t){return N.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,flip:function(t,n){return I.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:rt,mapLeft:function(t,n){return rt(t,a,n)},promap:function(t,n,e){return x.methods.promap(e)(t,n)},ap:it,lift2:ot,lift3:function(t,n,e,r){return it(it(et(t,n),e),r)},apFirst:function(t,n){return ot(i,t,n)},apSecond:function(t,n){return ot(i(a),t,n)},of:ut,append:function(t,n){return Z(n,ut(n.constructor,t))},prepend:function(t,n){return Z(ut(n.constructor,t),n)},chain:at,join:function(t){return at(a,t)},chainRec:function(t,n,e){return L.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:st,size:function(t){return Array.isArray(t)?t.length:st(function(t,n){return t+1},0,t)},elem:function(t,n){return st(function(n,e){return n||$(t,e)},!1,n)},foldMap:function(t,n,e){return st(function(t,e){return Z(t,n(e))},tt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return st(function(t,e){return Z(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(a,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:ft,sequence:function(t,n){return ft(t,a,n)},extend:lt,duplicate:function(t){return lt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){(function(t,r){var i=/%[sdj%]/g;n.format=function(t){if(!_(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(a(arguments[e]));return n.join(" ")}e=1;for(var r=arguments,o=r.length,u=String(t).replace(i,function(t){if("%%"===t)return"%";if(e>=o)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(t){return"[Circular]"}default:return t}}),s=r[e];e<o;s=r[++e])y(s)||!E(s)?u+=" "+s:u+=" "+a(s);return u},n.deprecate=function(e,i){if(v(t.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(!0===r.noDeprecation)return e;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var o,u={};function a(t,e){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(e)?r.showHidden=e:e&&n._extend(r,e),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),f(r,t,r.depth)}function s(t,n){var e=a.styles[n];return e?"["+a.colors[e][0]+"m"+t+"["+a.colors[e][1]+"m":t}function c(t,n){return t}function f(t,e,r){if(t.customInspect&&e&&A(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return _(i)||(i=f(t,i,r)),i}var o=function(t,n){if(v(n))return t.stylize("undefined","undefined");if(_(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}return m(n)?t.stylize(""+n,"number"):d(n)?t.stylize(""+n,"boolean"):y(n)?t.stylize("null","null"):void 0}(t,e);if(o)return o;var u=Object.keys(e),a=function(t){var n={};return u.forEach(function(t,e){n[t]=!0}),n}();if(t.showHidden&&(u=Object.getOwnPropertyNames(e)),b(e)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return l(e);if(0===u.length){if(A(e)){var s=e.name?": "+e.name:"";return t.stylize("[Function"+s+"]","special")}if(g(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(T(e))return t.stylize(Date.prototype.toString.call(e),"date");if(b(e))return l(e)}var c,E="",R=!1,S=["{","}"];return h(e)&&(R=!0,S=["[","]"]),A(e)&&(E=" [Function"+(e.name?": "+e.name:"")+"]"),g(e)&&(E=" "+RegExp.prototype.toString.call(e)),T(e)&&(E=" "+Date.prototype.toUTCString.call(e)),b(e)&&(E=" "+l(e)),0!==u.length||R&&0!=e.length?r<0?g(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=R?function(t,n,e,r,i){for(var o=[],u=0,a=n.length;u<a;++u)M(n,String(u))?o.push(p(t,n,e,r,String(u),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,n,e,r,i,!0))}),o}(t,e,r,a,u):u.map(function(n){return p(t,e,r,a,n,R)}),t.seen.pop(),function(t,n,e){return t.reduce(function(t,n){return n.indexOf("\n"),t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1]:e[0]+n+" "+t.join(", ")+" "+e[1]}(c,E,S)):S[0]+E+S[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,n,e,r,i,o){var u,a,s;if((s=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]}).get?a=s.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):s.set&&(a=t.stylize("[Setter]","special")),M(r,i)||(u="["+i+"]"),a||(t.seen.indexOf(s.value)<0?(a=y(e)?f(t,s.value,null):f(t,s.value,e-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),v(u)){if(o&&i.match(/^\d+$/))return a;(u=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+a}function h(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function m(t){return"number"==typeof t}function _(t){return"string"==typeof t}function v(t){return void 0===t}function g(t){return E(t)&&"[object RegExp]"===R(t)}function E(t){return"object"==typeof t&&null!==t}function T(t){return E(t)&&"[object Date]"===R(t)}function b(t){return E(t)&&("[object Error]"===R(t)||t instanceof Error)}function A(t){return"function"==typeof t}function R(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(t){if(v(o)&&(o=Object({NODE_ENV:"production",BROADCAST:void 0,BUILD_VERSION:"0.0.1-alpha"}).NODE_DEBUG||""),t=t.toUpperCase(),!u[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var e=r.pid;u[t]=function(){var r=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,r)}}else u[t]=function(){};return u[t]},n.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=d,n.isNull=y,n.isNullOrUndefined=function(t){return null==t},n.isNumber=m,n.isString=_,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=v,n.isRegExp=g,n.isObject=E,n.isDate=T,n.isError=b,n.isFunction=A,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=e(58);var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(t,n){return Object.prototype.hasOwnProperty.call(t,n)}n.log=function(){console.log("%s - %s",function(){var t=new Date,n=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),N[t.getMonth()],n].join(" ")}(),n.format.apply(n,arguments))},n.inherits=e(57),n._extend=function(t,n){if(!n||!E(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t}}).call(this,e(36),e(17))},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(3),e(38)):null!=e(0)?(i=[e(3),e(38)],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryEither=u(self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(n,r){"use strict";if("undefined"!=typeof __doctest){var i=__doctest.require("sanctuary-def"),o=__doctest.require("sanctuary-type-identifiers");!function(){var t=__doctest.require("sanctuary"),n=i.BinaryType("sanctuary-either/Either")("")(function(t){return o(t)===u["@@type"]})(function(t){return t.isLeft?[t.value]:[]})(function(t){return t.isLeft?[]:[t.value]}),e=r.concat(t.env,[i.TypeClass,n(i.Unknown)(i.Unknown)]);t.create({checkTypes:!0,env:e})}()}var u={},a={constructor:u,isLeft:!0,isRight:!1,"@@show":y,"fantasy-land/map":function(t){return this},"fantasy-land/bimap":function(t,n){return l(t(this.value))},"fantasy-land/ap":function(t){return t.isLeft?t:this},"fantasy-land/chain":function(t){return this},"fantasy-land/alt":function(t){return t},"fantasy-land/reduce":function(t,n){return n},"fantasy-land/traverse":function(t,n){return r.of(t,this)},"fantasy-land/extend":function(t){return this}},s={constructor:u,isLeft:!1,isRight:!0,"@@show":m,"fantasy-land/map":function(t){return p(t(this.value))},"fantasy-land/bimap":function(t,n){return p(n(this.value))},"fantasy-land/ap":function(t){return t.isLeft?t:p(t.value(this.value))},"fantasy-land/chain":function(t){return t(this.value)},"fantasy-land/alt":function(t){return this},"fantasy-land/reduce":function(t,n){return t(n,this.value)},"fantasy-land/traverse":function(t,n){return r.map(p,n(this.value))},"fantasy-land/extend":function(t){return p(t(this))}},c="object"==typeof t&&"object"==typeof t.exports?e(11):{},f=null!=c.inspect&&"symbol"==typeof c.inspect.custom?c.inspect.custom:"inspect";a[f]=y,s[f]=m;var l=u.Left=function(t){var n=Object.create(a);return r.Setoid.test(t)&&(n["fantasy-land/equals"]=_,r.Ord.test(t)&&(n["fantasy-land/lte"]=g)),r.Semigroup.test(t)&&(n["fantasy-land/concat"]=T),n.value=t,n},p=u.Right=function(t){var n=Object.create(s);return r.Setoid.test(t)&&(n["fantasy-land/equals"]=v,r.Ord.test(t)&&(n["fantasy-land/lte"]=E)),r.Semigroup.test(t)&&(n["fantasy-land/concat"]=b),n.value=t,n};function h(t){return{tag:h,value:t}}function d(t){return{tag:d,value:t}}function y(){return"Left ("+n(this.value)+")"}function m(){return"Right ("+n(this.value)+")"}function _(t){return t.isLeft&&r.equals(this.value,t.value)}function v(t){return t.isRight&&r.equals(this.value,t.value)}function g(t){return t.isRight||r.lte(this.value,t.value)}function E(t){return t.isRight&&r.lte(this.value,t.value)}function T(t){return t.isLeft?l(r.concat(this.value,t.value)):t}function b(t){return t.isRight?p(r.concat(this.value,t.value)):this}return u["@@type"]="sanctuary-either/Either@1",u["fantasy-land/of"]=p,u["fantasy-land/chainRec"]=function(t,n){for(var e=h(n);e.tag===h;){var r=t(h,d,e.value);if(r.isLeft)return r;e=r.value}return p(e.value)},u})},function(t,n,e){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(e(61)),r(e(56)),r(e(55)),r(e(51)),r(e(26))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(6);n.arrays=r;var i=e(50);n.Bag=i.default;var o=e(49);n.BSTree=o.default;var u=e(24);n.BSTreeKV=u.default;var a=e(4);n.Dictionary=a.default;var s=e(22);n.Heap=s.default;var c=e(48);n.LinkedDictionary=c.default;var f=e(15);n.LinkedList=f.default;var l=e(47);n.MultiDictionary=l.default;var p=e(21);n.FactoryDictionary=p.default;var h=e(21);n.DefaultDictionary=h.default;var d=e(23);n.Queue=d.default;var y=e(46);n.PriorityQueue=y.default;var m=e(25);n.Set=m.default;var _=e(45);n.Stack=_.default;var v=e(44);n.MultiRootTree=v.default;var g=e(2);n.util=g},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),i=e(6),o=function(){function t(){this.firstNode=null,this.lastNode=null,this.nElements=0}return t.prototype.add=function(t,n){if(r.isUndefined(n)&&(n=this.nElements),n<0||n>this.nElements||r.isUndefined(t))return!1;var e=this.createNode(t);if(0===this.nElements||null===this.lastNode)this.firstNode=e,this.lastNode=e;else if(n===this.nElements)this.lastNode.next=e,this.lastNode=e;else if(0===n)e.next=this.firstNode,this.firstNode=e;else{var i=this.nodeAtIndex(n-1);if(null==i)return!1;e.next=i.next,i.next=e}return this.nElements++,!0},t.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},t.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},t.prototype.elementAtIndex=function(t){var n=this.nodeAtIndex(t);if(null!==n)return n.element},t.prototype.indexOf=function(t,n){var e=n||r.defaultEquals;if(r.isUndefined(t))return-1;for(var i=this.firstNode,o=0;null!==i;){if(e(i.element,t))return o;o++,i=i.next}return-1},t.prototype.contains=function(t,n){return this.indexOf(t,n)>=0},t.prototype.remove=function(t,n){var e=n||r.defaultEquals;if(this.nElements<1||r.isUndefined(t))return!1;for(var i=null,o=this.firstNode;null!==o;){if(e(o.element,t))return null==i?(this.firstNode=o.next,o===this.lastNode&&(this.lastNode=null)):o===this.lastNode?(this.lastNode=i,i.next=o.next,o.next=null):(i.next=o.next,o.next=null),this.nElements--,!0;i=o,o=o.next}return!1},t.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.prototype.equals=function(n,e){var i=e||r.defaultEquals;return n instanceof t&&this.size()===n.size()&&this.equalsAux(this.firstNode,n.firstNode,i)},t.prototype.equalsAux=function(t,n,e){for(;null!==t&&null!==n;){if(!e(t.element,n.element))return!1;t=t.next,n=n.next}return!0},t.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements||null===this.firstNode||null===this.lastNode)){var n;if(1===this.nElements)n=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var e=this.nodeAtIndex(t-1);null===e?(n=this.firstNode.element,this.firstNode=this.firstNode.next):e.next===this.lastNode&&(n=this.lastNode.element,this.lastNode=e),null!==e&&null!==e.next&&(n=e.next.element,e.next=e.next.next)}return this.nElements--,n}},t.prototype.forEach=function(t){for(var n=this.firstNode;null!==n&&!1!==t(n.element);)n=n.next},t.prototype.reverse=function(){for(var t=null,n=this.firstNode,e=null;null!==n;)e=n.next,n.next=t,t=n,n=e;e=this.firstNode,this.firstNode=this.lastNode,this.lastNode=e},t.prototype.toArray=function(){for(var t=[],n=this.firstNode;null!==n;)t.push(n.element),n=n.next;return t},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){return i.toString(this.toArray())},t.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var n=this.firstNode,e=0;e<t&&null!=n;e++)n=n.next;return n},t.prototype.createNode=function(t){return{element:t,next:null}},t}();n.default=o},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(9);n.sWorldUpdate=new r.StreamSink},function(t,n){var e,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,c=[],f=!1,l=-1;function p(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&h())}function h(){if(!f){var t=a(p);f=!0;for(var n=c.length;n;){for(s=c,c=[];++l<n;)s&&s[l].run();l=-1,n=c.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function d(t,n){this.fun=t,this.array=n}function y(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new d(t,n)),1!==c.length||f||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,n,e){"use strict";e.r(n);var r=function(t){return t},i=function(t){return t},o=i(function(t){return function(n,e){return arguments.length<2?t(n):t(n)(e)}}),u=i(function(t){return function(n,e){return arguments.length<2?r(function(e){return t(n,e)}):t(n,e)}}),a=i(function(t){return function(n,e,r){switch(arguments.length){case 0:case 1:return p(2,t(n));case 2:return p(2,t(n))(e);default:return p(2,t(n))(e,r)}}}),s=i(function(t){return function(n,e,i){switch(arguments.length){case 0:case 1:return o(r(function(e){return t(n,e)}));case 2:return t(n,e);default:return t(n,e)(i)}}}),c=i(function(t){return function(n,e,i){switch(arguments.length){case 0:case 1:return u(r(function(e,r){return t(n,e,r)}));case 2:return r(function(r){return t(n,e,r)});default:return t(n,e,i)}}}),f=function(t){return 1===t.length?t:r(function(n){return t(n)})},l=[[function(t){return 0===t.length?t:r(function(){return t()})}],[f,f],[void 0,o,u],[void 0,a,s,c],[void 0,i(function(t){return function(n,e,r,i){switch(arguments.length){case 0:case 1:return p(3,t(n));case 2:return p(3,t(n))(e);case 3:return p(3,t(n))(e,r);default:return p(3,t(n))(e,r,i)}}}),i(function(t){return function(n,e,i,o){switch(arguments.length){case 0:case 1:return a(r(function(e){return t(n,e)}));case 2:return p(2,t(n,e));case 3:return p(2,t(n,e))(i);default:return p(2,t(n,e))(i,o)}}}),i(function(t){return function(n,e,i,u){switch(arguments.length){case 0:case 1:return s(r(function(e,r){return t(n,e,r)}));case 2:return o(r(function(r){return t(n,e,r)}));case 3:return t(n,e,i);default:return t(n,e,i)(u)}}}),i(function(t){return function(n,e,i,o){switch(arguments.length){case 0:case 1:return c(r(function(e,r,i){return t(n,e,r,i)}));case 2:return u(r(function(r,i){return t(n,e,r,i)}));case 3:return r(function(r){return t(n,e,i,r)});default:return t(n,e,i,o)}}})]],p=function(t,n){return l[t][Math.min(t,n.length)](n)},h=function(t){return function(t,n){return l[t][t](n)}(t.length,t)},d=Object.assign,y=function(t){return d({},t)},m=function(t){return function(n){return t}},_=function(t,n){return t(n)},v=function(t,n){return n},g=function(t){return t&&Object.freeze(t)},E=g([]),T=g({}),b=function(t){return void 0!==t},A=function(t,n){return Object.prototype.hasOwnProperty.call(n,t)},R=function(t){return null==t?t:Object.getPrototypeOf(t)},S=function(t){return null==t?t:(A("constructor",t)?R(t):t).constructor},N=function(t){return"function"==typeof t},M=function(t){return"string"==typeof t},I=function(t){return"number"==typeof t},O=Array.isArray,x=R({}),w=function(t){return null!=t&&"object"==typeof t&&(A("constructor",t)?R(t)===x:t.constructor===Object)},C=function(t,n){return t===n&&(0!==t||1/t==1/n)||t!=t&&n!=n},F=function(t,n){return function(t,n){for(var e in t){var r=n[e];if(!b(r)&&!A(e,n)||!L(t[e],r))return!1}return!0}(t,n)&&function(t,n){for(var e in t)if(!A(e,n))return!1;return!0}(n,t)};function L(t,n){if(C(t,n))return!0;if(!t||!n)return!1;var e=S(t);if(e!==S(n))return!1;switch(e){case Array:return function(t,n){var e=t.length;if(e!==n.length)return!1;for(var r=0;r<e;++r)if(!L(t[r],n[r]))return!1;return!0}(t,n);case Object:return F(t,n);default:return N(t.equals)&&t.equals(n)}}e.d(n,"seemsArrayLike",function(){return fn}),e.d(n,"Identity",function(){return ln}),e.d(n,"IdentityAsync",function(){return pn}),e.d(n,"Constant",function(){return hn}),e.d(n,"toFunction",function(){return dn}),e.d(n,"assign",function(){return yn}),e.d(n,"modify",function(){return mn}),e.d(n,"modifyAsync",function(){return _n}),e.d(n,"remove",function(){return vn}),e.d(n,"set",function(){return gn}),e.d(n,"transform",function(){return En}),e.d(n,"transformAsync",function(){return Tn}),e.d(n,"traverse",function(){return bn}),e.d(n,"compose",function(){return An}),e.d(n,"flat",function(){return Rn}),e.d(n,"lazy",function(){return Sn}),e.d(n,"choices",function(){return Nn}),e.d(n,"choose",function(){return Mn}),e.d(n,"cond",function(){return In}),e.d(n,"condOf",function(){return On}),e.d(n,"ifElse",function(){return xn}),e.d(n,"iftes",function(){return wn}),e.d(n,"orElse",function(){return Cn}),e.d(n,"chain",function(){return Fn}),e.d(n,"choice",function(){return Ln}),e.d(n,"unless",function(){return Pn}),e.d(n,"when",function(){return Un}),e.d(n,"optional",function(){return Bn}),e.d(n,"zero",function(){return jn}),e.d(n,"assignOp",function(){return kn}),e.d(n,"modifyOp",function(){return Dn}),e.d(n,"setOp",function(){return Vn}),e.d(n,"removeOp",function(){return Gn}),e.d(n,"log",function(){return Hn}),e.d(n,"seq",function(){return qn}),e.d(n,"branchOr",function(){return Xn}),e.d(n,"branch",function(){return zn}),e.d(n,"branches",function(){return Wn}),e.d(n,"elems",function(){return Kn}),e.d(n,"elemsTotal",function(){return Yn}),e.d(n,"entries",function(){return $n}),e.d(n,"keys",function(){return Qn}),e.d(n,"matches",function(){return Jn}),e.d(n,"values",function(){return Zn}),e.d(n,"children",function(){return te}),e.d(n,"flatten",function(){return ne}),e.d(n,"query",function(){return ee}),e.d(n,"satisfying",function(){return re}),e.d(n,"leafs",function(){return ie}),e.d(n,"all",function(){return oe}),e.d(n,"and",function(){return ue}),e.d(n,"any",function(){return ae}),e.d(n,"collectAs",function(){return se}),e.d(n,"collect",function(){return ce}),e.d(n,"concatAs",function(){return fe}),e.d(n,"concat",function(){return le}),e.d(n,"countIf",function(){return pe}),e.d(n,"count",function(){return he}),e.d(n,"countsAs",function(){return de}),e.d(n,"counts",function(){return ye}),e.d(n,"foldl",function(){return me}),e.d(n,"foldr",function(){return _e}),e.d(n,"forEach",function(){return ve}),e.d(n,"forEachWith",function(){return ge}),e.d(n,"isDefined",function(){return Ee}),e.d(n,"isEmpty",function(){return Te}),e.d(n,"joinAs",function(){return be}),e.d(n,"join",function(){return Ae}),e.d(n,"maximumBy",function(){return Re}),e.d(n,"maximum",function(){return Se}),e.d(n,"meanAs",function(){return Ne}),e.d(n,"mean",function(){return Me}),e.d(n,"minimumBy",function(){return Ie}),e.d(n,"minimum",function(){return Oe}),e.d(n,"none",function(){return xe}),e.d(n,"or",function(){return we}),e.d(n,"productAs",function(){return Ce}),e.d(n,"product",function(){return Fe}),e.d(n,"selectAs",function(){return Le}),e.d(n,"select",function(){return Pe}),e.d(n,"sumAs",function(){return Ue}),e.d(n,"sum",function(){return Be}),e.d(n,"get",function(){return je}),e.d(n,"lens",function(){return ke}),e.d(n,"setter",function(){return De}),e.d(n,"foldTraversalLens",function(){return Ve}),e.d(n,"defaults",function(){return Ge}),e.d(n,"define",function(){return He}),e.d(n,"normalize",function(){return qe}),e.d(n,"required",function(){return Xe}),e.d(n,"reread",function(){return ze}),e.d(n,"rewrite",function(){return We}),e.d(n,"append",function(){return Ke}),e.d(n,"filter",function(){return Ye}),e.d(n,"find",function(){return $e}),e.d(n,"findWith",function(){return Qe}),e.d(n,"first",function(){return Je}),e.d(n,"index",function(){return Ze}),e.d(n,"last",function(){return tr}),e.d(n,"prefix",function(){return nr}),e.d(n,"slice",function(){return er}),e.d(n,"suffix",function(){return rr}),e.d(n,"pickIn",function(){return ir}),e.d(n,"prop",function(){return or}),e.d(n,"props",function(){return ur}),e.d(n,"propsOf",function(){return ar}),e.d(n,"removable",function(){return sr}),e.d(n,"valueOr",function(){return cr}),e.d(n,"pick",function(){return fr}),e.d(n,"replace",function(){return lr}),e.d(n,"getInverse",function(){return pr}),e.d(n,"iso",function(){return hr}),e.d(n,"array",function(){return dr}),e.d(n,"inverse",function(){return yr}),e.d(n,"complement",function(){return mr}),e.d(n,"identity",function(){return Vt}),e.d(n,"is",function(){return _r}),e.d(n,"indexed",function(){return vr}),e.d(n,"reverse",function(){return gr}),e.d(n,"singleton",function(){return Er}),e.d(n,"disjoint",function(){return Tr}),e.d(n,"keyed",function(){return Jt}),e.d(n,"uri",function(){return br}),e.d(n,"uriComponent",function(){return Ar}),e.d(n,"json",function(){return Rr}),e.d(n,"dropPrefix",function(){return Sr}),e.d(n,"dropSuffix",function(){return Nr}),e.d(n,"replaces",function(){return Mr}),e.d(n,"split",function(){return Ir}),e.d(n,"uncouple",function(){return Or}),e.d(n,"add",function(){return xr}),e.d(n,"divide",function(){return wr}),e.d(n,"multiply",function(){return Cr}),e.d(n,"negate",function(){return Fr}),e.d(n,"subtract",function(){return Lr}),e.d(n,"pointer",function(){return Pr});var P=function(t,n){return t+n},U=function(t,n){return t*n},B=h(P),j=h(U),k=h(function(t,n){return n/t}),D=function(t){return-t},V=h(function(t,n){return n instanceof t}),G=Object.create,H=g(function(t){return d(G(null),t)}(T)),q=h(function(t,n,e){return e.replace(t,n)}),X=function(t){return t},z=function(t){return t},W=function(t){return t},K=function(t,n){return M(t)?new RegExp(q(/[|\\{}()[\]^$+*?.]/g,"\\$&",t),n):t},Y=function(t,n){return null!=n&&N(n.then)?n.then(t):t(n)},$=function(t,n,e,r){return void 0!==r?Math.min(Math.max(t,r<0?n+r:r),n):e},Q=function(t){return function(n){return[n,t]}},J=function(t){return function(n){return void 0!==n?n:t}},Z=J(0),tt=function(t){return void 0!==t?!t:t},nt=function(t){return void 0!==t?[t]:t},et=function(t,n){return W(function(e){return t(e)?n(e):void 0})},rt=function(t){return!(t instanceof Object)||O(t)},it=X(function(t){if(fn(t)){for(var n=t.length,e=Array(n),r=0;n;)e[r++]=t[--n];return e}}),ot=X(function(t,n,e){for(var r=n.length,i=Array(r),o=0,u=!0,a=0;a<r;++a){var s=n[a],c=t(s,a);e!==c&&(i[o++]=c,u&&(u=s===c&&(0!==s||1/s==1/c)||s!=s&&c!=c))}return o!==r?(i.length=o,i):u?n:i}),ut=function(t,n){return fn(n)?ot(t,n,void 0):void 0},at=X(function(t,n,e,r,i){for(;r<i;)t[n++]=e[r++];return t});function st(t,n){for(var e=0,r=n.length;e<r;++e){var i=t(n[e],e);if(void 0!==i)return i}}var ct={map:v,of:function(){},ap:function(t,n){return void 0!==t?t:n}},ft=function(t,n){return{map:v,ap:t,of:m(n)}},lt=ft(P,0),pt=function(t){return h(function(n,e,r){var i=void 0,o=void 0;return ht(ct,function(e,r){var u=n(e,r);void 0===u||void 0!==o&&!t(u,o)||(i=e,o=u)},e,r),i})},ht=function(t,n,e,r){return dn(e)(r,void 0,t,n)},dt=function(t,n){return p(4,W(function(e,r){return r=n(r),function(n,i){return t(ht(r,e,n,i))}}))},yt=function(t){return function(n){return function(e){return t!==e?[e,n]:n}}},mt=X(function(t){for(var n=[];yt!==t;)n.push(t[0]),t=t[1];return n.reverse()});function _t(t,n,e,r){var i=t.map,o=t.ap,u=t.of(yt),a=e.length;if(i===v){for(var s=0;s<a;++s)u=o(u,n(e[s],s));return u}for(var c=yt(r),f=0;f<a;++f)u=o(i(c,u),n(e[f],f));return i(mt,u)}var vt=function(t,n){return function(e){return function(r,i,o,u){return o.map(function(t){return n(e,t,r)},u(t(e,r),e))}}},gt=function(t,n){return n instanceof Object?n[t]:void 0},Et=X(function(t,n,e){return void 0!==n?function(t,n,e){var r={};if(e instanceof Object)for(var i in w(e)||(e=y(e)),e)i!==t?r[i]=e[i]:(r[t]=n,t=void 0);return b(t)&&(r[t]=n),r}(t,n,e):function(t,n){var e=void 0;if(n instanceof Object)for(var r in w(n)||(n=y(n)),n)r!==t?(e||(e={}),e[r]=n[r]):t=void 0;return e}(t,e)||T}),Tt=vt(gt,Et),bt=function(t,n){return fn(n)?n[t]:void 0},At=X(function(t,n,e){fn(e)||(e="");var r=e.length;if(void 0!==n){for(var i=Math.max(t+1,r),o=Array(i),u=0;u<i;++u)o[u]=e[u];return o[t]=n,o}if(r<=t)return at(Array(r),0,e,0,r);for(var a=Array(r-1),s=0;s<t;++s)a[s]=e[s];for(var c=t+1;c<r;++c)a[c-1]=e[c];return a}),Rt=vt(bt,At),St=function(t,n){return function(e,r){return r=n(e,r),function(n,i){return t(n,i,e,r)}}};function Nt(t,n){var e=n.length-t;if(e<2)return e?dn(n[t]):Vt;for(var r=dn(n[t+--e]),i=function(t,n){return function(e,i){return r(e,i,t,n)}};--e;)i=St(dn(n[t+e]),i);var o=dn(n[t]);return function(t,n,e,r){return o(t,n,e,i(e,r))}}var Mt=X(function(t,n,e){switch(typeof t){case"string":return Et(t,n,e);case"number":return At(t,n,e);case"object":return Ft(t,0,e,n);default:return 4===t.length?t(e,void 0,ln,m(n)):e}}),It=X(function(t,n,e){switch(typeof t){case"string":return Et(t,n(gt(t,e),t),e);case"number":return At(t,n(bt(t,e),t),e);case"object":return Ft(t,n,e);default:return 4===t.length?t(e,void 0,ln,n):(n(t(e,void 0),void 0),e)}}),Ot=function(t,n,e){return function(t){return Promise.resolve(t)}(dn(t)(e,void 0,pn,n))};function xt(t){var n=function t(n,e){return t.v=e,n};return n.v=t,n}function wt(t,n,e,r){for(var i,o=t.length;e<o;++e)switch(typeof(i=t[e])){case"string":n=gt(r.v=i,n);break;case"number":n=bt(r.v=i,n);break;case"object":n=wt(i,n,0,r);break;default:n=i(n,r.v,hn,r)}return n}var Ct=X(function(t,n){switch(typeof t){case"string":return gt(t,n);case"number":return bt(t,n);case"object":for(var e,r=0,i=t.length;r<i;++r)switch(typeof(e=t[r])){case"string":n=gt(e,n);break;case"number":n=bt(e,n);break;default:return wt(t,n,r,xt(t[r-1]))}return n;default:return t(n,void 0,hn,X)}});function Ft(t,n,e,r){for(var i,o,u=t.length,a=Array(u),s=0;s<u;++s)switch(a[s]=e,typeof(i=t[s])){case"string":e=gt(i,e);break;case"number":e=bt(i,e);break;default:e=Nt(s,t)(e,t[s-1],ln,n||m(r)),u=s}for(u===t.length&&(e=n?n(e,t[u-1]):r);0<=--u;)e=M(o=t[u])?Et(o,e,a[u]):At(o,e,a[u]);return e}var Lt=function(t,n){return W(function(e,r,i,o){return i.map(function(t){return n(t,e,r)},o(t(e,r),r))})},Pt=function(t,n){return W(function(e,r,i,o){return i.map(n,o(t(e),r))})},Ut=function(t,n){return Pt(et(M,t),et(M,n))},Bt=function(t,n){return Pt(et(I,t),et(I,n))},jt=X(function(t,n){var e=void 0;for(var r in t){var i=t[r],o=w(i)?jt(i,n):Ct(i,n);void 0!==o&&(e||(e={}),e[r]=o)}return e}),kt=X(function(t,n,e){for(var r in t){var i=n&&n[r],o=t[r];e=w(o)?kt(o,i,e):Mt(o,i,e)}return e}),Dt=function(t){return S(t)!==Object?y(t):t},Vt=function(t,n,e,r){return r(t,n)},Gt=X(function(t){return function(n){for(var e={},r=t.length;r--;){var i=n[0];void 0!==i&&(e[t[r]]=i),n=n[1]}return e}}),Ht=X(function(t,n,e,r,i,o){var u=void 0,a=!0,s={};for(var c in n){u=1;var f=e[c],l=n[c](f,c,i,o);void 0!==l?(s[c]=l,a&&(a=f===l&&(0!==f||1/f==1/l)||f!=f&&l!=l)):a=!1}var p=u;for(var h in e)if(void 0===(p&&n[h])){u=1;var d=e[h],y=t(d,h,i,o);void 0!==y?(s[h]=y,a&&(a=d===y&&(0!==d||1/d==1/y)||d!=d&&y!=y)):a=!1}return u?a&&e===r?r:s:r}),qt=function(t,n){return function(e,r,i,o){var u=e instanceof Object?Dt(e):T;if(ln===i)return Ht(t,n,u,e,i,o);if(ct!==i){var a=i.map,s=i.ap,c=i.of,f=c(Q),l=[];for(var p in n)l.push(p),f=s(a(Q,f),n[p](u[p],p,i,o));var h=!!l.length||void 0;for(var d in u)void 0===(h&&n[d])&&(l.push(d),f=s(a(Q,f),t(u[d],d,i,o)));return l.length?a(Gt(l),f):c(e)}for(var y in n){var m=n[y](u[y],y,i,o);if(void 0!==m)return m}for(var _ in u)if(void 0===n[_]){var v=t(u[_],_,i,o);if(void 0!==v)return v}}},Xt=function(t,n,e){return L(e,t)?n:e},zt=X(function(t,n,e,r){for(var i,o=0,u=n.length;o<u;++o)(t(i=n[o],o)?e:r).push(i)}),Wt=function(t){return t[0]},Kt=function(t){return t.index},Yt=function(t){return Kt(t)+t[0].length},$t=X(function(t,n){var e=n.lastIndex;n.lastIndex=Yt(t);var r=n.exec(t.input);return n.lastIndex=e,r&&r[0]&&r}),Qt=function(t){return function(n){return function(e){return[t,e,n]}}},Jt=Pt(et(V(Object),X(function(t){t=Dt(t);var n=[];for(var e in t)n.push([e,t[e]]);return n})),et(O,X(function(t){for(var n={},e=0,r=t.length;e<r;++e){var i=t[e];2===i.length&&(n[i[0]]=i[1])}return n}))),Zt=X(function(t,n){if(n instanceof Object){var e={};for(var r in n=Dt(n)){var i=t(r),o=e[i];void 0===o&&(e[i]=o={}),o[r]=n[r]}return e}}),tn=X(function(t){return function(n){if(n instanceof Object){var e={};for(var r in n=Dt(n)){var i=n[r];if(i instanceof Object)for(var o in i=Dt(i))t(o)===r&&(e[o]=i[o])}return e}}}),nn=function(t,n){return function(e){return function(r,i,o,u){return(e(r,i)?t:n)(r,i,o,u)}}},en=function(t,n){return n=dn(n),t=dn(t),function(e,r,i,o){return(Ee(n,e)?n:t)(e,r,i,o)}};function rn(t,n,e,r,i){var o=e.of;return o?o(t):e.map(m(t),r(i,n))}var on=function(t,n,e,r){return e===ln?ot(r,t,void 0):e===ct?st(r,t):_t(e,r,t,void 0)},un=function(t,n){return function(e,r,i,o){return i.chain(function(t){return n(t,r,i,o)},t(e,r,i,o))}},an=function(t,n){return[n,ir(t)]},sn=m(rn),cn=function(t,n,e){return function(r,i){return t(r,i)?n:e(r,i)}},fn=function(t){return t instanceof Object&&(t=t.length)===t>>0&&0<=t||M(t)},ln=X({map:_,of:X,ap:_,chain:_}),pn=X({map:Y,ap:function(t,n){return Y(function(n){return Y(function(t){return t(n)},t)},n)},of:X,chain:Y}),hn=X({map:v}),dn=X(function(t){switch(typeof t){case"string":return Tt(t);case"number":return Rt(t);case"object":return Nt(0,t);default:return 4===t.length?t:function(t){return W(function(n,e,r,i){return r.map(m(n),i(t(n,e),e))})}(t)}}),yn=h(function(t,n,e){return Mt([t,ar(n)],n,e)}),mn=h(It),_n=h(Ot),vn=h(function(t,n){return Mt(t,void 0,n)}),gn=h(Mt),En=h(function(t,n){return It(t,X,n)}),Tn=h(function(t,n){return Ot(t,X,n)}),bn=h(ht);function An(){var t=arguments.length;if(t<2)return t?arguments[0]:Vt;for(var n=Array(t);t--;)n[t]=arguments[t];return n}function Rn(){for(var t=[ne],n=0,e=arguments.length;n<e;++n)t.push(arguments[n],ne);return t}function Sn(t){var n=function(r,i,o,u){return(n=dn(t(e)))(r,i,o,u)};function e(t,e,r,i){return n(t,e,r,i)}return e}var Nn=function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return e.length?en(e.reduceRight(en),t):t},Mn=function(t){return W(function(n,e,r,i){return dn(t(n,e))(n,e,r,i)})},In=X(function(){for(var t=arguments.length,n=jn;t--;){var e=arguments[t];n=e.length<2?dn(e[0]):nn(dn(e[1]),n)(e[0])}return n}),On=X(function(t){t=dn(t);for(var n=sn,e=arguments.length;--e;){var r=arguments[e];n=1===r.length?m(dn(r[0])):cn(r[0],dn(r[1]),n)}return function(e,r,i,o){return t(e,r,hn,n)(e,r,i,o)}}),xn=h(function(t,n,e){return nn(dn(n),dn(e))(t)}),wn=X(function(t,n){for(var e=arguments.length,r=1&e?dn(arguments[--e]):jn;0<=(e-=2);)r=nn(dn(arguments[e+1]),r)(arguments[e]);return r}),Cn=h(en),Fn=h(function(t,n){return[n,Mn(function(n,e){return void 0!==n?t(n,e):jn})]}),Ln=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.reduceRight(en,jn)},Pn=nn(rn,Vt),Un=nn(Vt,rn),Bn=Un(b),jn=function(t,n,e,r){return rn(t,n,e,r)},kn=function(t){return[ar(t),Vn(t)]},Dn=function(t){return function(n,e,r,i){return rn(n=t(n,e),e,r,i,n)}},Vn=function(t){return function(n,e,r,i){return rn(t,e,r,i,t)}},Gn=Vn();function Hn(){var t=h(function(t,n){return console.log.apply(console,at([],0,arguments,0,arguments.length).concat([t,n])),n});return Pt(t("get"),t("set"))}var qn=X(function(){var t=arguments.length,n=jn;if(t)for(n=dn(arguments[--t]);t;)n=un(dn(arguments[--t]),n);return n}),Xn=X(p(2,function(t){return t=dn(t),function(n){return function t(n,e){var r=G(null);for(var i in e){var o=e[i];r[i]=w(o)?t(n,o):dn(o)}return qt(n,r)}(t,n)}})),zn=Xn(jn);function Wn(){for(var t=arguments.length,n={},e=0;e<t;++e)n[arguments[e]]=Vt;return zn(n)}var Kn=X(function(t,n,e,r){return fn(t)?on(t,0,e,r):e.of(t)}),Yn=function(t,n,e,r){return fn(t)?e===ln?ot(r,t,ot):e===ct?st(r,t):_t(e,r,t,_t):e.of(t)},$n=z(dn([Jt,Kn])),Qn=z(dn([Jt,Kn,0])),Jn=X(function(t){return function(n,e,r,i){if(M(n)){var o=r.map;if(t.global){var u=[""];if(u.input=n,u.index=0,ct===r)return function(t,n,e){for(;e=$t(e,n);){var r=t(Wt(e),Kt(e));if(void 0!==r)return r}}(i,t,u);var a=r.ap,s=r.of;return o(function(t){return function(n){for(var e="",r=0,i=function(t){for(var n=[];Qt!==t;)n.push(t[0],t[1]),t=t[2];return n}(n),o=i.length-2;-2!==o;o+=-2){var u=i[o];e+=t.slice(r,Kt(u));var a=i[o+1];void 0!==a&&(e+=a),r=Yt(u)}return e+t.slice(r)}}(n),function(t,n,e,r,i,o){for(var u=e(Qt);o=$t(o,i);)u=n(n(t(Qt,e(o)),u),r(Wt(o),Kt(o)));return u}(o,a,s,i,t,u))}var c=n.match(t);if(c)return o(function(e){return n.replace(t,void 0!==e?e:"")},i(c[0],Kt(c)))}return rn(n,void 0,r,i)}}),Zn=X(z(qt(Vt,H))),te=X(function(t,n,e,r){return O(t)?on(t,0,e,r):w(t)?Zn(t,n,e,r):e.of(t)}),ne=X(function(t,n,e,r){return function t(n,i){return O(n)?on(n,0,e,t):void 0!==n?r(n,i):e.of(n)}(t,n)});function ee(){for(var t=[],n=0,e=arguments.length;n<e;++n){var r=dn(arguments[n]);t.push(re(Ee(r)),r)}return t}var re=function(t){return function(n,e,r,i){return function n(e,o){return t(e,o)?i(e,o):te(e,o,r,n)}(n,e)}},ie=re(function(t){return void 0!==t&&!O(t)&&!w(t)}),oe=h(function(t,n,e){return!ht(ct,function(n,e){if(!t(n,e))return!0},n,e)}),ue=oe(X),ae=h(function(t,n,e){return!!ht(ct,function(n,e){if(t(n,e))return!0},n,e)}),se=h(function(t,n,e){var r=[];return ht(ct,function(n,e){var i=t(n,e);void 0!==i&&r.push(i)},n,e),r}),ce=se(X),fe=dt(X,function(t){return ft(t.concat,t.empty())}),le=fe(X),pe=h(function(t,n,e){return ht(lt,function(n,e){return t(n,e)?1:0},n,e)}),he=pe(b),de=h(function(t,n,e){var r=new Map;return ht(ct,function(n,e){var i=t(n,e),o=r.get(i);r.set(i,void 0!==o?o+1:1)},n,e),r}),ye=de(X),me=h(function(t,n,e,r){return ht(ct,function(e,r){n=t(n,e,r)},e,r),n}),_e=h(function(t,n,e,r){var i=[],o=[];ht(ct,function(t,n){o.push(t),i.push(n)},e,r);for(var u=o.length-1;0<=u;--u)n=t(n,o[u],i[u]);return n}),ve=h(function(t,n,e){return ht(ct,function(n,e){t(n,e)},n,e)}),ge=h(function(t,n,e,r){var i=t();return ht(ct,function(t,e){n(i,t,e)},e,r),i}),Ee=h(function(t,n){return void 0!==ht(ct,X,t,n)}),Te=h(function(t,n){return!ht(ct,m(!0),t,n)}),be=dt(function(t){return void 0!==t?String(t):""},X(function(t){return ft(function(n,e){return void 0!==n?void 0!==e?n+t+e:n:e})})),Ae=be(X),Re=pt(function(t,n){return t>n}),Se=Re(X),Ne=h(function(t,n,e){var r=0,i=0;return ht(ct,function(n,e){var o=t(n,e);void 0!==o&&(i+=1,r+=o)},n,e),r/i}),Me=Ne(X),Ie=pt(function(t,n){return t<n}),Oe=Ie(X),xe=h(function(t,n,e){return!ht(ct,function(n,e){if(t(n,e))return!0},n,e)}),we=ae(X),Ce=bn(ft(U,1)),Fe=Ce(J(1)),Le=bn(ct),Pe=Le(X),Ue=bn(lt),Be=Ue(Z);function je(t,n){return 1<arguments.length?Ct(t,n):function(n){return Ct(t,n)}}var ke=h(Lt),De=ke(X),Ve=h(function(t,n){return Lt(t(n),gn(n))});function Ge(t){function n(n){return Xt(t,void 0,n)}return function(e,r,i,o){return i.map(n,o(void 0!==e?e:t,r))}}var He=X(function(t){var n=J(t);return function(e,r,i,o){return i.map(n,o(void 0!==e?e:t,r))}}),qe=function(t){return[ze(t),We(t)]},Xe=X(function(t){return lr(t,void 0)}),ze=function(t){return function(n,e,r,i){return i(void 0!==n?t(n,e):n,e)}},We=function(t){return function(n,e,r,i){return r.map(function(n){return void 0!==n?t(n,e):n},i(n,e))}};function Ke(t,n,e,r){var i=fn(t)?t.length:0;return e.map(function(n){return At(i,n,t)},r(void 0,i))}var Ye=X(function(t){return function(n,e,r,i){var o=void 0,u=E;return fn(n)&&zt(t,n,o=[],u=[]),r.map(function(t){var n=t?t.length:0,e=u.length,r=n+e;return r===e?u:at(at(Array(r),0,t,0,n),n,u,0,e)},i(o,e))}});function $e(t){var n=arguments.length>1?arguments[1]:{hint:0};return function(e,r,i,o){var u=fn(e)?e:"",a=n.hint=function(t,n,e){var r=t.hint,i=e.length;i<=r&&(r=i-1),r<0&&(r=0);for(var o=r-1;0<=o&&r<i;++r,--o){if(n(e[r],r,t))return r;if(n(e[o],o,t))return o}for(;r<i;++r)if(n(e[r],r,t))return r;for(;0<=o;--o)if(n(e[o],o,t))return o;return i}(n,t,u);return i.map(function(t){return At(a,t,u)},o(u[a],a))}}function Qe(t){var n=dn(t),e=Ee(n);return[arguments.length>1?$e(e,arguments[1]):$e(e),n]}var Je=0,Ze=X,tr=Mn(function(t){return fn(t)&&t.length?t.length-1:0}),nr=function(t){return er(0,t)},er=h(function(t,n){return function(e,r,i,o){var u=fn(e),a=u&&e.length,s=$(0,a,0,t),c=$(s,a,a,n);return i.map(function(t){var n=t?t.length:0,r=s+n;return at(at(at(Array(a-c+r),0,e,0,s),s,t,0,n),r,e,c,a)},o(u?at(Array(Math.max(0,c-s)),0,e,s,c):void 0,r))}}),rr=function(t){return er(0===t?1/0:t?-t:0,void 0)},ir=function(t){return w(t)?fr(mn(Zn,an,t)):t},or=X;function ur(){for(var t,n=arguments.length,e={},r=0;r<n;++r)e[t=arguments[r]]=t;return fr(e)}var ar=function(t){return ur.apply(null,function(t){if(t instanceof Object){if(w(t)){var n=[];return function(t,n,e){for(var r in t)n&&n.push(r),e&&e.push(t[r])}(t,n,0),n}return Object.keys(t)}}(t))};function sr(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];function r(t){if(!(t instanceof Object))return t;for(var e=0,r=n.length;e<r;++e)if(A(n[e],t))return t}return function(t,n,e,i){return e.map(r,i(t,n))}}var cr=function(t){return function(n,e,r,i){return i(null!=n?n:t,e)}},fr=X(function(t){return function(n,e,r,i){return r.map(function(e){return kt(t,e,n)},i(jt(t,n),e))}}),lr=h(function(t,n){function e(e){return Xt(n,t,e)}return function(r,i,o,u){return o.map(e,u(Xt(t,n,r),i))}});function pr(t,n){return 1<arguments.length?Mt(t,n,void 0):function(n){return Mt(t,n,void 0)}}var hr=h(Pt),dr=function(t){var n=pr(t),e=je(t),r=function(t){return ut(n,t)};return function(t,n,i,o){return i.map(r,o(ut(e,t),n))}},yr=function(t){return function(n,e,r,i){return r.map(function(n){return Ct(t,n)},i(Mt(t,n,void 0),e))}},mr=Pt(tt,tt),_r=function(t){return Pt(function(n){return L(t,n)},function(n){return!0===n?t:void 0})},vr=Pt(et(fn,X(function(t){for(var n=t.length,e=Array(n),r=0;r<n;++r)e[r]=[r,t[r]];return e})),et(O,X(function(t){for(var n=t.length,e=Array(n),r=0;r<n;++r){var i=t[r];2===i.length&&(e[i[0]]=i[1])}n=e.length;for(var o=0,u=0;u<n;++u){var a=e[u];void 0!==a&&(u!==o&&(e[o]=a),++o)}return e.length=o,e}))),gr=Pt(it,it),Er=X(function(t,n,e,r){return e.map(nt,r((t instanceof Object||M(t))&&1===t.length?t[0]:void 0,n))}),Tr=function(t){return function(n,e,r,i){var o=tn(t);return r.map(o,i(Zt(t,n),e))}},br=Ut(decodeURI,encodeURI),Ar=Ut(decodeURIComponent,encodeURIComponent),Rr=X(function(t){var n=t||T,e=n.reviver,r=n.replacer,i=n.space;return Pt(et(M,function(t){return JSON.parse(t,e)}),et(b,function(t){return JSON.stringify(t,r,i)}))}),Sr=function(t){return Ut(function(n){return n.startsWith(t)?n.slice(t.length):void 0},function(n){return t+n})},Nr=function(t){return Ut(function(n){return n.endsWith(t)?n.slice(0,n.length-t.length):void 0},function(n){return n+t})},Mr=h(function(t,n){return Ut(q(K(t,"g"),n),q(K(n,"g"),t))}),Ir=X(function(t){var n=arguments.length>1?arguments[1]:t;return Pt(et(M,function(t){return t.split(n)}),et(O,function(n){return n.join(t)}))}),Or=X(function(t){var n=K(arguments.length>1?arguments[1]:t,"");return Pt(et(M,function(t){var e=n.exec(t);return e?[t.slice(0,Kt(e)),t.slice(Yt(e))]:[t,""]}),function(n){if(O(n)&&2===n.length){var e=n[0],r=n[1];return r?e+t+r:e}})}),xr=function(t){return Bt(B(t),B(-t))},wr=function(t){return Bt(k(t),j(t))},Cr=function(t){return Bt(j(t),k(t))},Fr=Bt(D,D),Lr=function(t){return Bt(B(-t),B(t))},Pr=function(t){"#"===t[0]&&(t=Ct(Ar,t));for(var n=t.split("/"),e=n.length,r=1;r<e;++r){var i=n[r];n[r-1]=/^(0|[1-9]\d*)$/.test(i)?xn(rt,Number(i),i):"-"===i?xn(rt,Ke,i):i.replace("~1","/").replace("~0","~")}return n.length=e-1,n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(9);n.sBallStart_Sink=new r.StreamSink,n.sBallStop_Sink=new r.StreamSink},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(18),i=e(40),o=e(13);n.setCamera=function(t){var n=t.camera;return function(t){return u(r.set("camera")(n))(t)}},n.setBallTranslationY=function(t){return function(n){return r.set(["scenes",0,"nodes",0,"transform","trs","translation",1])(t)(n)}},n.updateTransforms=function(t){return u(function(t){return r.set("nodes")(i.gltf_updateNodeTransforms({updateLocal:!0,updateModel:!0,updateView:!0,camera:t.camera})(t.nodes))(t)})(t)};var u=function(t){return function(n){return r.set("scenes")(o.S.map(t)(n.scenes))(n)}}},function(t,n,e){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e(4),o=e(2),u=function(t){function n(n,e){var r=t.call(this,e)||this;return r.defaultFactoryFunction=n,r}return r(n,t),n.prototype.setDefault=function(n,e){var r=t.prototype.getValue.call(this,n);return o.isUndefined(r)?(this.setValue(n,e),e):r},n.prototype.getValue=function(t){return this.setDefault(t,this.defaultFactoryFunction())},n}(i.default);n.default=u},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),i=e(6),o=function(){function t(t){this.data=[],this.compare=t||r.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,n){return n>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[n])<=0?t:n},t.prototype.siftUp=function(t){for(var n=this.parentIndex(t);t>0&&this.compare(this.data[n],this.data[t])>0;)i.swap(this.data,n,t),t=n,n=this.parentIndex(t)},t.prototype.siftDown=function(t){for(var n=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));n>=0&&this.compare(this.data[t],this.data[n])>0;)i.swap(this.data,n,t),t=n,n=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},t.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.prototype.add=function(t){return!r.isUndefined(t)&&(this.data.push(t),this.siftUp(this.data.length-1),!0)},t.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},t.prototype.contains=function(t){var n=r.compareToEquals(this.compare);return i.contains(this.data,t,n)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){i.forEach(this.data,t)},t}();n.default=o},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(15),i=function(){function t(){this.list=new r.default}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},t.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,n){return this.list.contains(t,n)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();n.default=i},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),i=e(23),o=function(){function t(t){this.root=null,this.compare=t||r.defaultCompare,this.nElements=0}return t.prototype.add=function(t){return!r.isUndefined(t)&&null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0)},t.prototype.clear=function(){this.root=null,this.nElements=0},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.size=function(){return this.nElements},t.prototype.contains=function(t){return!r.isUndefined(t)&&null!==this.searchNode(this.root,t)},t.prototype.search=function(t){var n=this.searchNode(this.root,t);if(null!==n)return n.element},t.prototype.remove=function(t){var n=this.searchNode(this.root,t);return null!==n&&(this.removeNode(n),this.nElements--,!0)},t.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.prototype.minimum=function(){if(!this.isEmpty()&&null!==this.root)return this.minimumAux(this.root).element},t.prototype.maximum=function(){if(!this.isEmpty()&&null!==this.root)return this.maximumAux(this.root).element},t.prototype.forEach=function(t){this.inorderTraversal(t)},t.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(n){return t.push(n),!0}),t},t.prototype.height=function(){return this.heightAux(this.root)},t.prototype.searchNode=function(t,n){for(var e=1;null!==t&&0!==e;)(e=this.compare(n,t.element))<0?t=t.leftCh:e>0&&(t=t.rightCh);return t},t.prototype.transplant=function(t,n){null===t.parent?this.root=n:t===t.parent.leftCh?t.parent.leftCh=n:t.parent.rightCh=n,null!==n&&(n.parent=t.parent)},t.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var n=this.minimumAux(t.rightCh);n.parent!==t&&(this.transplant(n,n.rightCh),n.rightCh=t.rightCh,n.rightCh.parent=n),this.transplant(t,n),n.leftCh=t.leftCh,n.leftCh.parent=n}},t.prototype.inorderTraversalAux=function(t,n,e){null===t||e.stop||(this.inorderTraversalAux(t.leftCh,n,e),e.stop||(e.stop=!1===n(t.element),e.stop||this.inorderTraversalAux(t.rightCh,n,e)))},t.prototype.levelTraversalAux=function(t,n){var e=new i.default;for(null!==t&&e.enqueue(t),t=e.dequeue()||null;null!=t;){if(!1===n(t.element))return;null!==t.leftCh&&e.enqueue(t.leftCh),null!==t.rightCh&&e.enqueue(t.rightCh),t=e.dequeue()||null}},t.prototype.preorderTraversalAux=function(t,n,e){null===t||e.stop||(e.stop=!1===n(t.element),e.stop||(this.preorderTraversalAux(t.leftCh,n,e),e.stop||this.preorderTraversalAux(t.rightCh,n,e)))},t.prototype.postorderTraversalAux=function(t,n,e){null===t||e.stop||(this.postorderTraversalAux(t.leftCh,n,e),e.stop||(this.postorderTraversalAux(t.rightCh,n,e),e.stop||(e.stop=!1===n(t.element))))},t.prototype.minimumAux=function(t){for(;null!=t&&null!==t.leftCh;)t=t.leftCh;return t},t.prototype.maximumAux=function(t){for(;null!=t&&null!==t.rightCh;)t=t.rightCh;return t},t.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.prototype.insertNode=function(t){for(var n=null,e=this.root;null!==e;){var r=this.compare(t.element,e.element);if(0===r)return null;r<0?(n=e,e=e.leftCh):(n=e,e=e.rightCh)}return t.parent=n,null===n?this.root=t:this.compare(t.element,n.element)<0?n.leftCh=t:n.rightCh=t,t},t.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t}();n.default=o},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),i=e(6),o=e(4),u=function(){function t(t){this.dictionary=new o.default(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!r.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(t){var n=this;this.forEach(function(e){return t.contains(e)||n.remove(e),!0})},t.prototype.union=function(t){var n=this;t.forEach(function(t){return n.add(t),!0})},t.prototype.difference=function(t){var n=this;t.forEach(function(t){return n.remove(t),!0})},t.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var n=!0;return this.forEach(function(e){return!!t.contains(e)||(n=!1,!1)}),n},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(t){this.dictionary.forEach(function(n,e){return t(e)})},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return i.toString(this.toArray())},t}();n.default=u},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Quadratic=function(t){return function(n){return function(e){var r=Math.sqrt(n*n-4*t*e),i=2*t;return[(-n+r)/i,(-n-r)/i]}}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.TICK=0]="TICK",t[t.RENDER=1]="RENDER",t[t.READY=2]="READY",t[t.INIT=3]="INIT",t[t.WORLD_START=4]="WORLD_START",t[t.BALL_START=5]="BALL_START",t[t.BALL_STOP=6]="BALL_STOP"}(n.WorkerCommands||(n.WorkerCommands={}))},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(0)?(i=[],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(0)?(i=[],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(29)):null!=e(0)?(i=[e(29)],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function i(t){return function(n){return t}}function o(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,i=0;i<n.length;i+=1){var o=n[i];if(null==r||!t&&!u(o,r))return null;r=r[o]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var v=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function g(n,e,r){function i(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([v(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var o=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v9.0.0#"+n,e,function(t){return o.every(function(n){var e=r[n]===h?t.constructor:t;return null!=i(n)(e)})});return u.methods=o.reduce(function(t,n){return t[n]=i(n),t},{}),u}var E=g("Setoid",[],{equals:d}),T=g("Ord",[E],{lte:d}),b=g("Semigroupoid",[],{compose:d}),A=g("Category",[b],{id:h}),R=g("Semigroup",[],{concat:d}),S=g("Monoid",[R],{empty:h}),N=g("Group",[S],{invert:d}),M=g("Filterable",[],{filter:d}),I=g("Functor",[],{map:d}),O=g("Bifunctor",[I],{bimap:d}),x=g("Profunctor",[I],{promap:d}),w=g("Apply",[I],{ap:d}),C=g("Applicative",[w],{of:h}),F=g("Chain",[w],{chain:d}),L=g("ChainRec",[F],{chainRec:h}),P=g("Monad",[C,F],{}),U=g("Alt",[I],{alt:d}),B=g("Plus",[U],{zero:h}),j=g("Alternative",[C,B],{}),k=g("Foldable",[],{reduce:d}),D=g("Traversable",[I,k],{traverse:d}),V=g("Extend",[I],{extend:d}),G=g("Comonad",[V],{extract:d}),H=g("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!$(this[n],t[n]))return!1;return!0}function z(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!$(this[n],t[n]))return J(this[n],t[n])}}function W(t){return this.concat(t)}function K(t){var n={};function e(t){n[t]=this[t]}return o(this,e),o(t,e),n}var Y={Null:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{"fantasy-land/equals":function(t){return $(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return J(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},i={head:n,tail:r};i!==r;){for(var o=r,u=t(f,l,i.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):o={head:s.value,tail:o}}for(i=i.tail;o!==r;)i={head:o.head,tail:i},o=o.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{"fantasy-land/equals":X,"fantasy-land/lte":z,"fantasy-land/concat":W,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,i=t(this[e]);r<i.length;r+=1)n.push(i[r]);return n},"fantasy-land/alt":W,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function i(o,u){switch(u){case 0:return ut(t,[]);case 2:return ot(s,n(e[o]),n(e[o+1]));default:var a=2*Math.floor(u/4);return ot(r,i(o,a),i(o+a,u-a))}}return this.length%2==1?ot(r,et(q,n(this[0])),i(1,this.length-1)):i(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return z.call(this,t)}}},Error:{prototype:{"fantasy-land/equals":function(t){return $(this.name,t.name)&&$(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return $(e,Object.keys(t).sort())&&e.every(function(e){return $(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),i=e.shift();if(r<i)return!0;if(r>i)return!1;if(!$(this[r],t[r]))return J(this[r],t[r])}},"fantasy-land/concat":K,"fantasy-land/filter":function(t){var n={};return o(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return o(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return o(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":K,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return ot(function(t){return function(n){var e={};return e[r]=n,K.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(Z(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},$=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function Q(t,n){return c(t,n)&&!J(n,t)}var J=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return $(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function Z(t,n){return R.methods.concat(t)(n)}function tt(t){return S.methods.empty(t)()}function nt(t,n){return M.methods.filter(n)(t)}function et(t,n){return I.methods.map(n)(t)}function rt(t,n,e){return O.methods.bimap(e)(t,n)}function it(t,n){return w.methods.ap(n)(t)}function ot(t,n,e){return it(et(t,n),e)}function ut(t,n){return C.methods.of(t)(n)}function at(t,n){return F.methods.chain(n)(t)}function st(t,n,e){return k.methods.reduce(e)(t,n)}function ct(t,n){var e=st(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return J}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var i=0;i<e.length;i+=1)e[i]=e[i].x;return e}var o=n.constructor,u=tt(o);for(i=0;i<e.length;i+=1)u=Z(u,ut(o,e[i].x));return u}function ft(t,n,e){return D.methods.traverse(e)(t,n)}function lt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:R,Monoid:S,Group:N,Filterable:M,Functor:I,Bifunctor:O,Profunctor:x,Apply:w,Applicative:C,Chain:F,ChainRec:L,Monad:P,Alt:U,Plus:B,Alternative:j,Foldable:k,Traversable:D,Extend:V,Comonad:G,Contravariant:H,equals:$,lt:Q,lte:J,gt:function(t,n){return Q(n,t)},gte:function(t,n){return J(n,t)},min:function(t,n){return J(t,n)?t:n},max:function(t,n){return J(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:Z,empty:tt,invert:function(t){return N.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,flip:function(t,n){return I.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:rt,mapLeft:function(t,n){return rt(t,a,n)},promap:function(t,n,e){return x.methods.promap(e)(t,n)},ap:it,lift2:ot,lift3:function(t,n,e,r){return it(it(et(t,n),e),r)},apFirst:function(t,n){return ot(i,t,n)},apSecond:function(t,n){return ot(i(a),t,n)},of:ut,append:function(t,n){return Z(n,ut(n.constructor,t))},prepend:function(t,n){return Z(ut(n.constructor,t),n)},chain:at,join:function(t){return at(a,t)},chainRec:function(t,n,e){return L.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:st,size:function(t){return Array.isArray(t)?t.length:st(function(t,n){return t+1},0,t)},elem:function(t,n){return st(function(n,e){return n||$(t,e)},!1,n)},foldMap:function(t,n,e){return st(function(t,e){return Z(t,n(e))},tt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return st(function(t,e){return Z(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(a,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:ft,sequence:function(t,n){return ft(t,a,n)},extend:lt,duplicate:function(t){return lt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(3),e(30)):null!=e(0)?(i=[e(3),e(30)],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryPair=u(self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(n,r){"use strict";if("undefined"!=typeof __doctest){var i=__doctest.require("sanctuary-def"),o=__doctest.require("sanctuary-type-identifiers");!function(){var t=__doctest.require("sanctuary"),n=i.BinaryType("sanctuary-pair/Pair")("")(function(t){return o(t)===s["@@type"]})(function(t){return[t.fst]})(function(t){return[t.snd]}),e=r.concat(t.env,[i.TypeClass,n(i.Unknown)(i.Unknown)]);t.create({checkTypes:!0,env:e})}()}var u={constructor:s,"@@show":c,"fantasy-land/compose":function(t){return s(this.fst)(t.snd)},"fantasy-land/map":function(t){return s(this.fst)(t(this.snd))},"fantasy-land/bimap":function(t,n){return s(t(this.fst))(n(this.snd))},"fantasy-land/reduce":function(t,n){return t(n,this.snd)},"fantasy-land/traverse":function(t,n){return r.map(s(this.fst),n(this.snd))},"fantasy-land/extend":function(t){return s(this.fst)(t(this))},"fantasy-land/extract":function(){return this.snd}},a="object"==typeof t&&"object"==typeof t.exports?e(11):{};function s(t){return function(n){var e=Object.create(u);return r.Setoid.test(t)&&r.Setoid.test(n)&&(e["fantasy-land/equals"]=f,r.Ord.test(t)&&r.Ord.test(n)&&(e["fantasy-land/lte"]=l)),r.Semigroup.test(t)&&(r.Semigroup.test(n)&&(e["fantasy-land/concat"]=p),e["fantasy-land/ap"]=h,e["fantasy-land/chain"]=d),e.fst=t,e.snd=n,e}}function c(){return"Pair ("+n(this.fst)+") ("+n(this.snd)+")"}function f(t){return r.equals(this.fst,t.fst)&&r.equals(this.snd,t.snd)}function l(t){return r.equals(this.fst,t.fst)?r.lte(this.snd,t.snd):r.lte(this.fst,t.fst)}function p(t){return s(r.concat(this.fst,t.fst))(r.concat(this.snd,t.snd))}function h(t){return s(r.concat(t.fst,this.fst))(t.snd(this.snd))}function d(t){var n=t(this.snd);return s(r.concat(this.fst,n.fst))(n.snd)}return u[null!=a.inspect&&"symbol"==typeof a.inspect.custom?a.inspect.custom:"inspect"]=c,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(u[Symbol.iterator]=function(){return[this.fst,this.snd][Symbol.iterator]()}),s.fst=function(t){return t.fst},s.snd=function(t){return t.snd},s.swap=function(t){return s(t.snd)(t.fst)},s["@@type"]="sanctuary-pair/Pair@1",s})},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(0)?(i=[],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(32)):null!=e(0)?(i=[e(32)],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function i(t){return function(n){return t}}function o(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,i=0;i<n.length;i+=1){var o=n[i];if(null==r||!t&&!u(o,r))return null;r=r[o]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var v=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function g(n,e,r){function i(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([v(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var o=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v9.0.0#"+n,e,function(t){return o.every(function(n){var e=r[n]===h?t.constructor:t;return null!=i(n)(e)})});return u.methods=o.reduce(function(t,n){return t[n]=i(n),t},{}),u}var E=g("Setoid",[],{equals:d}),T=g("Ord",[E],{lte:d}),b=g("Semigroupoid",[],{compose:d}),A=g("Category",[b],{id:h}),R=g("Semigroup",[],{concat:d}),S=g("Monoid",[R],{empty:h}),N=g("Group",[S],{invert:d}),M=g("Filterable",[],{filter:d}),I=g("Functor",[],{map:d}),O=g("Bifunctor",[I],{bimap:d}),x=g("Profunctor",[I],{promap:d}),w=g("Apply",[I],{ap:d}),C=g("Applicative",[w],{of:h}),F=g("Chain",[w],{chain:d}),L=g("ChainRec",[F],{chainRec:h}),P=g("Monad",[C,F],{}),U=g("Alt",[I],{alt:d}),B=g("Plus",[U],{zero:h}),j=g("Alternative",[C,B],{}),k=g("Foldable",[],{reduce:d}),D=g("Traversable",[I,k],{traverse:d}),V=g("Extend",[I],{extend:d}),G=g("Comonad",[V],{extract:d}),H=g("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!$(this[n],t[n]))return!1;return!0}function z(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!$(this[n],t[n]))return J(this[n],t[n])}}function W(t){return this.concat(t)}function K(t){var n={};function e(t){n[t]=this[t]}return o(this,e),o(t,e),n}var Y={Null:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{"fantasy-land/equals":function(t){return $(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return J(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},i={head:n,tail:r};i!==r;){for(var o=r,u=t(f,l,i.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):o={head:s.value,tail:o}}for(i=i.tail;o!==r;)i={head:o.head,tail:i},o=o.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{"fantasy-land/equals":X,"fantasy-land/lte":z,"fantasy-land/concat":W,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,i=t(this[e]);r<i.length;r+=1)n.push(i[r]);return n},"fantasy-land/alt":W,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function i(o,u){switch(u){case 0:return ut(t,[]);case 2:return ot(s,n(e[o]),n(e[o+1]));default:var a=2*Math.floor(u/4);return ot(r,i(o,a),i(o+a,u-a))}}return this.length%2==1?ot(r,et(q,n(this[0])),i(1,this.length-1)):i(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return z.call(this,t)}}},Error:{prototype:{"fantasy-land/equals":function(t){return $(this.name,t.name)&&$(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return $(e,Object.keys(t).sort())&&e.every(function(e){return $(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),i=e.shift();if(r<i)return!0;if(r>i)return!1;if(!$(this[r],t[r]))return J(this[r],t[r])}},"fantasy-land/concat":K,"fantasy-land/filter":function(t){var n={};return o(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return o(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return o(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":K,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return ot(function(t){return function(n){var e={};return e[r]=n,K.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(Z(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},$=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function Q(t,n){return c(t,n)&&!J(n,t)}var J=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return $(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function Z(t,n){return R.methods.concat(t)(n)}function tt(t){return S.methods.empty(t)()}function nt(t,n){return M.methods.filter(n)(t)}function et(t,n){return I.methods.map(n)(t)}function rt(t,n,e){return O.methods.bimap(e)(t,n)}function it(t,n){return w.methods.ap(n)(t)}function ot(t,n,e){return it(et(t,n),e)}function ut(t,n){return C.methods.of(t)(n)}function at(t,n){return F.methods.chain(n)(t)}function st(t,n,e){return k.methods.reduce(e)(t,n)}function ct(t,n){var e=st(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return J}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var i=0;i<e.length;i+=1)e[i]=e[i].x;return e}var o=n.constructor,u=tt(o);for(i=0;i<e.length;i+=1)u=Z(u,ut(o,e[i].x));return u}function ft(t,n,e){return D.methods.traverse(e)(t,n)}function lt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:R,Monoid:S,Group:N,Filterable:M,Functor:I,Bifunctor:O,Profunctor:x,Apply:w,Applicative:C,Chain:F,ChainRec:L,Monad:P,Alt:U,Plus:B,Alternative:j,Foldable:k,Traversable:D,Extend:V,Comonad:G,Contravariant:H,equals:$,lt:Q,lte:J,gt:function(t,n){return Q(n,t)},gte:function(t,n){return J(n,t)},min:function(t,n){return J(t,n)?t:n},max:function(t,n){return J(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:Z,empty:tt,invert:function(t){return N.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,flip:function(t,n){return I.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:rt,mapLeft:function(t,n){return rt(t,a,n)},promap:function(t,n,e){return x.methods.promap(e)(t,n)},ap:it,lift2:ot,lift3:function(t,n,e,r){return it(it(et(t,n),e),r)},apFirst:function(t,n){return ot(i,t,n)},apSecond:function(t,n){return ot(i(a),t,n)},of:ut,append:function(t,n){return Z(n,ut(n.constructor,t))},prepend:function(t,n){return Z(ut(n.constructor,t),n)},chain:at,join:function(t){return at(a,t)},chainRec:function(t,n,e){return L.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:st,size:function(t){return Array.isArray(t)?t.length:st(function(t,n){return t+1},0,t)},elem:function(t,n){return st(function(n,e){return n||$(t,e)},!1,n)},foldMap:function(t,n,e){return st(function(t,e){return Z(t,n(e))},tt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return st(function(t,e){return Z(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(a,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:ft,sequence:function(t,n){return ft(t,a,n)},extend:lt,duplicate:function(t){return lt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(3),e(33)):null!=e(0)?(i=[e(3),e(33)],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryMaybe=u(self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(n,r){"use strict";if("undefined"!=typeof __doctest){var i=__doctest.require("sanctuary-def"),o=__doctest.require("sanctuary-type-identifiers");!function(){var t=__doctest.require("sanctuary"),n=i.UnaryType("sanctuary-maybe/Maybe")("")(function(t){return o(t)===u["@@type"]})(function(t){return t.isJust?[t.value]:[]}),e=r.concat(t.env,[i.TypeClass,n(i.Unknown)]);t.create({checkTypes:!0,env:e})}()}var u={},a={constructor:u,isNothing:!0,isJust:!1,"@@show":y,"fantasy-land/equals":function(t){return t.isNothing},"fantasy-land/lte":function(t){return!0},"fantasy-land/concat":function(t){return t},"fantasy-land/filter":function(t){return this},"fantasy-land/map":function(t){return this},"fantasy-land/ap":function(t){return this},"fantasy-land/chain":function(t){return this},"fantasy-land/alt":function(t){return t},"fantasy-land/reduce":function(t,n){return n},"fantasy-land/traverse":function(t,n){return r.of(t,this)},"fantasy-land/extend":function(t){return this}},s={constructor:u,isNothing:!1,isJust:!0,"@@show":m,"fantasy-land/filter":function(t){return t(this.value)?this:l},"fantasy-land/map":function(t){return p(t(this.value))},"fantasy-land/ap":function(t){return t.isJust?p(t.value(this.value)):t},"fantasy-land/chain":function(t){return t(this.value)},"fantasy-land/alt":function(t){return this},"fantasy-land/reduce":function(t,n){return t(n,this.value)},"fantasy-land/traverse":function(t,n){return r.map(p,n(this.value))},"fantasy-land/extend":function(t){return p(t(this))}},c="object"==typeof t&&"object"==typeof t.exports?e(11):{},f=null!=c.inspect&&"symbol"==typeof c.inspect.custom?c.inspect.custom:"inspect";a[f]=y,s[f]=m;var l=u.Nothing=Object.create(a),p=u.Just=function(t){var n=Object.create(s);return r.Setoid.test(t)&&(n["fantasy-land/equals"]=_,r.Ord.test(t)&&(n["fantasy-land/lte"]=v)),r.Semigroup.test(t)&&(n["fantasy-land/concat"]=g),n.value=t,n};function h(t){return{tag:h,value:t}}function d(t){return{tag:d,value:t}}function y(){return"Nothing"}function m(){return"Just ("+n(this.value)+")"}function _(t){return t.isJust&&r.equals(this.value,t.value)}function v(t){return t.isJust&&r.lte(this.value,t.value)}function g(t){return t.isJust?p(r.concat(this.value,t.value)):this}return u["@@type"]="sanctuary-maybe/Maybe@1",u["fantasy-land/empty"]=function(){return l},u["fantasy-land/of"]=p,u["fantasy-land/chainRec"]=function(t,n){for(var e=h(n);e.tag===h;){var r=t(h,d,e.value);if(r.isNothing)return r;e=r.value}return p(e.value)},u["fantasy-land/zero"]=function(){return l},u})},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(0)?(i=[],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u():null!=e(0)?(i=[],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeIdentifiers=u()}(function(){"use strict";var t="@@type";return function(n){return null!=n&&null!=n.constructor&&n.constructor.prototype!==n&&"string"==typeof n.constructor[t]?n.constructor[t]:Object.prototype.toString.call(n).slice("[object ".length,-"]".length)}})},function(t,n,e){var r,i,o;!function(u){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=u(e(37)):null!=e(0)?(i=[e(37)],void 0===(o="function"==typeof(r=u)?r.apply(n,i):r)||(t.exports=o)):self.sanctuaryTypeClasses=u(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";if("undefined"!=typeof __doctest){__doctest.require("./test/Identity");var n=__doctest.require("./test/List"),e=__doctest.require("./test/Maybe");__doctest.require("./test/Sum"),__doctest.require("./test/Tuple"),n.Nil,n.Cons,e.Nothing,e.Just}function r(t){return function(n){return t.concat(n)}}function i(t){return function(n){return t}}function o(t,n){Object.keys(t).forEach(n,t)}function u(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function a(t){return t}function s(t){return function(n){return[t,n]}}function c(n,e){return typeof n==typeof e&&t(n)===t(e)}function f(t){return{value:t,done:!1}}function l(t){return{value:t,done:!0}}function p(t,n,e,r){if(!(this instanceof p))return new p(t,n,e,r);this.name=t,this.url=n,this.test=function(t){return e.every(function(n){return n.test(t)})&&r(t)}}p["@@type"]="sanctuary-type-classes/TypeClass";var h="Constructor",d="Value";function y(t,n,e){for(var r=e,i=0;i<n.length;i+=1){var o=n[i];if(null==r||!t&&!u(o,r))return null;r=r[o]}return"function"==typeof r?r:null}function m(t,n){return y(!0,t,n)}function _(t){return y(!1,t,Y)}var v=u("name",function(){})?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]};function g(n,e,r){function i(n){var e="fantasy-land/"+n;return r[n]===h?function(t){var n=m([e],t);return null==n&&"function"==typeof t?_([v(t),e]):n}:function(n){var r=null;return null!=n&&null!=n.constructor&&n.constructor.prototype===n||(r=m([e],n)),null==r&&(r=_([t(n),"prototype",e])),r&&r.bind(n)}}var o=Object.keys(r),u=p("sanctuary-type-classes/"+n,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v9.0.0#"+n,e,function(t){return o.every(function(n){var e=r[n]===h?t.constructor:t;return null!=i(n)(e)})});return u.methods=o.reduce(function(t,n){return t[n]=i(n),t},{}),u}var E=g("Setoid",[],{equals:d}),T=g("Ord",[E],{lte:d}),b=g("Semigroupoid",[],{compose:d}),A=g("Category",[b],{id:h}),R=g("Semigroup",[],{concat:d}),S=g("Monoid",[R],{empty:h}),N=g("Group",[S],{invert:d}),M=g("Filterable",[],{filter:d}),I=g("Functor",[],{map:d}),O=g("Bifunctor",[I],{bimap:d}),x=g("Profunctor",[I],{promap:d}),w=g("Apply",[I],{ap:d}),C=g("Applicative",[w],{of:h}),F=g("Chain",[w],{chain:d}),L=g("ChainRec",[F],{chainRec:h}),P=g("Monad",[C,F],{}),U=g("Alt",[I],{alt:d}),B=g("Plus",[U],{zero:h}),j=g("Alternative",[C,B],{}),k=g("Foldable",[],{reduce:d}),D=g("Traversable",[I,k],{traverse:d}),V=g("Extend",[I],{extend:d}),G=g("Comonad",[V],{extract:d}),H=g("Contravariant",[],{contramap:d});function q(t){return[t]}function X(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!$(this[n],t[n]))return!1;return!0}function z(t){for(var n=0;;n+=1){if(n===this.length)return!0;if(n===t.length)return!1;if(!$(this[n],t[n]))return J(this[n],t[n])}}function W(t){return this.concat(t)}function K(t){var n={};function e(t){n[t]=this[t]}return o(this,e),o(t,e),n}var Y={Null:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Undefined:{prototype:{"fantasy-land/equals":function(t){return!0},"fantasy-land/lte":function(t){return!0}}},Boolean:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):!1===this||!0===t}}},Number:{prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}}},Date:{prototype:{"fantasy-land/equals":function(t){return $(this.valueOf(),t.valueOf())},"fantasy-land/lte":function(t){return J(this.valueOf(),t.valueOf())}}},RegExp:{prototype:{"fantasy-land/equals":function(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}}},String:{"fantasy-land/empty":function(){return""},prototype:{"fantasy-land/equals":function(t){return"object"==typeof this?$(this.valueOf(),t.valueOf()):this===t},"fantasy-land/lte":function(t){return"object"==typeof this?J(this.valueOf(),t.valueOf()):this<=t},"fantasy-land/concat":function(t){return this+t}}},Array:{"fantasy-land/empty":function(){return[]},"fantasy-land/of":q,"fantasy-land/chainRec":function(t,n){for(var e=[],r={},i={head:n,tail:r};i!==r;){for(var o=r,u=t(f,l,i.head),a=0;a<u.length;a+=1){var s=u[a];s.done?e.push(s.value):o={head:s.value,tail:o}}for(i=i.tail;o!==r;)i={head:o.head,tail:i},o=o.tail}return e},"fantasy-land/zero":function(){return[]},prototype:{"fantasy-land/equals":X,"fantasy-land/lte":z,"fantasy-land/concat":W,"fantasy-land/filter":function(t){return this.filter(function(n){return t(n)})},"fantasy-land/map":function(t){return this.map(function(n){return t(n)})},"fantasy-land/ap":function(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n},"fantasy-land/chain":function(t){for(var n=[],e=0;e<this.length;e+=1)for(var r=0,i=t(this[e]);r<i.length;r+=1)n.push(i[r]);return n},"fantasy-land/alt":W,"fantasy-land/reduce":function(t,n){for(var e=n,r=0;r<this.length;r+=1)e=t(e,this[r]);return e},"fantasy-land/traverse":function(t,n){var e=this;function i(o,u){switch(u){case 0:return ut(t,[]);case 2:return ot(s,n(e[o]),n(e[o+1]));default:var a=2*Math.floor(u/4);return ot(r,i(o,a),i(o+a,u-a))}}return this.length%2==1?ot(r,et(q,n(this[0])),i(1,this.length-1)):i(0,this.length)},"fantasy-land/extend":function(t){return this.map(function(n,e,r){return t(r.slice(e))})}}},Arguments:{prototype:{"fantasy-land/equals":function(t){return X.call(this,t)},"fantasy-land/lte":function(t){return z.call(this,t)}}},Error:{prototype:{"fantasy-land/equals":function(t){return $(this.name,t.name)&&$(this.message,t.message)}}},Object:{"fantasy-land/empty":function(){return{}},"fantasy-land/zero":function(){return{}},prototype:{"fantasy-land/equals":function(t){var n=this,e=Object.keys(this).sort();return $(e,Object.keys(t).sort())&&e.every(function(e){return $(n[e],t[e])})},"fantasy-land/lte":function(t){for(var n=Object.keys(this).sort(),e=Object.keys(t).sort();;){if(0===n.length)return!0;if(0===e.length)return!1;var r=n.shift(),i=e.shift();if(r<i)return!0;if(r>i)return!1;if(!$(this[r],t[r]))return J(this[r],t[r])}},"fantasy-land/concat":K,"fantasy-land/filter":function(t){var n={};return o(this,function(e){t(this[e])&&(n[e]=this[e])}),n},"fantasy-land/map":function(t){var n={};return o(this,function(e){n[e]=t(this[e])}),n},"fantasy-land/ap":function(t){var n={};return o(this,function(e){u(e,t)&&(n[e]=t[e](this[e]))}),n},"fantasy-land/alt":K,"fantasy-land/reduce":function(t,n){var e=this;return Object.keys(this).sort().reduce(function(n,r){return t(n,e[r])},n)},"fantasy-land/traverse":function(t,n){var e=this;return Object.keys(this).reduce(function(t,r){return ot(function(t){return function(n){var e={};return e[r]=n,K.call(t,e)}},t,n(e[r]))},ut(t,{}))}}},Function:{"fantasy-land/id":function(){return a},"fantasy-land/of":function(t){return function(n){return t}},"fantasy-land/chainRec":function(t,n){return function(e){for(var r=f(n);!r.done;)r=t(f,l,r.value)(e);return r.value}},prototype:{"fantasy-land/equals":function(t){return t===this},"fantasy-land/compose":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/map":function(t){var n=this;return function(e){return t(n(e))}},"fantasy-land/promap":function(t,n){var e=this;return function(r){return n(e(t(r)))}},"fantasy-land/ap":function(t){var n=this;return function(e){return t(e)(n(e))}},"fantasy-land/chain":function(t){var n=this;return function(e){return t(n(e))(e)}},"fantasy-land/extend":function(t){var n=this;return function(e){return t(function(t){return n(Z(e,t))})}},"fantasy-land/contramap":function(t){var n=this;return function(e){return n(t(e))}}}}},$=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return!0;t.push([n,e]);try{return E.test(n)&&E.test(e)&&E.methods.equals(n)(e)}finally{t.pop()}}}();function Q(t,n){return c(t,n)&&!J(n,t)}var J=function(){var t=[];return function(n,e){if(!c(n,e))return!1;if(t.some(function(t){return t[0]===n&&t[1]===e}))return $(n,e);t.push([n,e]);try{return T.test(n)&&T.test(e)&&T.methods.lte(n)(e)}finally{t.pop()}}}();function Z(t,n){return R.methods.concat(t)(n)}function tt(t){return S.methods.empty(t)()}function nt(t,n){return M.methods.filter(n)(t)}function et(t,n){return I.methods.map(n)(t)}function rt(t,n,e){return O.methods.bimap(e)(t,n)}function it(t,n){return w.methods.ap(n)(t)}function ot(t,n,e){return it(et(t,n),e)}function ut(t,n){return C.methods.of(t)(n)}function at(t,n){return F.methods.chain(n)(t)}function st(t,n,e){return k.methods.reduce(e)(t,n)}function ct(t,n){var e=st(function(n,e){return n.push({idx:n.length,x:e,fx:t(e)}),n},[],n),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,n){return t<=n||t!=t};case"string":return function(t,n){return t<=n};default:return J}}(e[0]);if(e.sort(function(t,n){return r(t.fx,n.fx)?r(n.fx,t.fx)?t.idx-n.idx:-1:1}),Array.isArray(n)){for(var i=0;i<e.length;i+=1)e[i]=e[i].x;return e}var o=n.constructor,u=tt(o);for(i=0;i<e.length;i+=1)u=Z(u,ut(o,e[i].x));return u}function ft(t,n,e){return D.methods.traverse(e)(t,n)}function lt(t,n){return V.methods.extend(n)(t)}return{TypeClass:p,Setoid:E,Ord:T,Semigroupoid:b,Category:A,Semigroup:R,Monoid:S,Group:N,Filterable:M,Functor:I,Bifunctor:O,Profunctor:x,Apply:w,Applicative:C,Chain:F,ChainRec:L,Monad:P,Alt:U,Plus:B,Alternative:j,Foldable:k,Traversable:D,Extend:V,Comonad:G,Contravariant:H,equals:$,lt:Q,lte:J,gt:function(t,n){return Q(n,t)},gte:function(t,n){return J(n,t)},min:function(t,n){return J(t,n)?t:n},max:function(t,n){return J(t,n)?n:t},compose:function(t,n){return b.methods.compose(n)(t)},id:function(t){return A.methods.id(t)()},concat:Z,empty:tt,invert:function(t){return N.methods.invert(t)()},filter:nt,reject:function(t,n){return nt(function(n){return!t(n)},n)},map:et,flip:function(t,n){return I.methods.map(t)(function(t){return function(n){return n(t)}}(n))},bimap:rt,mapLeft:function(t,n){return rt(t,a,n)},promap:function(t,n,e){return x.methods.promap(e)(t,n)},ap:it,lift2:ot,lift3:function(t,n,e,r){return it(it(et(t,n),e),r)},apFirst:function(t,n){return ot(i,t,n)},apSecond:function(t,n){return ot(i(a),t,n)},of:ut,append:function(t,n){return Z(n,ut(n.constructor,t))},prepend:function(t,n){return Z(ut(n.constructor,t),n)},chain:at,join:function(t){return at(a,t)},chainRec:function(t,n,e){return L.methods.chainRec(t)(n,e)},alt:function(t,n){return U.methods.alt(t)(n)},zero:function(t){return B.methods.zero(t)()},reduce:st,size:function(t){return Array.isArray(t)?t.length:st(function(t,n){return t+1},0,t)},elem:function(t,n){return st(function(n,e){return n||$(t,e)},!1,n)},foldMap:function(t,n,e){return st(function(t,e){return Z(t,n(e))},tt(t),e)},reverse:function(t){if(Array.isArray(t))return t.slice().reverse();var n=t.constructor;return st(function(t,e){return Z(ut(n,e),t)},tt(n),t)},sort:function(t){return ct(a,t)},sortBy:ct,takeWhile:function(t,n){var e=!0;return nt(function(n){return e=e&&t(n)},n)},dropWhile:function(t,n){var e=!1;return nt(function(n){return e=e||!t(n)},n)},traverse:ft,sequence:function(t,n){return ft(t,a,n)},extend:lt,duplicate:function(t){return lt(a,t)},extract:function(t){return G.methods.extract(t)()},contramap:function(t,n){return H.methods.contramap(n)(t)}}})},function(t,n,e){(function(r){var i,o,u;!function(r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r(e(12),e(3),e(10),e(5)):null!=e(0)?(o=[e(12),e(3),e(10),e(5)],void 0===(u="function"==typeof(i=r)?i.apply(n,o):i)||(t.exports=u)):self.sanctuaryDef=r(self.sanctuaryEither,self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(n,i,o,u){"use strict";var a=Math.pow(2,53)-1,s=-a,c=Array.prototype.slice,f=Object.prototype.hasOwnProperty,l=Object.prototype.toString,p=function(){if("object"==typeof t&&"object"==typeof t.exports){var n=e(11);if("symbol"==typeof n.inspect.custom)return n.inspect.custom}return"inspect"}(),h=n.Left,d=n.Right;function y(t){return function(n){return t}}function m(t){return function(n,e){return t}}function _(t,n){return function(e){return t(n(e))}}function v(t){return t}function g(t){return t.slice(0,-1)}function E(t){return 0===t.length}function T(t){return function(n){if(t.length>n.length)return!1;for(var e=0;e<t.length;e+=1)if(t[e]!==n[e])return!1;return!0}}function b(t,n){return n.join(t)}function A(t){return t[t.length-1]}function R(t){return function(n){return t.some(function(t){return o.equals(t,n)})}}function S(t,n){return E(t)?n:t}function N(t,n){return b(t,Array(n+1))}function M(t){return function(n){return N(t,n.length)}}var I=M(" ");function O(t){return Object.keys(t).sort()}function x(t){return t.slice("(".length,-")".length)}function w(t,n,e,r){return E(r)?t:o.reduce(function(t,n){return t+"  - "+e(n)+"\n"},n,r)}function C(t){return t.replace(/[ ]+$/gm,"")}function F(t,n,e){return t?e:n(e)}function L(t,n,e){return t?n(e):e}function P(t){return function(n){return function(e){return t+e+n}}}var U=P("(")(")"),B=P("")("");function j(t){return t.slice(t.indexOf("/")+1)}function k(t,n,e,r,i,o,u){this._test=i,this.format=r,this.keys=o,this.name=n,this.type=t,this.types=u,this.url=e}k["@@type"]="sanctuary-def/Type",k.prototype["fantasy-land/equals"]=function(t){return o.equals(this.type,t.type)&&o.equals(this.name,t.name)&&o.equals(this.url,t.url)&&o.equals(this.keys,t.keys)&&this.keys.every(function(n){return o.equals(this.types[n].type,t.types[n].type)},this)},k.prototype.validate=function(t){if(!this._test(t))return h({value:t,propPath:[]});for(var n=0;n<this.keys.length;n+=1)for(var e=this.keys[n],r=this.types[e],i=0,u=r.extractor(t);i<u.length;i+=1){var a=r.type.validate(u[i]);if(a.isLeft){var s=a.value.value,c=o.concat([e],a.value.propPath);return h({value:s,propPath:c})}}return d(t)},k.prototype["@@show"]=function(){return this.format(v,y(v))};var D="BINARY",V="FUNCTION",G="INCONSISTENT",H="NO_ARGUMENTS",q="NULLARY",X="RECORD",z="UNARY",W="UNKNOWN",K="VARIABLE",Y=new k(G,"","",m("???"),y(!1),[],{}),$=new k(H,"","",m("()"),y(!0),[],{});function Q(t){return function(n){return u(n)===t}}function J(t){return function(n){return typeof n===t}}function Z(t){return"https://github.com/sanctuary-js/sanctuary-def/tree/v0.18.1#"+j(t)}function tt(t,n){return rn(t)(Z(t))(n)}function nt(t,n,e){return un(t)(Z(t))(n)(e)}var et=tt("sanctuary-def/Any",y(!0)),rt=tt("Function",J("function")),it=tt("Arguments",Q("Arguments")),ot=nt("Array",Q("Array"),v),ut=tt("sanctuary-def/Array0",function(t){return Q("Array")(t)&&0===t.length}),at=nt("sanctuary-def/Array1",function(t){return Q("Array")(t)&&1===t.length},v),st=function(t,n,e,r){return cn(t)(Z(t))(function(t){return Q("Array")(t)&&2===t.length})(function(t){return[t[0]]})(function(t){return[t[1]]})}("sanctuary-def/Array2"),ct=tt("Boolean",J("boolean")),ft=tt("Date",Q("Date")),lt=tt("Error",Q("Error")),pt=tt("sanctuary-def/FiniteNumber",function(t){return qt._test(t)&&isFinite(t)});function ht(t){return 1===t.length?o.concat([$],t):t}function dt(t){var n=ht(t),e=rt._test,r=[],o={};return n.forEach(function(t,n){var e="$"+i(n+1);r.push(e),o[e]={extractor:y([]),type:t}}),new k(V,"","",function(t,e){var r=n.map(function(t,n){return F(t.type===X||E(t.keys),x,e("$"+i(n+1))(i(t)))}),o=P(t("("))(t(")"));return o(F(2===n.length,o,b(t(", "),g(r)))+t(" -> ")+A(r))},e,r,o)}var yt=tt("sanctuary-def/GlobalRegExp",function(t){return Lt._test(t)&&t.global}),mt=tt("sanctuary-def/HtmlElement",function(t){return/^\[object HTML.+Element\]$/.test(l.call(t))}),_t=tt("sanctuary-def/Integer",function(t){return qt._test(t)&&Math.floor(t)===t&&t>=s&&t<=a}),vt=tt("sanctuary-def/NegativeFiniteNumber",function(t){return pt._test(t)&&t<0}),gt=tt("sanctuary-def/NegativeInteger",function(t){return _t._test(t)&&t<0}),Et=tt("sanctuary-def/NegativeNumber",function(t){return Ot._test(t)&&t<0}),Tt=nt("sanctuary-def/NonEmpty",function(t){return o.Monoid.test(t)&&o.Setoid.test(t)&&!o.equals(t,o.empty(t.constructor))},function(t){return[t]}),bt=tt("sanctuary-def/NonGlobalRegExp",function(t){return Lt._test(t)&&!t.global}),At=tt("sanctuary-def/NonNegativeInteger",function(t){return _t._test(t)&&t>=0}),Rt=tt("sanctuary-def/NonZeroFiniteNumber",function(t){return pt._test(t)&&0!==t}),St=tt("sanctuary-def/NonZeroInteger",function(t){return _t._test(t)&&0!==t}),Nt=tt("sanctuary-def/NonZeroValidNumber",function(t){return qt._test(t)&&0!==t}),Mt=tt("Null",Q("Null")),It=nt("sanctuary-def/Nullable",y(!0),function(t){return null===t?[]:[t]}),Ot=tt("Number",J("number")),xt=tt("Object",Q("Object")),wt=tt("sanctuary-def/PositiveFiniteNumber",function(t){return pt._test(t)&&t>0}),Ct=tt("sanctuary-def/PositiveInteger",function(t){return _t._test(t)&&t>0}),Ft=tt("sanctuary-def/PositiveNumber",function(t){return Ot._test(t)&&t>0}),Lt=tt("RegExp",Q("RegExp")),Pt=function(t,n){return pn(t)(Z(t))(["","g","i","m","gi","gm","im","gim"])}("sanctuary-def/RegexFlags"),Ut=nt("sanctuary-def/StrMap",xt._test,function(t){return o.reduce(function(t,n){return t.push(n),t},[],t)}),Bt=tt("String",J("string")),jt=tt("Symbol",J("symbol")),kt=tt("Type",Q("sanctuary-def/Type")),Dt=tt("TypeClass",Q("sanctuary-type-classes/TypeClass")),Vt=tt("Undefined",Q("Undefined")),Gt=new k(W,"","",m("Unknown"),y(!0),[],{}),Ht=tt("sanctuary-def/ValidDate",function(t){return ft._test(t)&&!isNaN(t.valueOf())}),qt=tt("sanctuary-def/ValidNumber",function(t){return Ot._test(t)&&!isNaN(t)}),Xt=[rt,it,ot(Gt),ct,ft,lt,mt,Mt,Ot,xt,Lt,Ut(Gt),Bt,jt,Vt];function zt(t){return rn(t)("")(y(!0))}var Wt=jn({checkTypes:!(void 0!==r&&null!=r&&null!=Object({NODE_ENV:"production",BROADCAST:void 0,BUILD_VERSION:"0.0.1-alpha"})),env:Xt}),Kt=["zero","one","two","three","four","five","six","seven","eight","nine"];function Yt(t){return(t<Kt.length?Kt[t]:i(t))+" "+(1===t?"argument":"arguments")}function $t(t,n,e,r){return r.type.type===W?Qt(t,n,r.extractor(e)):[r.type]}function Qt(t,n,e){return E(e)?[Gt]:S(o.reduce(function(e,r){var i;if("object"==typeof r&&null!=r||"function"==typeof r){if(n.indexOf(r)>=0)return[];i=o.concat(n,[r])}else i=n;return o.chain(function(n){return"sanctuary-def/Nullable"===n.name||n.validate(r).isLeft?[]:n.type===z?o.map(sn(n),$t(t,i,r,n.types.$1)):n.type===D?ln(n,$t(t,i,r,n.types.$1),$t(t,i,r,n.types.$2)):[n]},e)},t,e),[Y])}function Jt(t){return t.type===z?Jt(t.types.$1.type):t.type===D?Jt(t.types.$1.type)&&Jt(t.types.$2.type):t.type!==G}function Zt(t,n){return o.reject(function(t){return t.type===G},Qt(t,[],n))}function tn(t,n,e,r,i,u){var a={};for(var s in n){var c=n[s],l={types:c.types.slice(),valuesByPath:{}};for(var p in c.valuesByPath)l.valuesByPath[p]=c.valuesByPath[p].slice();a[s]=l}f.call(a,e.name)||(a[e.name]={types:t.slice(),valuesByPath:{}});var h=JSON.stringify(o.concat([r],i));f.call(a[e.name].valuesByPath,h)||(a[e.name].valuesByPath[h]=[]);var d=E(e.keys),y=en(t);function m(n,e){return o.filter(Jt,$t(t,[],n,e))}return u.forEach(function(t){a[e.name].valuesByPath[h].push(t),a[e.name].types=o.chain(function(n){return n.keys.length<e.keys.length||!y(n)(t)?[]:d&&n.type===z?o.map(sn(n),m(t,n.types.$1)):d&&n.type===D?ln(n,m(t,n.types.$1),m(t,n.types.$2)):[n]},a[e.name].types)}),a}function nn(t,n,e,r,i,u,a){for(var s=nn,c=0;c<a.length;c+=1){var l=r.validate(a[c]);if(l.isLeft)return h(function(){return Pn(t,n,i,o.concat(u,l.value.propPath),l.value.value)})}switch(r.type){case K:var p=r.name,y=n.constraints;if(f.call(y,p)){var m=y[p];for(c=0;c<a.length;c+=1)for(var _=0;_<m.length;_+=1)if(!m[_].test(a[c]))return h(function(){return Fn(t,n,m[_],i,u,a[c],e)})}var v=tn(t,e,r,i,u,a),g=v[p].types;return E(g)?h(function(){return Ln(t,n,i,u,v[p].valuesByPath)}):o.reduce(function(e,c){return o.chain(function(e){var f=c.keys.length-r.keys.length;return r.keys.reduce(function(e,l,p){var h=c.types[c.keys[f+p]].extractor;return o.reduce(function(e,a){return o.chain(function(e){return s(t,n,e.typeVarMap,r.types[l].type,i,o.concat(u,[l]),[a])},e)},e,o.chain(h,a))},d(e))},e)},d({typeVarMap:v,types:g}),g);case z:return o.map(function(t){return{typeVarMap:t.typeVarMap,types:o.map(sn(r),S(t.types,[r.types.$1.type]))}},s(t,n,e,r.types.$1.type,i,o.concat(u,["$1"]),o.chain(r.types.$1.extractor,a)));case D:return o.chain(function(e){var c=e.types;return o.map(function(t){var n=t.types;return{typeVarMap:t.typeVarMap,types:ln(r,S(c,[r.types.$1.type]),S(n,[r.types.$2.type]))}},s(t,n,e.typeVarMap,r.types.$2.type,i,o.concat(u,["$2"]),o.chain(r.types.$2.extractor,a)))},s(t,n,e,r.types.$1.type,i,o.concat(u,["$1"]),o.chain(r.types.$1.extractor,a)));case X:return o.reduce(function(e,c){return o.chain(function(e){return s(t,n,e.typeVarMap,r.types[c].type,i,o.concat(u,[c]),o.chain(r.types[c].extractor,a))},e)},d({typeVarMap:e,types:[r]}),r.keys);default:return d({typeVarMap:e,types:[r]})}}function en(t){return function(n){return function(e){return nn(t,{name:"name",constraints:{},types:[n]},{},n,0,[],[e]).isRight}}}function rn(t){function n(n,e){return n(j(t))}return function(e){return function(r){return new k(q,t,e,n,r,[],{})}}}var on=Wt("NullaryType")({})([Bt,Bt,dt([et,ct]),kt])(rn);function un(t){return function(n){return function(e){return function(r){return function(o){return new k(z,t,n,function(n,e){return n("("+j(t)+" ")+e("$1")(i(o))+n(")")},e,["$1"],{$1:{extractor:r,type:o}})}}}}}var an=Wt("UnaryType")({})([Bt,Bt,dt([et,ct]),dt([zt("t a"),ot(zt("a"))]),rt])(function(t){return function(n){return function(e){return _(Wt(j(t))({})([kt,kt]),un(t)(n)(e))}}});function sn(t){return un(t.name)(t.url)(t._test)(t.types.$1.extractor)}function cn(t){return function(n){return function(e){return function(r){return function(o){return function(u){return function(a){return new k(D,t,n,function(n,e){return n("("+j(t)+" ")+e("$1")(i(u))+n(" ")+e("$2")(i(a))+n(")")},e,["$1","$2"],{$1:{extractor:r,type:u},$2:{extractor:o,type:a}})}}}}}}}var fn=Wt("BinaryType")({})([Bt,Bt,dt([et,ct]),dt([zt("t a b"),ot(zt("a"))]),dt([zt("t a b"),ot(zt("b"))]),rt])(function(t){return function(n){return function(e){return function(r){return function(i){return Wt(j(t))({})([kt,kt,kt])(cn(t)(n)(e)(r)(i))}}}}});function ln(t,n,e){return o.chain(function(t){return o.map(t,e)},o.map(cn(t.name)(t.url)(t._test)(t.types.$1.extractor)(t.types.$2.extractor),n))}function pn(t){return function(n){return _(rn(t)(n),R)}}var hn=Wt("EnumType")({})([Bt,Bt,ot(et),kt])(pn);function dn(t){var n=O(t),e={};return n.forEach(function(n){e[n]={extractor:function(t){return[t[n]]},type:t[n]}}),new k(X,"","",function(e,r){if(E(n))return e("{}");var u=o.map(function(n){var o=t[n];return e(" ")+e(/^(?!\d)[$\w]+$/.test(n)?n:i(n))+e(" :: ")+F(o.type===X||E(o.keys),x,r(n)(i(o)))},n);return P(e("{"))(e(" }"))(b(e(","),u))},function(t){var e={};for(var r in n.forEach(function(t){e[t]=t}),t)delete e[r];return E(Object.keys(e))},n,e)}var yn=Wt("RecordType")({})([Ut(kt),kt])(dn),mn=Wt("TypeVariable")({})([Bt,kt])(function(t){return new k(K,t,"",m(t),y(!0),[],{})}),_n=Wt("UnaryTypeVariable")({})([Bt,rt])(function(t){return Wt(t)({})([kt,kt])(function(t){return function(n){var e={$1:{extractor:y([]),type:n}};return new k(K,t,"",function(e,r){return e("("+t+" ")+r("$1")(i(n))+e(")")},y(!0),["$1"],e)}}(t))}),vn=Wt("BinaryTypeVariable")({})([Bt,rt])(function(t){return Wt(t)({})([kt,kt,kt])(function(t){return function(n){return function(e){var r={$1:{extractor:y([]),type:n},$2:{extractor:y([]),type:e}};return new k(K,t,"",function(r,o){return r("("+t+" ")+o("$1")(i(n))+r(" ")+o("$2")(i(e))+r(")")},y(!0),["$1","$2"],r)}}}(t))}),gn=Wt("Thunk")({})([kt,kt])(function(t){return dt([t])}),En=Wt("Predicate")({})([kt,kt])(function(t){return dt([t,ct])});function Tn(t,n,e,r){return new TypeError(C(B(t.name)+" applied to the wrong number of arguments\n\n"+On(t,y(y(I)),function(t){return function(e){return y(y(t===n?e:I))}})+"\nExpected "+Yt(e)+" but received "+Yt(r.length)+w(".\n",":\n\n",i,r)))}function bn(t,n,e){var r=[];return O(t).forEach(function(n){var i=e(n);t[n].forEach(function(t){r.push(i(t)(j(t.name)+" "+n))})}),L(r.length>0,function(t){return t+n(" => ")},L(r.length>1,P(n("("))(n(")")),b(n(", "),r)))}function An(t){return o.concat(t.type===K?[t.name]:[],o.chain(function(n){return An(t.types[n].type)},t.keys))}function Rn(t){var n=o.chain(An,t.types);return function(t){var e="a".charCodeAt(0);return F(t.type===V||t.type===X||E(t.keys),x,i(t).replace(/\bUnknown\b/g,function(){do{var t=String.fromCharCode(e++)}while(n.indexOf(t)>=0);return t}))}}function Sn(t){return B(F(t.type===X||E(t.keys),x,i(t)))}function Nn(t,n,e,r){var u=Rn(n);return i(r)+")  "+b("\n    ",o.map(function(n){var e=Zt(t,[n]);return i(n)+" :: "+b(", ",o.map(u,e))},e))}function Mn(t){var n=o.map(Rn(t),t.types),e=n.length-1;return t.name+" :: "+bn(t.constraints,v,y(y(v)))+L(0===e,U,b(" -> ",g(n)))+" -> "+A(n)}function In(t,n,e){return F(t.type===X||E(t.keys)||t.type===V&&E(n)||!E(n),x,e(t)(n)(t.format(I,function(r){return y(In(t.types[r].type,o.concat(n,[r]),e))})))}function On(t,n,e){var r=t.types.reduce(function(t,n,r){var o=e(r);return t.numbers.push(In(n,[],o(function(n){return function(t){return function(n){var e=n.length-t.length;return N(" ",Math.floor(e/2))+t+N(" ",Math.ceil(e/2))}}(i(t.counter+=1))(n)}))),t.carets.push(In(n,[],function(t){return function(t){var n=i(t),e=n.slice(0,1)+n.slice(-1)==="()";return o(function(t){return e&&"()"!==n&&t.length===n.length?I("(")+M("^")(t.slice(1,-1))+I(")"):M("^")(t)})}(t)(t)})),t},{carets:[],numbers:[],counter:0});return Mn(t)+"\n"+I(t.name+" :: ")+bn(t.constraints,I,n)+b(I(" -> "),r.carets)+"\n"+I(t.name+" :: ")+bn(t.constraints,I,y(y(I)))+b(I(" -> "),r.numbers)+"\n"}function xn(t,n){return o.reduce(function(t,n){return t.types[n].type},t,n)}function wn(t){return function(n){return function(e){return function(r){return function(r){var i=o.concat([n],r),u=T(i)(t),a=T(t)(i);return u&&a?e:u?v:I}}}}}function Cn(t,n){return null==n.url||""===n.url?"":"\nSee "+n.url+" for information about the "+n.name+" "+t+".\n"}function Fn(t,n,e,r,i,u,a){var s=xn(n.types[r],i);return new TypeError(C("Type-class constraint violation\n\n"+On(n,function(t){return function(n){return t===s.name&&n.name===e.name?M("^"):I}},wn(o.concat([r],i)))+"\n"+Nn(t,n,[u],1)+"\n\n"+B(n.name)+" requires "+B(s.name)+" to satisfy the "+j(e.name)+" type-class constraint; the value at position 1 does not.\n"+Cn("type class",e)))}function Ln(t,n,e,r,u){var a=JSON.stringify(o.concat([e],r)),s=u[a],c=o.filter(function(n){var e=u[n];return n===a||E(function(t,n){return o.filter(Jt,Qt(t,[],n))}(t,o.concat(s,e)))},O(u)),l=function(t,n){var e=o.map(JSON.parse,O(n));return On(t,y(y(I)),function(t){return function(r){return function(i){return function(i){var u=o.concat([t],i);return function(t){if(e.some(T(u))){var i=JSON.stringify(u);if(!f.call(n,i))return t;if(!E(n[i]))return r(t)}return I(t)}}}}})}(n,o.reduce(function(t,n){return t[n]=u[n],t},{},c));return new TypeError(C(1===s.length&&E(Zt(t,s))?"Unrecognized value\n\n"+l+"\n1)  "+i(s[0])+" :: (no types)\n\n"+w("The environment is empty! Polymorphic functions require a non-empty environment.\n","The value at position 1 is not a member of any type in the environment.\n\nThe environment contains the following types:\n\n",Rn(n),t):"Type-variable constraint violation\n\n"+l+"\n"+o.reduce(function(e,r){var i=u[r];return E(i)?e:{idx:e.idx+1,s:e.s+Nn(t,n,i,e.idx+1)+"\n\n"}},{idx:0,s:""},c).s+"Since there is no type of which all the above values are members, the type-variable constraint has been violated.\n"))}function Pn(t,n,e,r,i){var u=xn(n.types[e],r);return new TypeError(C("Invalid value\n\n"+On(n,y(y(I)),wn(o.concat([e],r)))+"\n"+Nn(t,n,[i],1)+"\n\nThe value at position 1 is not a member of "+Sn(u)+".\n"+Cn("type",u)))}function Un(t){if(t.isLeft)throw t.value();return t.value}function Bn(t,n,e){var r=n.types.length-1;function u(e,r,u){if(n.types[r].type!==V)return u;var a=n.types[r];function s(e,r,i,u){var s=[i],c=a.types[i].type;return c.type===K?o.chain(function(e){return E(e[c.name].types)?h(function(){return Ln(t,n,r,s,e[c.name].valuesByPath)}):d(e)},d(tn(t,e,c,r,s,[u]))):o.map(function(t){return t.typeVarMap},nn(t,n,e,c,r,s,[u]))}var f=a.types.$1.type.type===H?0:a.keys.length-1,l=e;return function(t){if(arguments.length!==f)throw function(t,n,e,r){return new TypeError(C(B(t.name)+" applied "+Sn(t.types[n])+" to the wrong number of arguments\n\n"+On(t,y(y(I)),function(t){return function(e){return function(r){return function(i){return function(i){return t===n?r.format(I,function(t){return"$1"===t?e:I}):I(i)}}}}})+"\nExpected "+Yt(e)+" but received "+Yt(r.length)+w(".\n",":\n\n",i,r)))}(n,r,f,c.call(arguments));var e=arguments;l=Un(g(a.keys).reduce(function(t,n,i){var u=e[i];return o.chain(function(t){return s(t,r,n,u)},t)},d(l)));var p=u.apply(this,arguments),h=A(a.keys);return l=Un(s(l,r,h,p)),p}}var a=n.types[0].type===H?function(){if(0!==arguments.length)throw Tn(n,0,0,c.call(arguments));var i=e();return u(Un(nn(t,n,{},n.types[r],r,[],[i])).typeVarMap,r,i)}:function i(a,s,f){return function(l){var p=c.call(arguments);if(1!==p.length)throw Tn(n,f,1,p);var h=Un(nn(t,n,a,n.types[f],f,[],p)).typeVarMap,d=o.concat(s,p);if(f+1===r){var y=d.reduce(function(t,n,e){return t(u(h,e,n))},e);return u(h=Un(nn(t,n,h,n.types[r],r,[],[y])).typeVarMap,r,y)}return i(h,d,f+1)}}({},[],0);return a[p]=a.toString=function(t){return function(){return t}}(Mn(n)),a}function jn(t){function n(n){return function(e){return function(r){return function(i){return t.checkTypes?Bn(t.env,{name:n,constraints:e,types:ht(r)},i):i}}}}return n(n.name)({})([Bt,Ut(ot(Dt)),Tt(ot(kt)),rt,rt])(n)}var kn=Wt("create")({})([dn({checkTypes:ct,env:ot(et)}),rt])(jn);function Dn(t){var n=t(Gt),e=n.types.$1.extractor;return an(n.name)(n.url)(n._test)(e)}return{Any:et,AnyFunction:rt,Arguments:it,Array:Dn(ot),Array0:ut,Array1:Dn(at),Array2:function(t){var n=st(Gt)(Gt),e=n.types.$1.extractor,r=n.types.$2.extractor;return fn(n.name)(n.url)(n._test)(e)(r)}(),Boolean:ct,Date:ft,Error:lt,FiniteNumber:pt,Function:Wt("Function")({})([ot(kt),kt])(dt),GlobalRegExp:yt,HtmlElement:mt,Integer:_t,NegativeFiniteNumber:vt,NegativeInteger:gt,NegativeNumber:Et,NonEmpty:Tt,NonGlobalRegExp:bt,NonNegativeInteger:At,NonZeroFiniteNumber:Rt,NonZeroInteger:St,NonZeroValidNumber:Nt,Null:Mt,Nullable:Dn(It),Number:Ot,Object:xt,PositiveFiniteNumber:wt,PositiveInteger:Ct,PositiveNumber:Ft,RegExp:Lt,RegexFlags:Pt,StrMap:Dn(Ut),String:Bt,Symbol:jt,Type:kt,TypeClass:Dt,Undefined:Vt,Unknown:Gt,ValidDate:Ht,ValidNumber:qt,env:Xt,create:kn,test:Wt("test")({})([ot(kt),kt,et,ct])(en),NullaryType:on,UnaryType:an,BinaryType:fn,EnumType:hn,RecordType:yn,TypeVariable:mn,UnaryTypeVariable:_n,BinaryTypeVariable:vn,Thunk:gn,Predicate:En}})}).call(this,e(17))},function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"create",function(){return l}),e.d(r,"clone",function(){return p}),e.d(r,"copy",function(){return h}),e.d(r,"fromValues",function(){return d}),e.d(r,"set",function(){return y}),e.d(r,"identity",function(){return m}),e.d(r,"transpose",function(){return _}),e.d(r,"invert",function(){return v}),e.d(r,"adjoint",function(){return g}),e.d(r,"determinant",function(){return E}),e.d(r,"multiply",function(){return T}),e.d(r,"translate",function(){return b}),e.d(r,"scale",function(){return A}),e.d(r,"rotate",function(){return R}),e.d(r,"rotateX",function(){return S}),e.d(r,"rotateY",function(){return N}),e.d(r,"rotateZ",function(){return M}),e.d(r,"fromTranslation",function(){return I}),e.d(r,"fromScaling",function(){return O}),e.d(r,"fromRotation",function(){return x}),e.d(r,"fromXRotation",function(){return w}),e.d(r,"fromYRotation",function(){return C}),e.d(r,"fromZRotation",function(){return F}),e.d(r,"fromRotationTranslation",function(){return L}),e.d(r,"fromQuat2",function(){return P}),e.d(r,"getTranslation",function(){return U}),e.d(r,"getScaling",function(){return B}),e.d(r,"getRotation",function(){return j}),e.d(r,"fromRotationTranslationScale",function(){return k}),e.d(r,"fromRotationTranslationScaleOrigin",function(){return D}),e.d(r,"fromQuat",function(){return V}),e.d(r,"frustum",function(){return G}),e.d(r,"perspective",function(){return H}),e.d(r,"perspectiveFromFieldOfView",function(){return q}),e.d(r,"ortho",function(){return X}),e.d(r,"lookAt",function(){return z}),e.d(r,"targetTo",function(){return W}),e.d(r,"str",function(){return K}),e.d(r,"frob",function(){return Y}),e.d(r,"add",function(){return $}),e.d(r,"subtract",function(){return Q}),e.d(r,"multiplyScalar",function(){return J}),e.d(r,"multiplyScalarAndAdd",function(){return Z}),e.d(r,"exactEquals",function(){return tt}),e.d(r,"equals",function(){return nt}),e.d(r,"mul",function(){return et}),e.d(r,"sub",function(){return rt});var i={};e.r(i),e.d(i,"create",function(){return it}),e.d(i,"clone",function(){return ot}),e.d(i,"length",function(){return ut}),e.d(i,"fromValues",function(){return at}),e.d(i,"copy",function(){return st}),e.d(i,"set",function(){return ct}),e.d(i,"add",function(){return ft}),e.d(i,"subtract",function(){return lt}),e.d(i,"multiply",function(){return pt}),e.d(i,"divide",function(){return ht}),e.d(i,"ceil",function(){return dt}),e.d(i,"floor",function(){return yt}),e.d(i,"min",function(){return mt}),e.d(i,"max",function(){return _t}),e.d(i,"round",function(){return vt}),e.d(i,"scale",function(){return gt}),e.d(i,"scaleAndAdd",function(){return Et}),e.d(i,"distance",function(){return Tt}),e.d(i,"squaredDistance",function(){return bt}),e.d(i,"squaredLength",function(){return At}),e.d(i,"negate",function(){return Rt}),e.d(i,"inverse",function(){return St}),e.d(i,"normalize",function(){return Nt}),e.d(i,"dot",function(){return Mt}),e.d(i,"cross",function(){return It}),e.d(i,"lerp",function(){return Ot}),e.d(i,"hermite",function(){return xt}),e.d(i,"bezier",function(){return wt}),e.d(i,"random",function(){return Ct}),e.d(i,"transformMat4",function(){return Ft}),e.d(i,"transformMat3",function(){return Lt}),e.d(i,"transformQuat",function(){return Pt}),e.d(i,"rotateX",function(){return Ut}),e.d(i,"rotateY",function(){return Bt}),e.d(i,"rotateZ",function(){return jt}),e.d(i,"angle",function(){return kt}),e.d(i,"str",function(){return Dt}),e.d(i,"exactEquals",function(){return Vt}),e.d(i,"equals",function(){return Gt}),e.d(i,"sub",function(){return Ht}),e.d(i,"mul",function(){return qt}),e.d(i,"div",function(){return Xt}),e.d(i,"dist",function(){return zt}),e.d(i,"sqrDist",function(){return Wt}),e.d(i,"len",function(){return Kt}),e.d(i,"sqrLen",function(){return Yt}),e.d(i,"forEach",function(){return $t});var o={};e.r(o),e.d(o,"create",function(){return Qt}),e.d(o,"clone",function(){return Jt}),e.d(o,"fromValues",function(){return Zt}),e.d(o,"copy",function(){return tn}),e.d(o,"set",function(){return nn}),e.d(o,"add",function(){return en}),e.d(o,"subtract",function(){return rn}),e.d(o,"multiply",function(){return on}),e.d(o,"divide",function(){return un}),e.d(o,"ceil",function(){return an}),e.d(o,"floor",function(){return sn}),e.d(o,"min",function(){return cn}),e.d(o,"max",function(){return fn}),e.d(o,"round",function(){return ln}),e.d(o,"scale",function(){return pn}),e.d(o,"scaleAndAdd",function(){return hn}),e.d(o,"distance",function(){return dn}),e.d(o,"squaredDistance",function(){return yn}),e.d(o,"length",function(){return mn}),e.d(o,"squaredLength",function(){return _n}),e.d(o,"negate",function(){return vn}),e.d(o,"inverse",function(){return gn}),e.d(o,"normalize",function(){return En}),e.d(o,"dot",function(){return Tn}),e.d(o,"lerp",function(){return bn}),e.d(o,"random",function(){return An}),e.d(o,"transformMat4",function(){return Rn}),e.d(o,"transformQuat",function(){return Sn}),e.d(o,"str",function(){return Nn}),e.d(o,"exactEquals",function(){return Mn}),e.d(o,"equals",function(){return In}),e.d(o,"sub",function(){return On}),e.d(o,"mul",function(){return xn}),e.d(o,"div",function(){return wn}),e.d(o,"dist",function(){return Cn}),e.d(o,"sqrDist",function(){return Fn}),e.d(o,"len",function(){return Ln}),e.d(o,"sqrLen",function(){return Pn}),e.d(o,"forEach",function(){return Un});var u={};e.r(u),e.d(u,"create",function(){return Bn}),e.d(u,"identity",function(){return jn}),e.d(u,"setAxisAngle",function(){return kn}),e.d(u,"getAxisAngle",function(){return Dn}),e.d(u,"multiply",function(){return Vn}),e.d(u,"rotateX",function(){return Gn}),e.d(u,"rotateY",function(){return Hn}),e.d(u,"rotateZ",function(){return qn}),e.d(u,"calculateW",function(){return Xn}),e.d(u,"slerp",function(){return zn}),e.d(u,"invert",function(){return Wn}),e.d(u,"conjugate",function(){return Kn}),e.d(u,"fromMat3",function(){return Yn}),e.d(u,"fromEuler",function(){return $n}),e.d(u,"str",function(){return Qn}),e.d(u,"clone",function(){return Jn}),e.d(u,"fromValues",function(){return Zn}),e.d(u,"copy",function(){return te}),e.d(u,"set",function(){return ne}),e.d(u,"add",function(){return ee}),e.d(u,"mul",function(){return re}),e.d(u,"scale",function(){return ie}),e.d(u,"dot",function(){return oe}),e.d(u,"lerp",function(){return ue}),e.d(u,"length",function(){return ae}),e.d(u,"len",function(){return se}),e.d(u,"squaredLength",function(){return ce}),e.d(u,"sqrLen",function(){return fe}),e.d(u,"normalize",function(){return le}),e.d(u,"exactEquals",function(){return pe}),e.d(u,"equals",function(){return he}),e.d(u,"rotationTo",function(){return de}),e.d(u,"sqlerp",function(){return ye}),e.d(u,"setAxes",function(){return me});var a={};e.r(a),e.d(a,"create",function(){return _e}),e.d(a,"clone",function(){return ve}),e.d(a,"fromValues",function(){return ge}),e.d(a,"copy",function(){return Ee}),e.d(a,"set",function(){return Te}),e.d(a,"add",function(){return be}),e.d(a,"subtract",function(){return Ae}),e.d(a,"multiply",function(){return Re}),e.d(a,"divide",function(){return Se}),e.d(a,"ceil",function(){return Ne}),e.d(a,"floor",function(){return Me}),e.d(a,"min",function(){return Ie}),e.d(a,"max",function(){return Oe}),e.d(a,"round",function(){return xe}),e.d(a,"scale",function(){return we}),e.d(a,"scaleAndAdd",function(){return Ce}),e.d(a,"distance",function(){return Fe}),e.d(a,"squaredDistance",function(){return Le}),e.d(a,"length",function(){return Pe}),e.d(a,"squaredLength",function(){return Ue}),e.d(a,"negate",function(){return Be}),e.d(a,"inverse",function(){return je}),e.d(a,"normalize",function(){return ke}),e.d(a,"dot",function(){return De}),e.d(a,"cross",function(){return Ve}),e.d(a,"lerp",function(){return Ge}),e.d(a,"random",function(){return He}),e.d(a,"transformMat2",function(){return qe}),e.d(a,"transformMat2d",function(){return Xe}),e.d(a,"transformMat3",function(){return ze}),e.d(a,"transformMat4",function(){return We}),e.d(a,"rotate",function(){return Ke}),e.d(a,"angle",function(){return Ye}),e.d(a,"str",function(){return $e}),e.d(a,"exactEquals",function(){return Qe}),e.d(a,"equals",function(){return Je}),e.d(a,"len",function(){return Ze}),e.d(a,"sub",function(){return tr}),e.d(a,"mul",function(){return nr}),e.d(a,"div",function(){return er}),e.d(a,"dist",function(){return rr}),e.d(a,"sqrDist",function(){return ir}),e.d(a,"sqrLen",function(){return or}),e.d(a,"forEach",function(){return ur});const s=1e-6;let c="undefined"!=typeof Float32Array?Float32Array:Array;const f=Math.random;function l(){let t=new c(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p(t){let n=new c(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function h(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function d(t,n,e,r,i,o,u,a,s,f,l,p,h,d,y,m){let _=new c(16);return _[0]=t,_[1]=n,_[2]=e,_[3]=r,_[4]=i,_[5]=o,_[6]=u,_[7]=a,_[8]=s,_[9]=f,_[10]=l,_[11]=p,_[12]=h,_[13]=d,_[14]=y,_[15]=m,_}function y(t,n,e,r,i,o,u,a,s,c,f,l,p,h,d,y,m){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t[4]=o,t[5]=u,t[6]=a,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=p,t[12]=h,t[13]=d,t[14]=y,t[15]=m,t}function m(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,n){if(t===n){let e=n[1],r=n[2],i=n[3],o=n[6],u=n[7],a=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=i,t[13]=u,t[14]=a}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function v(t,n){let e=n[0],r=n[1],i=n[2],o=n[3],u=n[4],a=n[5],s=n[6],c=n[7],f=n[8],l=n[9],p=n[10],h=n[11],d=n[12],y=n[13],m=n[14],_=n[15],v=e*a-r*u,g=e*s-i*u,E=e*c-o*u,T=r*s-i*a,b=r*c-o*a,A=i*c-o*s,R=f*y-l*d,S=f*m-p*d,N=f*_-h*d,M=l*m-p*y,I=l*_-h*y,O=p*_-h*m,x=v*O-g*I+E*M+T*N-b*S+A*R;return x?(x=1/x,t[0]=(a*O-s*I+c*M)*x,t[1]=(i*I-r*O-o*M)*x,t[2]=(y*A-m*b+_*T)*x,t[3]=(p*b-l*A-h*T)*x,t[4]=(s*N-u*O-c*S)*x,t[5]=(e*O-i*N+o*S)*x,t[6]=(m*E-d*A-_*g)*x,t[7]=(f*A-p*E+h*g)*x,t[8]=(u*I-a*N+c*R)*x,t[9]=(r*N-e*I-o*R)*x,t[10]=(d*b-y*E+_*v)*x,t[11]=(l*E-f*b-h*v)*x,t[12]=(a*S-u*M-s*R)*x,t[13]=(e*M-r*S+i*R)*x,t[14]=(y*g-d*T-m*v)*x,t[15]=(f*T-l*g+p*v)*x,t):null}function g(t,n){let e=n[0],r=n[1],i=n[2],o=n[3],u=n[4],a=n[5],s=n[6],c=n[7],f=n[8],l=n[9],p=n[10],h=n[11],d=n[12],y=n[13],m=n[14],_=n[15];return t[0]=a*(p*_-h*m)-l*(s*_-c*m)+y*(s*h-c*p),t[1]=-(r*(p*_-h*m)-l*(i*_-o*m)+y*(i*h-o*p)),t[2]=r*(s*_-c*m)-a*(i*_-o*m)+y*(i*c-o*s),t[3]=-(r*(s*h-c*p)-a*(i*h-o*p)+l*(i*c-o*s)),t[4]=-(u*(p*_-h*m)-f*(s*_-c*m)+d*(s*h-c*p)),t[5]=e*(p*_-h*m)-f*(i*_-o*m)+d*(i*h-o*p),t[6]=-(e*(s*_-c*m)-u*(i*_-o*m)+d*(i*c-o*s)),t[7]=e*(s*h-c*p)-u*(i*h-o*p)+f*(i*c-o*s),t[8]=u*(l*_-h*y)-f*(a*_-c*y)+d*(a*h-c*l),t[9]=-(e*(l*_-h*y)-f*(r*_-o*y)+d*(r*h-o*l)),t[10]=e*(a*_-c*y)-u*(r*_-o*y)+d*(r*c-o*a),t[11]=-(e*(a*h-c*l)-u*(r*h-o*l)+f*(r*c-o*a)),t[12]=-(u*(l*m-p*y)-f*(a*m-s*y)+d*(a*p-s*l)),t[13]=e*(l*m-p*y)-f*(r*m-i*y)+d*(r*p-i*l),t[14]=-(e*(a*m-s*y)-u*(r*m-i*y)+d*(r*s-i*a)),t[15]=e*(a*p-s*l)-u*(r*p-i*l)+f*(r*s-i*a),t}function E(t){let n=t[0],e=t[1],r=t[2],i=t[3],o=t[4],u=t[5],a=t[6],s=t[7],c=t[8],f=t[9],l=t[10],p=t[11],h=t[12],d=t[13],y=t[14],m=t[15];return(n*u-e*o)*(l*m-p*y)-(n*a-r*o)*(f*m-p*d)+(n*s-i*o)*(f*y-l*d)+(e*a-r*u)*(c*m-p*h)-(e*s-i*u)*(c*y-l*h)+(r*s-i*a)*(c*d-f*h)}function T(t,n,e){let r=n[0],i=n[1],o=n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=n[8],p=n[9],h=n[10],d=n[11],y=n[12],m=n[13],_=n[14],v=n[15],g=e[0],E=e[1],T=e[2],b=e[3];return t[0]=g*r+E*a+T*l+b*y,t[1]=g*i+E*s+T*p+b*m,t[2]=g*o+E*c+T*h+b*_,t[3]=g*u+E*f+T*d+b*v,g=e[4],E=e[5],T=e[6],b=e[7],t[4]=g*r+E*a+T*l+b*y,t[5]=g*i+E*s+T*p+b*m,t[6]=g*o+E*c+T*h+b*_,t[7]=g*u+E*f+T*d+b*v,g=e[8],E=e[9],T=e[10],b=e[11],t[8]=g*r+E*a+T*l+b*y,t[9]=g*i+E*s+T*p+b*m,t[10]=g*o+E*c+T*h+b*_,t[11]=g*u+E*f+T*d+b*v,g=e[12],E=e[13],T=e[14],b=e[15],t[12]=g*r+E*a+T*l+b*y,t[13]=g*i+E*s+T*p+b*m,t[14]=g*o+E*c+T*h+b*_,t[15]=g*u+E*f+T*d+b*v,t}function b(t,n,e){let r,i,o,u,a,s,c,f,l,p,h,d,y=e[0],m=e[1],_=e[2];return n===t?(t[12]=n[0]*y+n[4]*m+n[8]*_+n[12],t[13]=n[1]*y+n[5]*m+n[9]*_+n[13],t[14]=n[2]*y+n[6]*m+n[10]*_+n[14],t[15]=n[3]*y+n[7]*m+n[11]*_+n[15]):(r=n[0],i=n[1],o=n[2],u=n[3],a=n[4],s=n[5],c=n[6],f=n[7],l=n[8],p=n[9],h=n[10],d=n[11],t[0]=r,t[1]=i,t[2]=o,t[3]=u,t[4]=a,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=p,t[10]=h,t[11]=d,t[12]=r*y+a*m+l*_+n[12],t[13]=i*y+s*m+p*_+n[13],t[14]=o*y+c*m+h*_+n[14],t[15]=u*y+f*m+d*_+n[15]),t}function A(t,n,e){let r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function R(t,n,e,r){let i,o,u,a,c,f,l,p,h,d,y,m,_,v,g,E,T,b,A,R,S,N,M,I,O=r[0],x=r[1],w=r[2],C=Math.sqrt(O*O+x*x+w*w);return C<s?null:(O*=C=1/C,x*=C,w*=C,i=Math.sin(e),u=1-(o=Math.cos(e)),a=n[0],c=n[1],f=n[2],l=n[3],p=n[4],h=n[5],d=n[6],y=n[7],m=n[8],_=n[9],v=n[10],g=n[11],E=O*O*u+o,T=x*O*u+w*i,b=w*O*u-x*i,A=O*x*u-w*i,R=x*x*u+o,S=w*x*u+O*i,N=O*w*u+x*i,M=x*w*u-O*i,I=w*w*u+o,t[0]=a*E+p*T+m*b,t[1]=c*E+h*T+_*b,t[2]=f*E+d*T+v*b,t[3]=l*E+y*T+g*b,t[4]=a*A+p*R+m*S,t[5]=c*A+h*R+_*S,t[6]=f*A+d*R+v*S,t[7]=l*A+y*R+g*S,t[8]=a*N+p*M+m*I,t[9]=c*N+h*M+_*I,t[10]=f*N+d*M+v*I,t[11]=l*N+y*M+g*I,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function S(t,n,e){let r=Math.sin(e),i=Math.cos(e),o=n[4],u=n[5],a=n[6],s=n[7],c=n[8],f=n[9],l=n[10],p=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*i+c*r,t[5]=u*i+f*r,t[6]=a*i+l*r,t[7]=s*i+p*r,t[8]=c*i-o*r,t[9]=f*i-u*r,t[10]=l*i-a*r,t[11]=p*i-s*r,t}function N(t,n,e){let r=Math.sin(e),i=Math.cos(e),o=n[0],u=n[1],a=n[2],s=n[3],c=n[8],f=n[9],l=n[10],p=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i-c*r,t[1]=u*i-f*r,t[2]=a*i-l*r,t[3]=s*i-p*r,t[8]=o*r+c*i,t[9]=u*r+f*i,t[10]=a*r+l*i,t[11]=s*r+p*i,t}function M(t,n,e){let r=Math.sin(e),i=Math.cos(e),o=n[0],u=n[1],a=n[2],s=n[3],c=n[4],f=n[5],l=n[6],p=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i+c*r,t[1]=u*i+f*r,t[2]=a*i+l*r,t[3]=s*i+p*r,t[4]=c*i-o*r,t[5]=f*i-u*r,t[6]=l*i-a*r,t[7]=p*i-s*r,t}function I(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function O(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function x(t,n,e){let r,i,o,u=e[0],a=e[1],c=e[2],f=Math.sqrt(u*u+a*a+c*c);return f<s?null:(u*=f=1/f,a*=f,c*=f,r=Math.sin(n),o=1-(i=Math.cos(n)),t[0]=u*u*o+i,t[1]=a*u*o+c*r,t[2]=c*u*o-a*r,t[3]=0,t[4]=u*a*o-c*r,t[5]=a*a*o+i,t[6]=c*a*o+u*r,t[7]=0,t[8]=u*c*o+a*r,t[9]=a*c*o-u*r,t[10]=c*c*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function w(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function F(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,n,e){let r=n[0],i=n[1],o=n[2],u=n[3],a=r+r,s=i+i,c=o+o,f=r*a,l=r*s,p=r*c,h=i*s,d=i*c,y=o*c,m=u*a,_=u*s,v=u*c;return t[0]=1-(h+y),t[1]=l+v,t[2]=p-_,t[3]=0,t[4]=l-v,t[5]=1-(f+y),t[6]=d+m,t[7]=0,t[8]=p+_,t[9]=d-m,t[10]=1-(f+h),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function P(t,n){let e=new c(3),r=-n[0],i=-n[1],o=-n[2],u=n[3],a=n[4],s=n[5],f=n[6],l=n[7],p=r*r+i*i+o*o+u*u;return p>0?(e[0]=2*(a*u+l*r+s*o-f*i)/p,e[1]=2*(s*u+l*i+f*r-a*o)/p,e[2]=2*(f*u+l*o+a*i-s*r)/p):(e[0]=2*(a*u+l*r+s*o-f*i),e[1]=2*(s*u+l*i+f*r-a*o),e[2]=2*(f*u+l*o+a*i-s*r)),L(t,n,e),t}function U(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function B(t,n){let e=n[0],r=n[1],i=n[2],o=n[4],u=n[5],a=n[6],s=n[8],c=n[9],f=n[10];return t[0]=Math.sqrt(e*e+r*r+i*i),t[1]=Math.sqrt(o*o+u*u+a*a),t[2]=Math.sqrt(s*s+c*c+f*f),t}function j(t,n){let e=n[0]+n[5]+n[10],r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(n[6]-n[9])/r,t[1]=(n[8]-n[2])/r,t[2]=(n[1]-n[4])/r):n[0]>n[5]&&n[0]>n[10]?(r=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/r,t[0]=.25*r,t[1]=(n[1]+n[4])/r,t[2]=(n[8]+n[2])/r):n[5]>n[10]?(r=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/r,t[0]=(n[1]+n[4])/r,t[1]=.25*r,t[2]=(n[6]+n[9])/r):(r=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/r,t[0]=(n[8]+n[2])/r,t[1]=(n[6]+n[9])/r,t[2]=.25*r),t}function k(t,n,e,r){let i=n[0],o=n[1],u=n[2],a=n[3],s=i+i,c=o+o,f=u+u,l=i*s,p=i*c,h=i*f,d=o*c,y=o*f,m=u*f,_=a*s,v=a*c,g=a*f,E=r[0],T=r[1],b=r[2];return t[0]=(1-(d+m))*E,t[1]=(p+g)*E,t[2]=(h-v)*E,t[3]=0,t[4]=(p-g)*T,t[5]=(1-(l+m))*T,t[6]=(y+_)*T,t[7]=0,t[8]=(h+v)*b,t[9]=(y-_)*b,t[10]=(1-(l+d))*b,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function D(t,n,e,r,i){let o=n[0],u=n[1],a=n[2],s=n[3],c=o+o,f=u+u,l=a+a,p=o*c,h=o*f,d=o*l,y=u*f,m=u*l,_=a*l,v=s*c,g=s*f,E=s*l,T=r[0],b=r[1],A=r[2],R=i[0],S=i[1],N=i[2],M=(1-(y+_))*T,I=(h+E)*T,O=(d-g)*T,x=(h-E)*b,w=(1-(p+_))*b,C=(m+v)*b,F=(d+g)*A,L=(m-v)*A,P=(1-(p+y))*A;return t[0]=M,t[1]=I,t[2]=O,t[3]=0,t[4]=x,t[5]=w,t[6]=C,t[7]=0,t[8]=F,t[9]=L,t[10]=P,t[11]=0,t[12]=e[0]+R-(M*R+x*S+F*N),t[13]=e[1]+S-(I*R+w*S+L*N),t[14]=e[2]+N-(O*R+C*S+P*N),t[15]=1,t}function V(t,n){let e=n[0],r=n[1],i=n[2],o=n[3],u=e+e,a=r+r,s=i+i,c=e*u,f=r*u,l=r*a,p=i*u,h=i*a,d=i*s,y=o*u,m=o*a,_=o*s;return t[0]=1-l-d,t[1]=f+_,t[2]=p-m,t[3]=0,t[4]=f-_,t[5]=1-c-d,t[6]=h+y,t[7]=0,t[8]=p+m,t[9]=h-y,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function G(t,n,e,r,i,o,u){let a=1/(e-n),s=1/(i-r),c=1/(o-u);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(e+n)*a,t[9]=(i+r)*s,t[10]=(u+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*o*2*c,t[15]=0,t}function H(t,n,e,r,i){let o=1/Math.tan(n/2),u=1/(r-i);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*u,t[15]=0,t}function q(t,n,e,r){let i=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),u=Math.tan(n.leftDegrees*Math.PI/180),a=Math.tan(n.rightDegrees*Math.PI/180),s=2/(u+a),c=2/(i+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(u-a)*s*.5,t[9]=(i-o)*c*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function X(t,n,e,r,i,o,u){let a=1/(n-e),s=1/(r-i),c=1/(o-u);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*a,t[13]=(i+r)*s,t[14]=(u+o)*c,t[15]=1,t}function z(t,n,e,r){let i,o,u,a,c,f,l,p,h,d,y=n[0],_=n[1],v=n[2],g=r[0],E=r[1],T=r[2],b=e[0],A=e[1],R=e[2];return Math.abs(y-b)<s&&Math.abs(_-A)<s&&Math.abs(v-R)<s?m(t):(l=y-b,p=_-A,h=v-R,i=E*(h*=d=1/Math.sqrt(l*l+p*p+h*h))-T*(p*=d),o=T*(l*=d)-g*h,u=g*p-E*l,(d=Math.sqrt(i*i+o*o+u*u))?(i*=d=1/d,o*=d,u*=d):(i=0,o=0,u=0),a=p*u-h*o,c=h*i-l*u,f=l*o-p*i,(d=Math.sqrt(a*a+c*c+f*f))?(a*=d=1/d,c*=d,f*=d):(a=0,c=0,f=0),t[0]=i,t[1]=a,t[2]=l,t[3]=0,t[4]=o,t[5]=c,t[6]=p,t[7]=0,t[8]=u,t[9]=f,t[10]=h,t[11]=0,t[12]=-(i*y+o*_+u*v),t[13]=-(a*y+c*_+f*v),t[14]=-(l*y+p*_+h*v),t[15]=1,t)}function W(t,n,e,r){let i=n[0],o=n[1],u=n[2],a=r[0],s=r[1],c=r[2],f=i-e[0],l=o-e[1],p=u-e[2],h=f*f+l*l+p*p;h>0&&(f*=h=1/Math.sqrt(h),l*=h,p*=h);let d=s*p-c*l,y=c*f-a*p,m=a*l-s*f;return(h=d*d+y*y+m*m)>0&&(d*=h=1/Math.sqrt(h),y*=h,m*=h),t[0]=d,t[1]=y,t[2]=m,t[3]=0,t[4]=l*m-p*y,t[5]=p*d-f*m,t[6]=f*y-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=p,t[11]=0,t[12]=i,t[13]=o,t[14]=u,t[15]=1,t}function K(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function $(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function Q(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function J(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function Z(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function tt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function nt(t,n){let e=t[0],r=t[1],i=t[2],o=t[3],u=t[4],a=t[5],c=t[6],f=t[7],l=t[8],p=t[9],h=t[10],d=t[11],y=t[12],m=t[13],_=t[14],v=t[15],g=n[0],E=n[1],T=n[2],b=n[3],A=n[4],R=n[5],S=n[6],N=n[7],M=n[8],I=n[9],O=n[10],x=n[11],w=n[12],C=n[13],F=n[14],L=n[15];return Math.abs(e-g)<=s*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-E)<=s*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(i-T)<=s*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(o-b)<=s*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(u-A)<=s*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(a-R)<=s*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(c-S)<=s*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-N)<=s*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(l-M)<=s*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(p-I)<=s*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(h-O)<=s*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(d-x)<=s*Math.max(1,Math.abs(d),Math.abs(x))&&Math.abs(y-w)<=s*Math.max(1,Math.abs(y),Math.abs(w))&&Math.abs(m-C)<=s*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(_-F)<=s*Math.max(1,Math.abs(_),Math.abs(F))&&Math.abs(v-L)<=s*Math.max(1,Math.abs(v),Math.abs(L))}Math.PI;const et=T,rt=Q;function it(){let t=new c(3);return t[0]=0,t[1]=0,t[2]=0,t}function ot(t){var n=new c(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function ut(t){let n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)}function at(t,n,e){let r=new c(3);return r[0]=t,r[1]=n,r[2]=e,r}function st(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function ct(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t}function ft(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function lt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function pt(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function ht(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function dt(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function yt(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function mt(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t}function _t(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t}function vt(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function gt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function Et(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t}function Tt(t,n){let e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(e*e+r*r+i*i)}function bt(t,n){let e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return e*e+r*r+i*i}function At(t){let n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function Rt(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function St(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function Nt(t,n){let e=n[0],r=n[1],i=n[2],o=e*e+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t}function Mt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function It(t,n,e){let r=n[0],i=n[1],o=n[2],u=e[0],a=e[1],s=e[2];return t[0]=i*s-o*a,t[1]=o*u-r*s,t[2]=r*a-i*u,t}function Ot(t,n,e,r){let i=n[0],o=n[1],u=n[2];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t[2]=u+r*(e[2]-u),t}function xt(t,n,e,r,i,o){let u=o*o,a=u*(2*o-3)+1,s=u*(o-2)+o,c=u*(o-1),f=u*(3-2*o);return t[0]=n[0]*a+e[0]*s+r[0]*c+i[0]*f,t[1]=n[1]*a+e[1]*s+r[1]*c+i[1]*f,t[2]=n[2]*a+e[2]*s+r[2]*c+i[2]*f,t}function wt(t,n,e,r,i,o){let u=1-o,a=u*u,s=o*o,c=a*u,f=3*o*a,l=3*s*u,p=s*o;return t[0]=n[0]*c+e[0]*f+r[0]*l+i[0]*p,t[1]=n[1]*c+e[1]*f+r[1]*l+i[1]*p,t[2]=n[2]*c+e[2]*f+r[2]*l+i[2]*p,t}function Ct(t,n){n=n||1;let e=2*f()*Math.PI,r=2*f()-1,i=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*i,t[1]=Math.sin(e)*i,t[2]=r*n,t}function Ft(t,n,e){let r=n[0],i=n[1],o=n[2],u=e[3]*r+e[7]*i+e[11]*o+e[15];return u=u||1,t[0]=(e[0]*r+e[4]*i+e[8]*o+e[12])/u,t[1]=(e[1]*r+e[5]*i+e[9]*o+e[13])/u,t[2]=(e[2]*r+e[6]*i+e[10]*o+e[14])/u,t}function Lt(t,n,e){let r=n[0],i=n[1],o=n[2];return t[0]=r*e[0]+i*e[3]+o*e[6],t[1]=r*e[1]+i*e[4]+o*e[7],t[2]=r*e[2]+i*e[5]+o*e[8],t}function Pt(t,n,e){let r=e[0],i=e[1],o=e[2],u=e[3],a=n[0],s=n[1],c=n[2],f=i*c-o*s,l=o*a-r*c,p=r*s-i*a,h=i*p-o*l,d=o*f-r*p,y=r*l-i*f,m=2*u;return f*=m,l*=m,p*=m,h*=2,d*=2,y*=2,t[0]=a+f+h,t[1]=s+l+d,t[2]=c+p+y,t}function Ut(t,n,e,r){let i=[],o=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function Bt(t,n,e,r){let i=[],o=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function jt(t,n,e,r){let i=[],o=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function kt(t,n){let e=at(t[0],t[1],t[2]),r=at(n[0],n[1],n[2]);Nt(e,e),Nt(r,r);let i=Mt(e,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function Dt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Vt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function Gt(t,n){let e=t[0],r=t[1],i=t[2],o=n[0],u=n[1],a=n[2];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-u)<=s*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-a)<=s*Math.max(1,Math.abs(i),Math.abs(a))}const Ht=lt,qt=pt,Xt=ht,zt=Tt,Wt=bt,Kt=ut,Yt=At,$t=function(){let t=it();return function(n,e,r,i,o,u){let a,s;for(e||(e=3),r||(r=0),s=i?Math.min(i*e+r,n.length):n.length,a=r;a<s;a+=e)t[0]=n[a],t[1]=n[a+1],t[2]=n[a+2],o(t,t,u),n[a]=t[0],n[a+1]=t[1],n[a+2]=t[2];return n}}();function Qt(){let t=new c(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Jt(t){let n=new c(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function Zt(t,n,e,r){let i=new c(4);return i[0]=t,i[1]=n,i[2]=e,i[3]=r,i}function tn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function nn(t,n,e,r,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t}function en(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t}function rn(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function on(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function un(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function an(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t}function sn(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t}function cn(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t}function fn(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t}function ln(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t}function pn(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function hn(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t}function dn(t,n){let e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(e*e+r*r+i*i+o*o)}function yn(t,n){let e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return e*e+r*r+i*i+o*o}function mn(t){let n=t[0],e=t[1],r=t[2],i=t[3];return Math.sqrt(n*n+e*e+r*r+i*i)}function _n(t){let n=t[0],e=t[1],r=t[2],i=t[3];return n*n+e*e+r*r+i*i}function vn(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function gn(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function En(t,n){let e=n[0],r=n[1],i=n[2],o=n[3],u=e*e+r*r+i*i+o*o;return u>0&&(u=1/Math.sqrt(u),t[0]=e*u,t[1]=r*u,t[2]=i*u,t[3]=o*u),t}function Tn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function bn(t,n,e,r){let i=n[0],o=n[1],u=n[2],a=n[3];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t[2]=u+r*(e[2]-u),t[3]=a+r*(e[3]-a),t}function An(t,n){var e,r,i,o,u,a;n=n||1;do{u=(e=2*f()-1)*e+(r=2*f()-1)*r}while(u>=1);do{a=(i=2*f()-1)*i+(o=2*f()-1)*o}while(a>=1);var s=Math.sqrt((1-u)/a);return t[0]=pn*e,t[1]=pn*r,t[2]=pn*i*s,t[3]=pn*o*s,t}function Rn(t,n,e){let r=n[0],i=n[1],o=n[2],u=n[3];return t[0]=e[0]*r+e[4]*i+e[8]*o+e[12]*u,t[1]=e[1]*r+e[5]*i+e[9]*o+e[13]*u,t[2]=e[2]*r+e[6]*i+e[10]*o+e[14]*u,t[3]=e[3]*r+e[7]*i+e[11]*o+e[15]*u,t}function Sn(t,n,e){let r=n[0],i=n[1],o=n[2],u=e[0],a=e[1],s=e[2],c=e[3],f=c*r+a*o-s*i,l=c*i+s*r-u*o,p=c*o+u*i-a*r,h=-u*r-a*i-s*o;return t[0]=f*c+h*-u+l*-s-p*-a,t[1]=l*c+h*-a+p*-u-f*-s,t[2]=p*c+h*-s+f*-a-l*-u,t[3]=n[3],t}function Nn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Mn(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function In(t,n){let e=t[0],r=t[1],i=t[2],o=t[3],u=n[0],a=n[1],c=n[2],f=n[3];return Math.abs(e-u)<=s*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-c)<=s*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-f)<=s*Math.max(1,Math.abs(o),Math.abs(f))}const On=rn,xn=on,wn=un,Cn=dn,Fn=yn,Ln=mn,Pn=_n,Un=function(){let t=Qt();return function(n,e,r,i,o,u){let a,s;for(e||(e=4),r||(r=0),s=i?Math.min(i*e+r,n.length):n.length,a=r;a<s;a+=e)t[0]=n[a],t[1]=n[a+1],t[2]=n[a+2],t[3]=n[a+3],o(t,t,u),n[a]=t[0],n[a+1]=t[1],n[a+2]=t[2],n[a+3]=t[3];return n}}();function Bn(){let t=new c(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function jn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function kn(t,n,e){e*=.5;let r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function Dn(t,n){let e=2*Math.acos(n[3]),r=Math.sin(e/2);return 0!=r?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e}function Vn(t,n,e){let r=n[0],i=n[1],o=n[2],u=n[3],a=e[0],s=e[1],c=e[2],f=e[3];return t[0]=r*f+u*a+i*c-o*s,t[1]=i*f+u*s+o*a-r*c,t[2]=o*f+u*c+r*s-i*a,t[3]=u*f-r*a-i*s-o*c,t}function Gn(t,n,e){e*=.5;let r=n[0],i=n[1],o=n[2],u=n[3],a=Math.sin(e),s=Math.cos(e);return t[0]=r*s+u*a,t[1]=i*s+o*a,t[2]=o*s-i*a,t[3]=u*s-r*a,t}function Hn(t,n,e){e*=.5;let r=n[0],i=n[1],o=n[2],u=n[3],a=Math.sin(e),s=Math.cos(e);return t[0]=r*s-o*a,t[1]=i*s+u*a,t[2]=o*s+r*a,t[3]=u*s-i*a,t}function qn(t,n,e){e*=.5;let r=n[0],i=n[1],o=n[2],u=n[3],a=Math.sin(e),s=Math.cos(e);return t[0]=r*s+i*a,t[1]=i*s-r*a,t[2]=o*s+u*a,t[3]=u*s-o*a,t}function Xn(t,n){let e=n[0],r=n[1],i=n[2];return t[0]=e,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-i*i)),t}function zn(t,n,e,r){let i,o,u,a,s,c=n[0],f=n[1],l=n[2],p=n[3],h=e[0],d=e[1],y=e[2],m=e[3];return(o=c*h+f*d+l*y+p*m)<0&&(o=-o,h=-h,d=-d,y=-y,m=-m),1-o>1e-6?(i=Math.acos(o),u=Math.sin(i),a=Math.sin((1-r)*i)/u,s=Math.sin(r*i)/u):(a=1-r,s=r),t[0]=a*c+s*h,t[1]=a*f+s*d,t[2]=a*l+s*y,t[3]=a*p+s*m,t}function Wn(t,n){let e=n[0],r=n[1],i=n[2],o=n[3],u=e*e+r*r+i*i+o*o,a=u?1/u:0;return t[0]=-e*a,t[1]=-r*a,t[2]=-i*a,t[3]=o*a,t}function Kn(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function Yn(t,n){let e,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(n[5]-n[7])*e,t[1]=(n[6]-n[2])*e,t[2]=(n[1]-n[3])*e;else{let r=0;n[4]>n[0]&&(r=1),n[8]>n[3*r+r]&&(r=2);let i=(r+1)%3,o=(r+2)%3;e=Math.sqrt(n[3*r+r]-n[3*i+i]-n[3*o+o]+1),t[r]=.5*e,e=.5/e,t[3]=(n[3*i+o]-n[3*o+i])*e,t[i]=(n[3*i+r]+n[3*r+i])*e,t[o]=(n[3*o+r]+n[3*r+o])*e}return t}function $n(t,n,e,r){let i=.5*Math.PI/180;n*=i,e*=i,r*=i;let o=Math.sin(n),u=Math.cos(n),a=Math.sin(e),s=Math.cos(e),c=Math.sin(r),f=Math.cos(r);return t[0]=o*s*f-u*a*c,t[1]=u*a*f+o*s*c,t[2]=u*s*c-o*a*f,t[3]=u*s*f+o*a*c,t}function Qn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const Jn=Jt,Zn=Zt,te=tn,ne=nn,ee=en,re=Vn,ie=pn,oe=Tn,ue=bn,ae=mn,se=ae,ce=_n,fe=ce,le=En,pe=Mn,he=In,de=function(){let t=it(),n=at(1,0,0),e=at(0,1,0);return function(r,i,o){let u=Mt(i,o);return u<-.999999?(It(t,n,i),Kt(t)<1e-6&&It(t,e,i),Nt(t,t),kn(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(It(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,le(r,r))}}(),ye=function(){let t=Bn(),n=Bn();return function(e,r,i,o,u,a){return zn(t,r,u,a),zn(n,i,o,a),zn(e,t,n,2*a*(1-a)),e}}(),me=function(){let t=function(){let t=new c(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}();return function(n,e,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],le(n,Yn(n,t))}}();function _e(){let t=new c(2);return t[0]=0,t[1]=0,t}function ve(t){let n=new c(2);return n[0]=t[0],n[1]=t[1],n}function ge(t,n){let e=new c(2);return e[0]=t,e[1]=n,e}function Ee(t,n){return t[0]=n[0],t[1]=n[1],t}function Te(t,n,e){return t[0]=n,t[1]=e,t}function be(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t}function Ae(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function Re(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t}function Se(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t}function Ne(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function Me(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function Ie(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t}function Oe(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t}function xe(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function we(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t}function Ce(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t}function Fe(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)}function Le(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function Pe(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function Ue(t){var n=t[0],e=t[1];return n*n+e*e}function Be(t,n){return t[0]=-n[0],t[1]=-n[1],t}function je(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}function ke(t,n){var e=n[0],r=n[1],i=e*e+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i),t}function De(t,n){return t[0]*n[0]+t[1]*n[1]}function Ve(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t}function Ge(t,n,e,r){var i=n[0],o=n[1];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t}function He(t,n){n=n||1;var e=2*f()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t}function qe(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[2]*i,t[1]=e[1]*r+e[3]*i,t}function Xe(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[2]*i+e[4],t[1]=e[1]*r+e[3]*i+e[5],t}function ze(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[3]*i+e[6],t[1]=e[1]*r+e[4]*i+e[7],t}function We(t,n,e){let r=n[0],i=n[1];return t[0]=e[0]*r+e[4]*i+e[12],t[1]=e[1]*r+e[5]*i+e[13],t}function Ke(t,n,e,r){let i=n[0]-e[0],o=n[1]-e[1],u=Math.sin(r),a=Math.cos(r);return t[0]=i*a-o*u+e[0],t[1]=i*u+o*a+e[1],t}function Ye(t,n){let e=t[0],r=t[1],i=n[0],o=n[1],u=e*e+r*r;u>0&&(u=1/Math.sqrt(u));let a=i*i+o*o;a>0&&(a=1/Math.sqrt(a));let s=(e*i+r*o)*u*a;return s>1?0:s<-1?Math.PI:Math.acos(s)}function $e(t){return"vec2("+t[0]+", "+t[1]+")"}function Qe(t,n){return t[0]===n[0]&&t[1]===n[1]}function Je(t,n){let e=t[0],r=t[1],i=n[0],o=n[1];return Math.abs(e-i)<=s*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-o)<=s*Math.max(1,Math.abs(r),Math.abs(o))}const Ze=Pe,tr=Ae,nr=Re,er=Se,rr=Fe,ir=Le,or=Ue,ur=function(){let t=_e();return function(n,e,r,i,o,u){let a,s;for(e||(e=2),r||(r=0),s=i?Math.min(i*e+r,n.length):n.length,a=r;a<s;a+=e)t[0]=n[a],t[1]=n[a+1],o(t,t,u),n[a]=t[0],n[a+1]=t[1];return n}}();var ar,sr,cr,fr,lr,pr=e(1),hr=e(8),dr=Object(hr.create)({checkTypes:!1,env:hr.env}),yr=function(t){return void 0==t||null==t},mr=function(t){return function(t){var n=t.url,e=t.crossOrigin;return Object(pr.Future)(function(t,r){var i=new Image;i.addEventListener("load",function(){return r(i)}),i.addEventListener("error",t),dr.map(function(t){return i.crossOrigin=t})(e),i.src=n})}({url:t,crossOrigin:function(t){return-1===t.indexOf("http://")&&-1===t.indexOf("https://")||function(t){return new(window.URL||window.webkitURL||window)(t)}(t).origin===window.location.origin}(t)?dr.Nothing:dr.Just("anonymous")})},_r=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},vr=function(t){return function(n){return function(t){return function(n){return Object(pr.Future)(function(e,r){var i=_r({method:"GET"},n),o=void 0!==i.xhr?i.xhr:new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===o.DONE){if(!o.status)return;200!==o.status?e(o):r(o)}};var u="form"!==i.requestType&&"query"!==i.requestType||null===i.data?"":function(t){var n="";if(!yr(t))for(var e in t)t.hasOwnProperty(e)&&!yr(t[e])&&(""!==n&&(n+="&"),n+=e+"="+encodeURIComponent(t[e]));return n}(i.data),a="query"===i.requestType&&""!==u?t+"?"+u:t;return o.open(i.method,a),o.responseType=i.responseType,void 0!==i.withCredentials&&(o.withCredentials=i.withCredentials),void 0!==i.headers&&i.headers.forEach(function(t){var n=t[0],e=t[1];o.setRequestHeader(n,e)}),"form"===i.requestType&&""!==u?(o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(u)):yr(i.data)?o.send():o.send(i.data),function(){return o.abort()}})}}(t)(n).map(function(t){return t.response})}},gr=function(t){return function(n){return function(e){return vr(n)(_r({},e,{responseType:t}))}}},Er=function(t){return function(n){return vr(n)({responseType:t})}},Tr=(gr("arraybuffer"),gr("text"),gr("blob"),gr("document"),Er("arraybuffer")),br=Er("json"),Ar=(Er("text"),Er("blob"),Er("document"),function(t){return function(n){return Object(pr.Future)(function(e,r){var i=new FileReader;return i.onload=function(){return r(i.result)},i.onerror=function(t){return e(t)},t([i,n]),function(){return i.abort()}})}});Ar(function(t){var n=t[0],e=t[1];return n.readAsArrayBuffer(e)}),Ar(function(t){var n=t[0],e=t[1];return n.readAsDataURL(e)}),Ar(function(t){var n=t[0],e=t[1];return n.readAsText(e)}),e.d(n,"GltfAnimationTargetPath",function(){return ar}),e.d(n,"GltfAnimationInterpolation",function(){return sr}),e.d(n,"GltfMaterialAlphaMode",function(){return cr}),e.d(n,"GltfNodeKind",function(){return fr}),e.d(n,"GltfPrimitiveDrawKind",function(){return lr}),e.d(n,"GltfIblExtensionName",function(){return Rr}),e.d(n,"GltfLightsExtensionName",function(){return Sr}),e.d(n,"GltfUnlitExtensionName",function(){return Nr}),e.d(n,"CameraKind",function(){return Mr}),e.d(n,"NodeKind",function(){return Ir}),e.d(n,"LightKind",function(){return Or}),e.d(n,"WebGlConstants",function(){return xr}),e.d(n,"createVec2",function(){return wr}),e.d(n,"createVec4",function(){return Cr}),e.d(n,"createVec3",function(){return Fr}),e.d(n,"createMat4",function(){return Lr}),e.d(n,"createQuat",function(){return Pr}),e.d(n,"createIdentityMat4",function(){return Ur}),e.d(n,"getTrsFromMatrix",function(){return Br}),e.d(n,"getMatrixFromTrs",function(){return jr}),e.d(n,"getModelMatrix",function(){return kr}),e.d(n,"getNormalMatrix",function(){return Dr}),e.d(n,"getViewMatrices",function(){return Vr}),e.d(n,"updateTransform",function(){return Gr}),e.d(n,"getCameraProjection",function(){return Hr}),e.d(n,"getCameraView",function(){return qr}),e.d(n,"getCameraPosition",function(){return Xr}),e.d(n,"updateCameraWithTransform",function(){return zr}),e.d(n,"filterNodeDeep",function(){return Wr}),e.d(n,"filterNodesDeep",function(){return Kr}),e.d(n,"forEachNode",function(){return Yr}),e.d(n,"forEachNodes",function(){return $r}),e.d(n,"countNodes",function(){return Qr}),e.d(n,"findNode",function(){return Jr}),e.d(n,"mapNode",function(){return Zr}),e.d(n,"mapNodeWithParent",function(){return ti}),e.d(n,"mapNodesWithParent",function(){return ni}),e.d(n,"mapNodes",function(){return ei}),e.d(n,"updateNodeTransforms",function(){return ri}),e.d(n,"updateNodeListTransforms",function(){return ii}),e.d(n,"createPointLight",function(){return oi}),e.d(n,"gltf_setAnimationTime",function(){return _i}),e.d(n,"gltf_createAnimator",function(){return vi}),e.d(n,"gltf_load",function(){return co}),e.d(n,"gltf_serializeScene",function(){return fo}),e.d(n,"gltf_parseScene",function(){return lo}),e.d(n,"gltf_updatePrimitiveShaderConfig",function(){return po}),e.d(n,"gltf_updateNodeTransforms",function(){return ho}),e.d(n,"gltf_findNodeById",function(){return yo}),e.d(n,"gltf_setJointTransforms",function(){return mo}),e.d(n,"createAttributes",function(){return vo}),e.d(n,"createWebGlBuffers",function(){return go}),e.d(n,"makeFramebufferPicker",function(){return Eo}),e.d(n,"createWebGlRenderer",function(){return So}),e.d(n,"activateShader",function(){return Yi}),e.d(n,"createShader",function(){return $i}),e.d(n,"createTextureSwitcher",function(){return bi}),e.d(n,"createTextureFromTarget",function(){return Ai}),e.d(n,"createCubeTextureFromTarget",function(){return Ri}),e.d(n,"textureSetterSimple",function(){return Si}),e.d(n,"createSimpleTextureFromTarget",function(){return Ni}),e.d(n,"createUniforms",function(){return Xi}),e.d(n,"getVersionString",function(){return bo}),e.d(n,"getMajorVersion",function(){return Ro}),e.d(n,"createVertexArrays",function(){return To}),function(t){t[t.TRANSLATION=1]="TRANSLATION",t[t.ROTATION=2]="ROTATION",t[t.SCALE=3]="SCALE",t[t.WEIGHTS=4]="WEIGHTS"}(ar||(ar={})),function(t){t[t.LINEAR=1]="LINEAR",t[t.STEP=2]="STEP",t[t.CUBICSPLINE=3]="CUBICSPLINE"}(sr||(sr={})),function(t){t[t.OPAQUE=1]="OPAQUE",t[t.MASK=2]="MASK",t[t.BLEND=3]="BLEND"}(cr||(cr={})),function(t){t[t.MESH=3]="MESH",t[t.SKIN=4]="SKIN"}(fr||(fr={})),function(t){t[t.ELEMENTS=1]="ELEMENTS",t[t.ARRAY=2]="ARRAY"}(lr||(lr={}));const Rr="PURE3D_IBL",Sr="KHR_lights",Nr="KHR_Unlit";var Mr,Ir,Or,xr;!function(t){t[t.PERSPECTIVE=0]="PERSPECTIVE",t[t.ORTHOGRAPHIC=1]="ORTHOGRAPHIC"}(Mr||(Mr={})),function(t){t[t.CAMERA=1]="CAMERA",t[t.LIGHT=2]="LIGHT"}(Ir||(Ir={})),function(t){t[t.Ambient=1]="Ambient",t[t.Directional=2]="Directional",t[t.Point=3]="Point",t[t.Spot=4]="Spot"}(Or||(Or={})),function(t){t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_ATTRIBUTE_MAX_LENGTH=35722]="ACTIVE_ATTRIBUTE_MAX_LENGTH",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_UNIFORM_MAX_LENGTH=35719]="ACTIVE_UNIFORM_MAX_LENGTH",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALPHA=6406]="ALPHA",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.ALWAYS=519]="ALWAYS",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.BACK=1029]="BACK",t[t.BLEND=3042]="BLEND",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.BYTE=5120]="BYTE",t[t.CCW=2305]="CCW",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CULL_FACE=2884]="CULL_FACE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.CW=2304]="CW",t[t.DECR=7683]="DECR",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DITHER=3024]="DITHER",t[t.DONT_CARE=4352]="DONT_CARE",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.EQUAL=514]="EQUAL",t[t.FASTEST=4353]="FASTEST",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRONT=1028]="FRONT",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.GEQUAL=518]="GEQUAL",t[t.GREATER=516]="GREATER",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.INCR=7682]="INCR",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.INFO_LOG_LENGTH=35716]="INFO_LOG_LENGTH",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVERT=5386]="INVERT",t[t.KEEP=7680]="KEEP",t[t.LEQUAL=515]="LEQUAL",t[t.LESS=513]="LESS",t[t.LINEAR=9729]="LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.NEAREST=9728]="NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.NEVER=512]="NEVER",t[t.NICEST=4354]="NICEST",t[t.NONE=0]="NONE",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.NO_ERROR=0]="NO_ERROR",t[t.NUM_COMPRESSED_TEXTURE_FORMATS=34466]="NUM_COMPRESSED_TEXTURE_FORMATS",t[t.ONE=1]="ONE",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.POINTS=0]="POINTS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.RED_BITS=3410]="RED_BITS",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERER=7937]="RENDERER",t[t.REPEAT=10497]="REPEAT",t[t.REPLACE=7681]="REPLACE",t[t.RGB=6407]="RGB",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.RGBA=6408]="RGBA",t[t.RGBA4=32854]="RGBA4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.SHADER_COMPILER=36346]="SHADER_COMPILER",t[t.SHADER_SOURCE_LENGTH=35720]="SHADER_SOURCE_LENGTH",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.SHORT=5122]="SHORT",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8",t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.VENDOR=7936]="VENDOR",t[t.VERSION=7938]="VERSION",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.VIEWPORT=2978]="VIEWPORT",t[t.ZERO=0]="ZERO"}(xr||(xr={}));const wr=()=>new Float64Array(2),Cr=()=>new Float64Array(4),Fr=()=>new Float64Array(3),Lr=()=>new Float64Array(16),Pr=()=>new Float64Array(4),Ur=()=>r.identity(Lr()),Br=t=>{const n=r.getScaling(Fr(),t),e=r.scale(Lr(),t,[1/n[0],1/n[1],1/n[2]]);return{translation:r.getTranslation(Fr(),t),rotation:r.getRotation(Cr(),e),scale:n}},jr=t=>r.fromRotationTranslationScale(Lr(),t.rotation,t.translation,t.scale),kr=t=>n=>t?r.multiply(Lr(),t,n):n.slice(),Dr=t=>r.transpose(r.create(),r.invert(r.create(),t)),Vr=t=>n=>{const e=r.multiply(r.create(),t.view,n);return{modelViewMatrix:e,modelViewProjectionMatrix:r.multiply(r.create(),t.projection,e)}},Gr=t=>n=>e=>{const r=t.updateLocal?jr(e.trs):e.localMatrix,i=t.updateModel?kr(n)(r):e.modelMatrix,o=t.updateModel&&e.normalMatrix?Dr(i):void 0,{modelViewMatrix:u,modelViewProjectionMatrix:a}=t.updateView?Vr(t.camera)(i):e;return Object.assign({},e,{localMatrix:r,modelMatrix:i,normalMatrix:o,modelViewMatrix:u,modelViewProjectionMatrix:a})},Hr=t=>t.kind==Mr.ORTHOGRAPHIC?(t=>{const n=Lr(),e=t.xmag,r=t.ymag,i=t.znear,o=t.zfar;return n[0]=1/e,n[5]=1/r,n[10]=2/(i-o),n[14]=(o+i)/(i-o),n[15]=1,n})(t):(t=>{const n=Lr(),e=t.aspectRatio,r=t.yfov,i=t.znear,o=t.zfar;return n[0]=1/(e*Math.tan(.5*r)),n[5]=1/Math.tan(.5*r),n[10]=void 0===o?-1:(o+i)/(i-o),n[11]=-1,n[14]=void 0===o?-2*i:2*o*i/(i-o),n})(t),qr=t=>r.invert(Lr(),t),Xr=t=>r.getTranslation(Fr(),t),zr=t=>n=>Object.assign({},n,{position:r.getTranslation(Fr(),t.localMatrix),view:qr(t.modelMatrix),projection:Hr(n)}),Wr=t=>n=>{if(void 0!==n&&t(n))return n.children?Object.assign({},n,{children:n.children.map(Wr(t)).filter(t=>t)}):n},Kr=t=>n=>n.map(Wr(t)).filter(t=>t),Yr=t=>n=>{!0!==t(n)&&n.children&&n.children.forEach(Yr(t))},$r=t=>n=>n.forEach(Yr(t)),Qr=t=>{let n=0;return $r(()=>(n++,null))(t),n},Jr=t=>n=>{let e;const r=n=>{if(t(n))return e=n,!0};return Array.isArray(n)?$r(r)(n):Yr(r)(n),e},Zr=t=>n=>{const e=t(n);return e.children?Object.assign(e,{children:e.children.map(Zr(t))}):e},ti=t=>n=>e=>{const r=t(n)(e);return r.children?Object.assign(r,{children:r.children.map(ti(t)(r))}):r},ni=t=>n=>e=>e.map(ti(t)(n)),ei=t=>n=>n.map(Zr(t)),ri=t=>n=>e=>ti(n=>e=>{const r=n?n.transform.modelMatrix:void 0,i=Gr(t)(r)(e.transform);return Object.assign({},e,{transform:i})})(n)(e),ii=t=>n=>e=>ni(ri(t))(n)(e),oi=()=>{},ui=({v0:t,v1:n,t:e})=>{if("number"==typeof t&&"number"==typeof n)return t*(1-e)+n*e;const r=t,u=n;if(r.length!==u.length)throw new Error("different length of animation values");switch(r.length){case 1:return ui({v0:r[0],v1:u[0],t:e});case 2:return a.lerp(a.create(),r,u,e);case 3:return i.lerp(i.create(),r,u,e);case 4:return o.lerp(o.create(),r,u,e)}},ai=(t=>n=>e=>{const r=n.length-1,i=([r,i])=>{if(r===i)return!1;if(r<0||i<1)return!1;const o=t(n[r]),u=t(n[i]);return e>o&&e<u},o=([r,u])=>{if(u>=r){const a=0|r+(u-r)/2,s=t(n[a]);return s==e?a:i([a-1,a])?[a-1,a]:i([a,a+1])?[a,a+1]:o(s>e?[r,a-1]:[a+1,u])}return-1};return o([0,r])})(t=>t.timing),si={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ci={[xr.BYTE]:1,[xr.UNSIGNED_BYTE]:1,[xr.SHORT]:2,[xr.UNSIGNED_SHORT]:2,[xr.UNSIGNED_INT]:4,[xr.FLOAT]:4},fi=({buffer:t,componentType:n})=>{switch(n){case xr.BYTE:return new Int8Array(t);case xr.UNSIGNED_BYTE:return new Uint8Array(t);case xr.SHORT:return new Int16Array(t);case xr.UNSIGNED_SHORT:return new Uint16Array(t);case xr.UNSIGNED_INT:return new Uint32Array(t);case xr.FLOAT:return new Float32Array(t);default:throw new Error("unknown accessor component type!")}},li=({info:t,buffers:n})=>void 0===t.bufferViewIndex?fi({buffer:new ArrayBuffer(t.bufferLength),componentType:t.componentType}):fi({buffer:n[t.bufferIndex].slice(t.byteOffset,t.byteOffset+t.bufferLength),componentType:t.componentType}),pi=({gltf:t,info:n,buffers:e})=>{const r=li({info:n,buffers:e});if(n.sparse){const t=si[n.accessorType],i=li({info:n.sparse.indices,buffers:e}),o=li({info:n.sparse.values,buffers:e});i.map(n=>n*t).forEach((n,e)=>{for(let i=0;i<t;i++)r[n+i]=o[i+e*t]})}return r},hi=({gltf:t,accessorId:n})=>{const e=t.accessors[n],r=(({gltf:t,accessor:n})=>{const e=n.count*si[n.type]*ci[n.componentType];if(void 0===n.bufferView){if(void 0===n.sparse)throw new Error("accessor must either be sparse or have a buffer view");return{bufferLength:e,componentType:n.componentType,accessorType:n.type}}const r=t.bufferViews[n.bufferView],i=(void 0===r.byteOffset?0:r.byteOffset)+(void 0===n.byteOffset?0:n.byteOffset);return{bufferLength:(r.byteStride?r.byteStride:0)*si[n.type]*ci[n.componentType]+e,componentType:n.componentType,bufferViewIndex:n.bufferView,bufferIndex:r.buffer,byteOffset:i,accessorType:n.type}})({gltf:t,accessor:e});return e.sparse&&(r.sparse={indices:(({gltf:t,accessor:n})=>{const e=n.sparse.indices,r=n.sparse.count*ci[e.componentType],i=t.bufferViews[e.bufferView],o=(void 0===i.byteOffset?0:i.byteOffset)+(void 0===e.byteOffset?0:e.byteOffset);return{bufferLength:r,componentType:e.componentType,bufferViewIndex:n.bufferView,bufferIndex:i.buffer,byteOffset:o,accessorType:n.type}})({gltf:t,accessor:e}),values:(({gltf:t,accessor:n})=>{const e=n.sparse.values,r=n.sparse.count*si[n.type]*ci[n.componentType],i=t.bufferViews[e.bufferView],o=(void 0===i.byteOffset?0:i.byteOffset)+(void 0===e.byteOffset?0:e.byteOffset);return{bufferLength:r,componentType:n.componentType,bufferViewIndex:n.bufferView,bufferIndex:i.buffer,byteOffset:o,accessorType:n.type}})({gltf:t,accessor:e})}),r},di={[ar.WEIGHTS]:"weights",[ar.TRANSLATION]:"translation",[ar.ROTATION]:"rotation",[ar.SCALE]:"scale"},yi={weights:ar.WEIGHTS,translation:ar.TRANSLATION,rotation:ar.ROTATION,scale:ar.SCALE},mi={linear:sr.LINEAR,step:sr.STEP,cubicspline:sr.CUBICSPLINE},_i=t=>n=>e=>{const r=ai(t.keyframes)(n);if(-1===r)return;const i=Array.isArray(r)?(({k0:t,k1:n,time:e,interpolation:r,targetPath:i})=>{const o=t.values,a=n.values,s=(e-t.timing)/(n.timing-t.timing);switch(r){case sr.LINEAR:return i===ar.ROTATION?u.slerp(u.create(),o,a,s):ui({v0:o,v1:a,t:s});case sr.STEP:return o;case sr.CUBICSPLINE:throw new Error("cubicspline is not supported yet!");default:throw new Error("unsupported interpolation ")}})({k0:t.keyframes[r[0]],k1:t.keyframes[r[1]],interpolation:t.interpolation,targetPath:t.targetPath,time:n}):t.keyframes[r].values;return Object.assign({},e,t.targetPath===ar.WEIGHTS?{morphWeights:i}:{transform:Object.assign({},e.transform,{trs:Object.assign({},e.transform.trs,{[di[t.targetPath]]:i})})})},vi=t=>({loop:n})=>{const e=new Map;let r;return t.forEach((t,n)=>e.set(n,0)),i=>o=>{const u=void 0===r?0:(i-r)/1e3;return r=i,t.forEach((t,r)=>{let i=e.get(r)+u;if(!0===n)for(;i>t.timeMax;)i-=t.timeMax;i>=t.timeMin&&i<=t.timeMax&&(o=ei(n=>-1!==n.animationIds.indexOf(r)?_i(t)(i)(n):n)(o)),e.set(r,i)}),o}},gi=["a_Position","a_Normal","a_Tangent","a_UV","a_Color","a_Morph_0","a_Morph_1","a_Morph_2","a_Morph_3","a_Morph_4","a_Morph_5","a_Morph_6","a_Morph_7","a_Skin_Joint","a_Skin_Weight"],Ei=Symbol(),Ti=t=>{if(!0!==t.extras[Ei]){if(t.version>1)throw new Error("GLTF Renderering only supports WebGL 1.0 for now");gi.forEach(n=>{t.attributes.globalLocations.add(n)}),t.getExtension("OES_standard_derivatives"),t.getExtension("EXT_shader_texture_lod"),t.getExtension("EXT_SRGB"),t.getExtension("OES_element_index_uint"),t.extras[Ei]=!0}},bi=t=>{const n=new Map,e=e=>r=>i=>(n.has(r)&&(()=>{const t=n.get(r);return t.target===e&&t.texture===i})()||(t.activeTexture(t.TEXTURE0+r),t.bindTexture(e,i),n.set(r,{target:e,texture:i})),i);return{switchTexture:e(xr.TEXTURE_2D),switchCubeTexture:e(xr.TEXTURE_CUBE_MAP)}},Ai=t=>n=>{const{gl:e}=t,r=e.createTexture(),i=xr.TEXTURE_2D,o=t.dataSize||e.UNSIGNED_BYTE;return e.bindTexture(i,r),t.setParameters(t),(Array.isArray(n)?n:[n]).forEach((n,r)=>{n instanceof Element?e.texImage2D(i,r,t.format,t.format,o,n):e.texImage2D(i,r,t.format,t.width,t.height,0,t.format,o,n)}),r},Ri=t=>n=>{const{gl:e}=t,r=e.createTexture(),i=xr.TEXTURE_CUBE_MAP,o=t.dataSize||e.UNSIGNED_BYTE;return e.bindTexture(i,r),t.setParameters(t),(Array.isArray(n)?n:[n]).forEach((n,r)=>{Object.keys(n).forEach(i=>{const u=(t=>{switch(i){case"posX":return xr.TEXTURE_CUBE_MAP_POSITIVE_X;case"negX":return xr.TEXTURE_CUBE_MAP_NEGATIVE_X;case"posY":return xr.TEXTURE_CUBE_MAP_POSITIVE_Y;case"negY":return xr.TEXTURE_CUBE_MAP_NEGATIVE_Y;case"posZ":return xr.TEXTURE_CUBE_MAP_POSITIVE_Z;case"negZ":return xr.TEXTURE_CUBE_MAP_NEGATIVE_Z}})(),a=n[i];a instanceof Element?e.texImage2D(u,r,t.format,t.format,o,a):e.texImage2D(u,r,t.format,t.width,t.height,0,t.format,o,a)})}),r},Si=t=>n=>{const{gl:e,width:r,height:i}=n,o=t=>0==(t&t-1);t.flipY?e.pixelStorei(xr.UNPACK_FLIP_Y_WEBGL,!0):e.pixelStorei(xr.UNPACK_FLIP_Y_WEBGL,!1),o(r)&&o(i)&&!0===t.useMips?e.generateMipmap(xr.TEXTURE_2D):(e.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_WRAP_S,t.wrapS?t.wrapS:xr.CLAMP_TO_EDGE),e.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_WRAP_T,t.wrapT?t.wrapT:xr.CLAMP_TO_EDGE),e.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_MIN_FILTER,t.filterMin?t.filterMin:xr.LINEAR),e.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_MAG_FILTER,t.filterMag?t.filterMag:xr.LINEAR))},Ni=t=>n=>Ai({gl:t.gl,format:t.alpha?xr.RGBA:xr.RGB,setParameters:Si(t)})(n),Mi=t=>{--t;for(var n=1;n<32;n<<=1)t|=t>>n;return t+1},Ii={filterMin:xr.LINEAR,filterMag:xr.LINEAR,wrapS:xr.REPEAT,wrapT:xr.REPEAT},Oi=t=>{const n=t.lastIndexOf("/")+1,e=t.lastIndexOf("\\")+1;return n||e?t.substr(0,n>e?n:e):t},xi=t=>t.extensionsUsed&&-1!==t.extensionsUsed.indexOf(Rr)?t.extensions[Rr]:null,wi=t=>t.extensionsUsed&&-1!==t.extensionsUsed.indexOf(Sr)?t.extensions[Sr].lights:null,Ci=t=>{const n={kind:{ambient:Or.Ambient,directional:Or.Directional,point:Or.Point,spot:Or.Spot}[t.type],color:t.color?Float64Array.from(t.color):Float64Array.from([1,1,1]),intensity:void 0!==t.intensity?t.intensity:1};return n.kind===Or.Spot&&(n.innerConeAngle=t.spot&&void 0!==t.spot.innerConeAngle?t.spot.innerConeAngle:0,n.outerConeAngle=t.spot&&void 0!==t.spot.outerConeAngle?t.spot.outerConeAngle:Math.PI/4),n},Fi=[{loadAssets:({gltf:t,coreData:n})=>{const e=xi(t),r=e?e.path:"";return""===r?pr.Future.of(n):br(r).chain(t=>{const n=Oi(r),e=Array();e.push(t.brdf.url),Object.keys(t.cubeMaps).forEach(n=>{t.cubeMaps[n].urls.forEach(t=>{t.forEach(t=>{e.push(n+"/"+t)})})});const i=e.map(t=>mr(n+t).map(n=>({url:t,img:n})));return Object(pr.parallel)(1/0,i).map(t=>{const n=new Map;return t.forEach(t=>{n.set(t.url,t.img)}),n}).map(n=>({jsonData:t,imageMap:n}))}).map(t=>Object.assign({},n,{extensions:Object.assign({},n.extensions,{ibl:t})}))},createData:({gltf:t,assets:n,renderer:e})=>t=>{if(!n.extensions.ibl)return t;Ti(e);const r=e.gl,{jsonData:i,imageMap:o}=n.extensions.ibl,u={brdf:Ai({gl:r,format:i.brdf.colorSpace,setParameters:()=>{r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.texParameteri(xr.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(xr.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(xr.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(xr.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)}})(o.get(i.brdf.url)),cubeMaps:{},useLod:!1};return Object.keys(i.cubeMaps).forEach(t=>{i.cubeMaps[t].urls.length>1&&(u.useLod=!0),u.cubeMaps[t]=(t=>n=>({colorSpace:e,urls:i})=>{const o=["posX","negX","posY","negY","posZ","negZ"];let u=[];return i.forEach(e=>{const r={};e.forEach((e,i)=>{const u=t.get(n+"/"+e);r[o[i]]=u}),u.push(r)}),Ri({gl:r,format:e,setParameters:t=>{r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),i.length>1?(r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR))}})(u)})(o)(t)(i.cubeMaps[t])}),Object.assign({},t,{extensions:Object.assign({},t.extensions,{ibl:u})})},createScene:t=>n=>n=>{const e=xi(t),r=e?e.settings:void 0;return r?Object.assign({},n,{extensions:Object.assign({},n.extensions,{ibl:r})}):n},createNode:t=>t=>t=>t,initialShaderConfig:({data:t,primitive:n})=>n=>t.extensions.ibl?Object.assign({},n,{extensions:Object.assign({},n.extensions,{ibl:{useLod:t.extensions.ibl.useLod}})}):n,runtimeShaderConfig:({data:t,scene:n,primitive:e})=>t=>t,shaderSource:({data:t,primitive:n})=>n=>{if(t.extensions.ibl){const e=[];e.push("USE_IBL"),t.extensions.ibl.useLod&&e.push("USE_TEX_LOD");const r=e.map(t=>`#define ${t} 1\n`).join("");return Object.assign({},n,{vertex:r+n.vertex,fragment:r+n.fragment})}return n}},{loadAssets:({gltf:t,coreData:n})=>pr.Future.of(n),createData:({gltf:t,assets:n,renderer:e})=>t=>t,createScene:t=>n=>e=>{const r=wi(t),i=n.extensions&&n.extensions.hasOwnProperty(Sr)?n.extensions[Sr]:void 0;if(!r||!i)return e;const o=Ci(r[i.light]);if(o.kind!==Or.Ambient)throw new Error("scene light is not ambient");return Object.assign({},e,{light:o})},createNode:t=>n=>e=>{const r=wi(t),i=n.extensions&&n.extensions.hasOwnProperty(Sr)?n.extensions[Sr]:void 0;if(!r||!i)return e;const o=Ci(r[i.light]);if(e.kind)throw new Error("node cannot be both a light and some other kind...");return Object.assign({},e,{kind:Ir.LIGHT,light:o})},initialShaderConfig:({data:t,primitive:n})=>t=>t,runtimeShaderConfig:({data:t,scene:n,primitive:e})=>t=>{let e=0,r=0,i=0,o=!!n.light;n.nodes.forEach(t=>{if(t.kind===Ir.LIGHT)switch(t.light.kind){case Or.Ambient:o=!0;break;case Or.Directional:r++;break;case Or.Point:e++;break;case Or.Spot:i++}});const u={nPointLights:e,nDirectionalLights:r,nSpotLights:i,hasAmbient:o};return Object.assign({},t,{extensions:Object.assign({},t.extensions,{lights:u})})},shaderSource:({data:t,primitive:n})=>t=>{if(n.shaderConfig.extensions.lights){const e=[],{hasAmbient:r,nPointLights:i,nDirectionalLights:o,nSpotLights:u}=n.shaderConfig.extensions.lights;if((i>10||o>10||u>10)&&console.warn("Only 10 lights of each kind are supported"),!(r||i||o||u))return t;e.push("USE_KHR_LIGHTS"),r&&e.push("KHR_LIGHTS_AMBIENT");const a=e.map(t=>`#define ${t} 1\n`).join("");return Object.assign({},t,{vertex:(t=>t.replace("%KHR_LIGHTS_VARS%","").replace("%KHR_LIGHTS_FUNCS%",""))(a+t.vertex),fragment:(t=>n=>(t.shaderConfig.extensions.lights.nDirectionalLights,n.replace("%KHR_LIGHTS_VARS%","").replace("%KHR_LIGHTS_FUNCS%","")))(n)(a+t.fragment)})}return t}}],Li=({basePath:t,gltf:n,glbBuffers:e})=>Fi.map(t=>t.loadAssets).reduce((t,e)=>(t=t.chain(t=>e({gltf:n,coreData:t})),t),(({basePath:t,gltf:n,glbBuffers:e})=>Object(pr.parallel)(1/0,n.buffers.map((n,r)=>void 0!==e&&r<e.length?pr.Future.of(e[r].slice(0,n.byteLength)):0===n.uri.indexOf("data:")?Tr(n.uri):Tr(t+n.uri))))({basePath:t,gltf:n,glbBuffers:e}).chain(e=>(({basePath:t,gltf:n,buffers:e})=>Object(pr.parallel)(1/0,n.images&&n.images.length?n.images.map(r=>void 0!==r.bufferView?function(t){var n=t.data,e=t.mimeType;return Object(pr.Future)(function(t,r){var i=new Image;i.addEventListener("load",function(){return r(i)}),i.addEventListener("error",t);var o=new Uint8Array(n),u=new Blob([o],{type:e}),a=window.URL||window.webkitURL;i.src=a.createObjectURL(u)})}({data:(t=>{const r=n.bufferViews[t],i=r.buffer,o=void 0===r.byteOffset?0:r.byteOffset;return e[i].slice(o,o+r.byteLength)})(r.bufferView),mimeType:r.mimeType}):0===r.uri.indexOf("data:")?mr(r.uri):mr(t+r.uri)):[]))({basePath:t,gltf:n,buffers:e}).map(t=>({buffers:e,imageElements:t,extensions:{}})))),Pi=({gltf:t,assets:n,renderer:e,config:r})=>{Ti(e);const{imageElements:i,buffers:o}=n,u=(({renderer:t,gltf:n,imageElements:e})=>{const r=new Map,{gl:i}=t;return n.textures&&n.textures.forEach((o,u)=>{const a=Object.assign({},Ii,void 0===o.sampler?void 0:n.samplers[o.sampler]),s=(({renderer:t,gltf:n,textureId:e})=>{const r=xr.RGBA;for(let t=0;t<n.materials.length;t++){const r=n.materials[t];if(r.emissiveTexture&&r.emissiveTexture.index===e)return 35906;if(r.normalTexture&&r.normalTexture.index===e)return xr.RGBA;if(r.occlusionTexture&&r.occlusionTexture.index===e)return xr.RGBA;if(r.pbrMetallicRoughness){if(r.pbrMetallicRoughness.baseColorTexture&&r.pbrMetallicRoughness.baseColorTexture.index===e)return 35906;if(r.pbrMetallicRoughness.metallicRoughnessTexture&&r.pbrMetallicRoughness.metallicRoughnessTexture.index===e)return xr.RGBA}}return r})({renderer:t,gltf:n,textureId:u}),c=e[o.source],{wrapS:f,wrapT:l,filterMin:p,filterMag:h}=a,d=(({wrapS:t,wrapT:n,filterMin:e,filterMag:r,sampler:i})=>t===xr.REPEAT||t===xr.MIRRORED_REPEAT||n===xr.REPEAT||n===xr.MIRRORED_REPEAT||e===xr.NEAREST_MIPMAP_NEAREST||e===xr.NEAREST_MIPMAP_LINEAR||e===xr.LINEAR_MIPMAP_NEAREST||e===xr.LINEAR_MIPMAP_LINEAR)({wrapS:f,wrapT:l,filterMin:p,filterMag:h,sampler:a})&&!(t=>{const n=t=>0==(t&t-1);return n(t.naturalWidth)&&n(t.naturalHeight)})(c)?(t=>{const n=document.createElement("canvas");return n.width=Mi(t.width),n.height=Mi(t.height),n.getContext("2d").drawImage(t,0,0,n.width,n.height),n})(c):c,y=Ai({gl:i,format:s,setParameters:()=>{i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),i.texParameteri(xr.TEXTURE_2D,i.TEXTURE_WRAP_S,f),i.texParameteri(xr.TEXTURE_2D,i.TEXTURE_WRAP_T,l),i.texParameteri(xr.TEXTURE_2D,i.TEXTURE_MIN_FILTER,p),i.texParameteri(xr.TEXTURE_2D,i.TEXTURE_MAG_FILTER,h)}})(d);r.set(u,y)}),r})({renderer:e,gltf:t,imageElements:i}),a=(({gltf:t,buffers:n,renderer:e})=>{const r=new Map,i=new Map,o=[];t.meshes&&t.meshes.forEach(t=>{t.primitives.forEach(t=>{void 0!==t.indices&&o.push(t.indices)})}),t.accessors.map((t,n)=>({accessor:t,accessorId:n})).filter(({accessorId:n})=>(({gltf:t,accessorId:n})=>!!t.nodes&&t.nodes.some(e=>void 0!==e.mesh&&t.meshes[e.mesh].primitives.some(t=>t.indices===n||Object.keys(t.attributes).some(e=>t.attributes[e]===n)||t.targets&&t.targets.some(t=>Object.keys(t).some(e=>t[e]===n)))))({gltf:t,accessorId:n})).forEach(({accessor:u,accessorId:a})=>{const s=-1!==o.indexOf(a),c=hi({gltf:t,accessorId:a}),f=(({gltf:t,accessor:n,info:e})=>{const r=si[n.type],i=void 0===n.bufferView?void 0:t.bufferViews[n.bufferView],o=void 0===i||void 0===i.byteStride?0:i.byteStride;return{size:r,type:n.componentType,normalized:void 0!==n.normalized&&n.normalized,stride:o,offset:e.sparse||!n.byteOffset?0:n.byteOffset}})({gltf:t,accessor:u,info:c});let l,p;if(u.sparse)l=Symbol(`accessor ${a}`),p=pi({gltf:t,buffers:n,info:c}).buffer;else{if(!r.has(c.bufferViewIndex)){const e=t.bufferViews[c.bufferViewIndex],i=e.byteOffset?e.byteOffset:0;r.set(c.bufferViewIndex,{rendererBufferId:Symbol(`${c.bufferViewIndex}`),buffer:n[c.bufferIndex].slice(i,i+e.byteLength)})}const e=r.get(c.bufferViewIndex);l=e.rendererBufferId,p=e.buffer}e.buffers.assign(l)({target:s?xr.ELEMENT_ARRAY_BUFFER:xr.ARRAY_BUFFER,usagePattern:xr.STATIC_DRAW,data:p}),i.set(a,{strategy:f,rendererBufferId:l})});const u=new Map;return{accessorLookup:i,vaoIdLookup:u}})({gltf:t,buffers:o,renderer:e}),s=(({gltf:t,buffers:n})=>{const e=new Map;let r=0;return t.animations&&t.animations.forEach(i=>{i.channels.filter(t=>void 0!==t.target.node).forEach(o=>{const u=yi[o.target.path.toLowerCase()],a=i.samplers[o.sampler],s=mi[a.interpolation?a.interpolation.toLowerCase():"linear"],c=t.accessors[a.input],f=pi({gltf:t,buffers:n,info:hi({gltf:t,accessorId:a.input})}),l=pi({gltf:t,buffers:n,info:hi({gltf:t,accessorId:a.output})}),p=t.accessors[a.output];let h=new Array(f.length);f.forEach((t,n)=>{const e=u===ar.WEIGHTS?l.length/f.length:si[p.type];h[n]={timing:t,values:1===e?l[n]:l.subarray(n*e,(n+1)*e)}}),e.set(r++,{keyframes:h,interpolation:s,targetPath:u,timeMin:c.min[0],timeMax:c.max[0]})})}),e})({gltf:t,buffers:o}),c=new Map;return Fi.map(t=>t.createData).reduce((r,i)=>(r=i({gltf:t,assets:n,renderer:e})(r),r),{original:t,animations:s,attributes:a,textures:u,shaders:c,initConfig:r,extensions:{}})},Ui=function(){var t=new Array(128),n=String.fromCodePoint||String.fromCharCode,e=[];return function(r){var i,o,u=r.length;e.length=0;for(var a=0;a<u;)(o=r[a++])<=127?i=o:o<=223?i=(31&o)<<6|63&r[a++]:o<=239?i=(15&o)<<12|(63&r[a++])<<6|63&r[a++]:String.fromCodePoint?i=(7&o)<<18|(63&r[a++])<<12|(63&r[a++])<<6|63&r[a++]:(i=63,a+=3),e.push(t[i]||(t[i]=n(i)));return e.join("")}}(),Bi=t=>{const n=new Uint8Array(t),e=window.TextDecoder?new TextDecoder("utf-8").decode(n):Ui(n);return JSON.parse(e)},ji=t=>n=>{const e=new DataView(n,t,8),r=e.getUint32(0,!0),i=e.getUint32(4,!0),o=t+8,u=o+r,a=n.slice(o,u),s=[1313821514===i?Bi(a):5130562===i?a:null,u];return null===s[0]&&console.log(`unknown chunk type: ${i}`),s},ki=t=>(t=>1179937895===(t=>{const n=new DataView(t,0,12);return{magic:n.getUint32(0,!0),version:n.getUint32(4,!0),length:n.getUint32(8,!0)}})(t).magic)(t)?(t=>{const[n,e]=ji(12)(t),r=new Array;let i=e;for(;i<t.byteLength;){const[n,e]=ji(i)(t);null!==n&&r.push(n),i+=e}return{gltf:n,glbBuffers:r}})(t):{gltf:Bi(t),glbBuffers:[]};let Di=0;const Vi={POSITION:"a_Position",NORMAL:"a_Normal",TANGENT:"a_Tangent",TEXCOORD_0:"a_UV",COLOR_0:"a_Color",JOINTS_0:"a_Skin_Joint",WEIGHTS_0:"a_Skin_Weight"},Gi=t=>t.sort((t,n)=>{if(t===n)return 0;const e=["POSITION","NORMAL","TANGENT","TEXCOOR_0","COLOR_0","JOINTS_0","WEIGHTS_0"],r=e.indexOf(t),i=e.indexOf(n);return r<i?-1:r>i?1:0}),Hi=t=>Gi(Object.keys(t.attributes));var qi;!function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT"}(qi||(qi={}));const Xi=({renderer:t,activateShader:n})=>{const{gl:e}=t,r={uniformLocations:new Map,uniformValues:new Map,uniformSingleValues:new Map,uniformMatrixTranspose:new Map},i=t=>{const{program:i}=n();return r.uniformLocations.has(t)||r.uniformLocations.set(t,e.getUniformLocation(i,t)),r.uniformLocations.get(t)},o=t=>null!==t&&void 0!==t&&-1!=t,u=t=>n=>{if(!r.uniformValues.has(t))return!1;const e=r.uniformValues.get(t);if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0},a=t=>n=>e=>{if(!r.uniformValues.has(n)){switch(t){case qi.FLOAT:r.uniformValues.set(n,new Float32Array(e.length));break;case qi.INT:r.uniformValues.set(n,new Int32Array(e.length))}return}const i=r.uniformValues.get(n);for(let t=0;t<e.length;t++)i[t]=e[t]},s=t=>n=>e=>{if(!r.uniformSingleValues.has(n)||r.uniformSingleValues.get(n)!==e){r.uniformSingleValues.set(n,e);const u=i(n);o(u)&&t(u)(e)}},c=t=>n=>e=>s=>{if(!u(e)(s)){a(t)(e)(s);const u=i(e);o(u)&&n(u)(r.uniformValues.get(e))}},f=t=>n=>e=>s=>c=>{if(!r.uniformMatrixTranspose.has(e)||r.uniformMatrixTranspose.get(e)!==s||!u(e)(c)){a(t)(e)(c),r.uniformMatrixTranspose.set(e,s);const u=i(e);o(u)&&n(u)(s)(r.uniformValues.get(e))}},l={uniform1f:s(t=>n=>e.uniform1f(t,n)),uniform1fv:c(qi.FLOAT)(t=>n=>e.uniform1fv(t,n)),uniform1i:s(t=>n=>e.uniform1i(t,n)),uniform1iv:c(qi.INT)(t=>n=>e.uniform1iv(t,n)),uniform2f:c(qi.FLOAT)(t=>n=>e.uniform2f(t,n[0],n[1])),uniform2fv:c(qi.FLOAT)(t=>n=>e.uniform2fv(t,n)),uniform2i:c(qi.INT)(t=>n=>e.uniform2i(t,n[0],n[1])),uniform2iv:c(qi.INT)(t=>n=>e.uniform2iv(t,n)),uniform3f:c(qi.FLOAT)(t=>n=>e.uniform3f(t,n[0],n[1],n[2])),uniform3fv:c(qi.FLOAT)(t=>n=>e.uniform3fv(t,n)),uniform3i:c(qi.INT)(t=>n=>e.uniform3i(t,n[0],n[1],n[2])),uniform3iv:c(qi.INT)(t=>n=>e.uniform3iv(t,n)),uniform4f:c(qi.FLOAT)(t=>n=>e.uniform4f(t,n[0],n[1],n[2],n[3])),uniform4fv:c(qi.FLOAT)(t=>n=>e.uniform4fv(t,n)),uniform4i:c(qi.INT)(t=>n=>e.uniform4i(t,n[0],n[1],n[2],n[3])),uniform4iv:c(qi.INT)(t=>n=>e.uniform4iv(t,n)),uniformMatrix2fv:f(qi.FLOAT)(t=>n=>r=>e.uniformMatrix2fv(t,n,r)),uniformMatrix3fv:f(qi.FLOAT)(t=>n=>r=>e.uniformMatrix3fv(t,n,r)),uniformMatrix4fv:f(qi.FLOAT)(t=>n=>r=>e.uniformMatrix4fv(t,n,r))};return{cache:r,setters:l,getLocation:i,validLocation:o,hasLocation:t=>o(i(t))}};let zi;const Wi=new Map,Ki=t=>(zi&&zi.shaderId===t||(zi=Wi.get(t)).gl.useProgram(zi.program),zi),Yi=t=>Ki(t),$i=({renderer:t,shaderId:n,source:e})=>{const r=(({renderer:t,source:n})=>{let e,r;const{gl:i}=t,o=i.createProgram(),u=()=>{void 0!==e&&e instanceof WebGLShader&&i.deleteShader(e),void 0!==r&&r instanceof WebGLShader&&i.deleteShader(r),i.deleteProgram(o)},a=t=>n=>{const e=i.createShader(t);if(i.shaderSource(e,n),i.compileShader(e),!i.getShaderParameter(e,i.COMPILE_STATUS)){const n=`${(t=>t===i.VERTEX_SHADER?"vertex":"fragment")(t)} error: `+i.getShaderInfoLog(e);throw new Error(n)}return i.attachShader(o,e),e};if((e=a(i.VERTEX_SHADER)(n.vertex))instanceof Error)return u(),e;if((r=a(i.FRAGMENT_SHADER)(n.fragment))instanceof Error)return u(),r;let s=0;return t.attributes.globalLocations.forEach(t=>{i.bindAttribLocation(o,s,t),s++}),i.linkProgram(o),i.getProgramParameter(o,i.LINK_STATUS)?o:(u(),new Error("Unable to initialize the shader program: "+i.getProgramInfoLog(o)))})({source:e,renderer:t}),i={gl:t.gl,shaderId:n,program:r,uniforms:Xi({renderer:t,activateShader:()=>Ki(n)})};return Wi.set(n,i),i},Qi=new Uint8Array(19),Ji=new Uint8Array(30),Zi=new Uint8Array(30),to=new Uint8Array(30),no=t=>{let n=1<<t.length;for(let e=0;e<t.length;e++)n|=t[e]<<t.length-e-1;return n},eo=({data:t,primitive:n,scene:e})=>{const r=Fi.map(t=>t.runtimeShaderConfig).reduce((r,i)=>(r=i({data:t,scene:e,primitive:n})(r),r),ro({data:t,scene:e,primitive:n}));return Object.assign({},n,{shaderConfig:r})},ro=({data:t,scene:n,primitive:e})=>e.shaderConfig,io=({data:t,primitive:n})=>Fi.map(t=>t.shaderSource).reduce((e,r)=>(e=r({data:t,primitive:n})(e),e),(({data:t,primitive:n})=>{t.original,t.original.meshes[n.originalMeshId].primitives[n.originalPrimitiveId];const e=n.shaderConfig,r=[];switch(e.hasNormalAttributes&&r.push("HAS_NORMALS"),e.hasTangentAttributes&&r.push("HAS_TANGENTS"),e.hasUvAttributes&&r.push("HAS_UV"),e.hasColorAttributes&&r.push("HAS_COLOR"),e.hasBaseColorMap&&r.push("HAS_BASECOLORMAP"),e.hasNormalMap&&r.push("HAS_NORMALMAP"),e.hasEmissiveMap&&r.push("HAS_EMISSIVEMAP"),e.hasMetalRoughnessMap&&r.push("HAS_METALROUGHNESSMAP"),e.hasOcclusionMap&&r.push("HAS_OCCLUSIONMAP"),e.manualSRGB&&r.push("MANUAL_SRGB"),e.fastSRGB&&r.push("SRGB_FAST_APPROXIMATION"),e.nSkinJoints&&r.push("HAS_SKIN"),e.alphaMode){case cr.MASK:r.push("HAS_ALPHA_CUTOFF");break;case cr.BLEND:r.push("HAS_ALPHA_BLEND")}const i=r.map(t=>`#define ${t} 1\n`).join("");return{vertex:(({data:t,primitive:n})=>e=>{const r=t.original.nodes[n.originalNodeId],i=t.original.meshes[n.originalMeshId].primitives[n.originalPrimitiveId],{targets:o}=i,u=(Hi(i),{POSITION:"m_Position",NORMAL:"m_Normal",TANGENT:"m_Tangent"});let a="",s="",c=0,f=0;o&&(o.forEach(t=>{Gi(Object.keys(t)).forEach(t=>{const n=`a_Morph_${c}`;a+=`attribute vec4 ${n};\n`,s+=`${u[t]} += (u_MorphWeights[${f}] * ${n});\n`,c++}),f++}),a+=`uniform float u_MorphWeights[${f}];\n`);let l="";return void 0!==r.skin&&(l=t.original.skins[r.skin].joints.length.toString()),e.replace("%MORPH_VARS%",a).replace("%MORPH_FUNCS%",s).replace("%SKIN_JOINT_COUNT%",l)})({data:t,primitive:n})(i+"precision highp float;\nprecision highp int;\n\n%MORPH_VARS%\n\n#ifdef HAS_SKIN\nattribute vec4 a_Skin_Joint;\nattribute vec4 a_Skin_Weight;\nuniform mat4 u_Skin_Matrices[%SKIN_JOINT_COUNT%];\n#endif\n\n#ifdef USE_KHR_LIGHTS\n%KHR_LIGHTS_VARS%\n#endif\n\nattribute vec4 a_Position;\n#ifdef HAS_NORMALS\nattribute vec4 a_Normal;\n#endif\n#ifdef HAS_TANGENTS\nattribute vec4 a_Tangent;\n#endif\n#ifdef HAS_UV\nattribute vec2 a_UV;\n#endif\n#ifdef HAS_COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\nuniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 v_Position;\nvarying vec2 v_UV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 v_TBN;\n#else\nvarying vec3 v_Normal;\n#endif\n#endif\n\n\nvoid main()\n{\n\n  \n\n  vec4 m_Position = a_Position;\n  #ifdef HAS_NORMALS\n    vec4 m_Normal = a_Normal;\n  #endif\n  #ifdef HAS_TANGENTS\n    vec4 m_Tangent = a_Tangent;\n  #endif\n\n#ifdef HAS_SKIN\n    mat4 skinMat = a_Skin_Weight[0] * u_Skin_Matrices[int(a_Skin_Joint[0])]\n        +   a_Skin_Weight[1] * u_Skin_Matrices[int(a_Skin_Joint[1])]\n        +   a_Skin_Weight[2] * u_Skin_Matrices[int(a_Skin_Joint[2])]\n        +   a_Skin_Weight[3] * u_Skin_Matrices[int(a_Skin_Joint[3])];\n\n    m_Position = skinMat * m_Position;\n#endif\n    %MORPH_FUNCS%\n\n    #ifdef USE_KHR_LIGHTS\n    %KHR_LIGHTS_FUNCS%\n    #endif\n\n  \n  vec4 pos = u_ModelMatrix * m_Position;\n  v_Position = vec3(pos.xyz) / pos.w;\n\n  #ifdef HAS_NORMALS\n  #ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(m_Normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(m_Tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * m_Tangent.w;\n  v_TBN = mat3(tangentW, bitangentW, normalW);\n  #else // HAS_TANGENTS != 1\n  v_Normal = normalize(vec3(u_ModelMatrix * vec4(m_Normal.xyz, 0.0)));\n  #endif\n  #endif\n\n  #ifdef HAS_UV\n  v_UV = a_UV;\n  #else\n  v_UV = vec2(0.,0.);\n  #endif\n\n    #ifdef HAS_COLOR\n    v_Color = a_Color;\n    #endif\n\n\n  gl_Position = u_MVPMatrix * m_Position; // needs w for proper perspective correction\n}\n\n"),fragment:(t=>t)(i+"precision highp float;\nprecision highp int;\n\n#ifdef USE_KHR_LIGHTS\n    #ifdef KHR_LIGHTS_AMBIENT\n        uniform float u_KhrLight_Ambient_Intensity;\n        uniform vec3 u_KhrLight_Ambient_Color;\n    #endif\n%KHR_LIGHTS_VARS%\n#endif\n\n//\n// This fragment shader defines a reference implementation for Physically Based Shading of\n// a microfacet surface material defined by a glTF model.\n//\n// References:\n// [1] Real Shading in Unreal Engine 4\n//     http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\n// [2] Physically Based Shading at Disney\n//     http://blog.selfshadow.com/publications/s2012-shading-course/burley/s2012_pbs_disney_brdf_notes_v3.pdf\n// [3] README.md - Environment Maps\n//     https://github.com/KhronosGroup/glTF-WebGL-PBR/#environment-maps\n// [4] \"An Inexpensive BRDF Model for Physically based Rendering\" by Christophe Schlick\n//     https://www.cs.virginia.edu/~jdl/bib/appearance/analytic%20models/schlick94b.pdf\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n\nuniform vec3 u_LightDirection;\nuniform vec3 u_LightColor;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\nuniform float u_AlphaCutoff; //PURE3D - Added\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef HAS_COLOR\nvarying vec4 v_Color;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n\n// debugging flags used for shader output of intermediate PBR variables\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\nuniform vec4 u_ScaleIBLAmbient;\n\nvarying vec3 v_Position;\n\nvarying vec2 v_UV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 v_TBN;\n#else\nvarying vec3 v_Normal;\n#endif\n#endif\n\n// Encapsulate the various inputs used by the various functions in the shading equation\n// We store values in this struct to simplify the integration of alternative implementations\n// of the shading terms, outlined in the Readme.MD Appendix.\nstruct PBRInfo\n{\n    float NdotL;                  // cos angle between normal and light direction\n    float NdotV;                  // cos angle between normal and view direction\n    float NdotH;                  // cos angle between normal and half vector\n    float LdotH;                  // cos angle between light direction and half vector\n    float VdotH;                  // cos angle between view direction and half vector\n    float perceptualRoughness;    // roughness value, as authored by the model creator (input to shader)\n    float metalness;              // metallic value at the surface\n    vec3 reflectance0;            // full reflectance color (normal incidence angle)\n    vec3 reflectance90;           // reflectance color at grazing angle\n    float alphaRoughness;         // roughness mapped to a more linear change in the roughness (proposed by [2])\n    vec3 diffuseColor;            // color contribution from diffuse lighting\n    vec3 specularColor;           // color contribution from specular lighting\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n    #ifdef MANUAL_SRGB\n        #ifdef SRGB_FAST_APPROXIMATION\n            vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n        #else //SRGB_FAST_APPROXIMATION\n            vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n            vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n        #endif //SRGB_FAST_APPROXIMATION\n        \n        return vec4(linOut,srgbIn.w);\n    #else //MANUAL_SRGB\n        return srgbIn;\n    #endif //MANUAL_SRGB\n}\n\n\n// Find the normal for this fragment, pulling either from a predefined normal map\n// or from the interpolated mesh normal and tangent attributes.\nvec3 getNormal()\n{\n    // Retrieve the tangent space matrix\n#ifndef HAS_TANGENTS\n    vec3 pos_dx = dFdx(v_Position);\n    vec3 pos_dy = dFdy(v_Position);\n    vec3 tex_dx = dFdx(vec3(v_UV, 0.0));\n    vec3 tex_dy = dFdy(vec3(v_UV, 0.0));\n    vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n    vec3 ng = normalize(v_Normal);\n#else\n    vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n    t = normalize(t - ng * dot(ng, t));\n    vec3 b = normalize(cross(ng, t));\n    mat3 tbn = mat3(t, b, ng);\n#else // HAS_TANGENTS\n    mat3 tbn = v_TBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n    vec3 n = texture2D(u_NormalSampler, v_UV).rgb;\n    n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n    // The tbn matrix is linearly interpolated, so we need to re-normalize\n    vec3 n = normalize(tbn[2].xyz);\n#endif\n\n    return n;\n}\n\n#ifdef USE_IBL\n// Calculation of the lighting contribution from an optional Image Based Light source.\n// Precomputed Environment Maps are required uniform inputs and are computed as outlined in [1].\n// See our README.md on Environment Maps [3] for additional discussion.\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n    float mipCount = 9.0; // resolution of 512x512\n    float lod = (pbrInputs.perceptualRoughness * mipCount);\n    // retrieve a scale and bias to F0. See [1], Figure 3\n    \n    vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT, vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n    vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n    \n\n#ifdef USE_TEX_LOD\n    vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n    vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n    vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n    vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n\n    // For presentation, this allows us to disable IBL terms\n    diffuse *= u_ScaleIBLAmbient.x;\n    specular *= u_ScaleIBLAmbient.y;\n\n    \n    return diffuse + specular;\n}\n#endif\n\n#ifdef USE_KHR_LIGHTS\nvec3 getKhrLightingContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n    vec3 diffuse = pbrInputs.diffuseColor;\n    vec3 specular = pbrInputs.specularColor;\n\n    #ifdef KHR_LIGHTS_AMBIENT \n        vec3 nAmbient = (u_KhrLight_Ambient_Color * u_KhrLight_Ambient_Intensity);\n        diffuse *= nAmbient; \n        specular *= nAmbient; \n    #endif\n\n    return diffuse + specular;\n}\n#endif\n\n// Basic Lambertian diffuse\n// Implementation from Lambert's Photometria https://archive.org/details/lambertsphotome00lambgoog\n// See also [1], Equation 1\nvec3 diffuse(PBRInfo pbrInputs)\n{\n    return pbrInputs.diffuseColor / M_PI;\n}\n\n// The following equation models the Fresnel reflectance term of the spec equation (aka F())\n// Implementation of fresnel from [4], Equation 15\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n    return pbrInputs.reflectance0 + (pbrInputs.reflectance90 - pbrInputs.reflectance0) * pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n// This calculates the specular geometric attenuation (aka G()),\n// where rougher material will reflect less light back to the viewer.\n// This implementation is based on [1] Equation 4, and we adopt their modifications to\n// alphaRoughness as input as originally proposed in [2].\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n    float NdotL = pbrInputs.NdotL;\n    float NdotV = pbrInputs.NdotV;\n    float r = pbrInputs.alphaRoughness;\n\n    float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n    float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n    return attenuationL * attenuationV;\n}\n\n// The following equation(s) model the distribution of microfacet normals across the area being drawn (aka D())\n// Implementation from \"Average Irregularity Representation of a Roughened Surface for Ray Reflection\" by T. S. Trowbridge, and K. P. Reitz\n// Follows the distribution function recommended in the SIGGRAPH 2013 course notes from EPIC Games [1], Equation 3.\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n    float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n    float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n    return roughnessSq / (M_PI * f * f);\n}\n\nvoid main()\n{\n    // Metallic and Roughness material properties are packed together\n    // In glTF, these factors can be specified by fixed scalar values\n    // or from a metallic-roughness map\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n    // Roughness is stored in the 'g' channel, metallic is stored in the 'b' channel.\n    // This layout intentionally reserves the 'r' channel for (optional) occlusion map data\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, v_UV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n    // Roughness is authored as perceptual roughness; as is convention,\n    // convert to material roughness by squaring the perceptual roughness [2].\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    // The albedo may be defined from a base texture or a flat color\n#ifdef HAS_BASECOLORMAP\n    vec4 textureColor = texture2D(u_BaseColorSampler, v_UV);\n    vec4 baseColor = SRGBtoLINEAR(textureColor) * u_BaseColorFactor;\n#else\n    vec4 baseColor = u_BaseColorFactor;\n#endif\n\n    #ifdef HAS_ALPHA_CUTOFF\n        //Pure3d added\n        if(baseColor.a < u_AlphaCutoff) {\n            discard;\n        }\n\n    #endif\n\n    #ifndef HAS_ALPHA_BLEND\n        baseColor.a = 1.0;\n    #endif\n\n    vec3 f0 = vec3(0.04);\n#ifdef HAS_COLOR\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0) * SRGBtoLINEAR(v_Color).rgb;\n    diffuseColor *= 1.0 - metallic;\n#else\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n#endif\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n\n    // Compute reflectance.\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n    // For typical incident reflectance range (between 4% to 100%) set the grazing reflectance to 100% for typical fresnel effect.\n    // For very low reflectance range on highly diffuse objects (below 4%), incrementally reduce grazing reflecance to 0%.\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();                             // normal at surface point\n    vec3 v = normalize(u_Camera - v_Position);        // Vector from surface point to camera\n    vec3 l = normalize(u_LightDirection);             // Vector from surface point to light\n    vec3 h = normalize(l+v);                          // Half vector between both l and v\n    vec3 reflection = -normalize(reflect(v, n));\n\n    float NdotL = clamp(dot(n, l), 0.001, 1.0);\n    float NdotV = abs(dot(n, v)) + 0.001;\n    float NdotH = clamp(dot(n, h), 0.0, 1.0);\n    float LdotH = clamp(dot(l, h), 0.0, 1.0);\n    float VdotH = clamp(dot(v, h), 0.0, 1.0);\n\n    PBRInfo pbrInputs = PBRInfo(\n        NdotL,\n        NdotV,\n        NdotH,\n        LdotH,\n        VdotH,\n        perceptualRoughness,\n        metallic,\n        specularEnvironmentR0,\n        specularEnvironmentR90,\n        alphaRoughness,\n        diffuseColor,\n        specularColor\n    );\n\n    // Calculate the shading terms for the microfacet specular shading model\n    vec3 F = specularReflection(pbrInputs);\n    float G = geometricOcclusion(pbrInputs);\n    float D = microfacetDistribution(pbrInputs);\n\n    // Calculation of analytical lighting contribution\n    vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n    vec3 specContrib = F * G * D / (4.0 * NdotL * NdotV);\n    // Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n    vec3 color = NdotL * u_LightColor * (diffuseContrib + specContrib);\n\n    // Calculate lighting contribution from image based lighting source (IBL)\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n\n#ifdef USE_KHR_LIGHTS\n    color += getKhrLightingContribution(pbrInputs, n, reflection);\n#endif\n\n    // Apply optional PBR terms for additional (optional) shading\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, v_UV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, v_UV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n\n#ifdef USE_KHR_LIGHTS\n%KHR_LIGHTS_FUNCS%\n#endif\n    // This section uses mix to override final color for reference app visualization\n    // of various parameters in the lighting equation.\n    color = mix(color, F, u_ScaleFGDSpec.x);\n    color = mix(color, vec3(G), u_ScaleFGDSpec.y);\n    color = mix(color, vec3(D), u_ScaleFGDSpec.z);\n    color = mix(color, specContrib, u_ScaleFGDSpec.w);\n\n    color = mix(color, diffuseContrib, u_ScaleDiffBaseMR.x);\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n\n    gl_FragColor = vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n")}})({data:t,primitive:n})),oo=({renderer:t,data:n})=>{const e=n.original,r=new Map;return void 0===e.nodes||null===e.nodes?r:(e.nodes.map((t,n)=>[t,n]).filter(([t,n])=>void 0!==t.mesh&&null!==t.mesh).forEach(([i,o])=>r.set(i.mesh,e.meshes[i.mesh].primitives.map((r,u)=>{e.meshes[i.mesh];const a=Object.assign({originalNodeId:o,originalMeshId:i.mesh,originalPrimitiveId:u,vaoId:(({renderer:t,originalPrimitive:n,data:e})=>{const r={data:[]},i=e.attributes.accessorLookup;void 0!==n.indices&&(r.elementBufferId=i.get(n.indices).rendererBufferId),Hi(n).forEach(e=>{const o=n.attributes[e],u=Vi[e];if(!i.has(o))throw new Error("bug here!");r.data.push(Object.assign({location:t.attributes.getLocationInRenderer(u),bufferId:i.get(o).rendererBufferId},i.get(o).strategy))});const{targets:o}=n;if(o){let n=0;o.forEach(e=>{Gi(Object.keys(e)).forEach(o=>{const u=e[o],a=`a_Morph_${n++}`;r.data.push(Object.assign({location:t.attributes.getLocationInRenderer(a),bufferId:i.get(u).rendererBufferId},i.get(u).strategy))})})}const u=Di++,a=Symbol();return e.attributes.vaoIdLookup.set(u,a),t.vertexArrays.assign(a)(r),u})({renderer:t,originalPrimitive:r,data:n})},(({originalPrimitive:t,data:n})=>{const e={drawKind:void 0!==t.indices?lr.ELEMENTS:lr.ARRAY,drawMode:t.mode?t.mode:xr.TRIANGLES};if(e.drawKind===lr.ELEMENTS)e.elementsId=t.indices;else{const r=Hi(t);e.arrayCount=n.original.accessors[t.attributes[r[0]]].count}return e})({originalPrimitive:r,data:n}));return void 0!==r.material&&(a.material=(({gltf:t,materialId:n,data:e})=>{const r=t.materials[n],i={};if(i.metallicRoughnessValues=Float64Array.from([1,1]),i.baseColorFactor=Float64Array.from([1,1,1,1]),r.pbrMetallicRoughness&&(void 0!==r.pbrMetallicRoughness.metallicFactor&&(i.metallicRoughnessValues[0]=r.pbrMetallicRoughness.metallicFactor),void 0!==r.pbrMetallicRoughness.roughnessFactor&&(i.metallicRoughnessValues[1]=r.pbrMetallicRoughness.roughnessFactor),void 0!==r.pbrMetallicRoughness.baseColorFactor&&(i.baseColorFactor=Float64Array.from(r.pbrMetallicRoughness.baseColorFactor)),void 0!==r.pbrMetallicRoughness.baseColorTexture&&(i.baseColorSamplerIndex=r.pbrMetallicRoughness.baseColorTexture.index),void 0!==r.pbrMetallicRoughness.metallicRoughnessTexture&&(i.metallicRoughnessSamplerIndex=r.pbrMetallicRoughness.metallicRoughnessTexture.index)),void 0!==r.normalTexture){const t=void 0!==r.normalTexture.scale?r.normalTexture.scale:1;i.normal={scale:t,samplerIndex:r.normalTexture.index}}if(void 0!==r.occlusionTexture){const t=void 0!==r.occlusionTexture.strength?r.occlusionTexture.strength:1;i.occlusion={strength:t,samplerIndex:r.occlusionTexture.index}}if(void 0!==r.emissiveTexture&&(i.emissiveSamplerIndex=r.emissiveTexture.index),void 0!==r.emissiveFactor&&(i.emissiveFactor=Float64Array.from(r.emissiveFactor)),r.alphaMode)switch(r.alphaMode){case"BLEND":i.alphaMode=cr.BLEND;break;case"MASK":i.alphaMode=cr.MASK;break;default:i.alphaMode=cr.OPAQUE}return i.doubleSided=!!r.doubleSided,i.alphaCutoff=void 0===r.alphaCutoff?.5:r.alphaCutoff,i})({gltf:e,materialId:r.material,data:n})),a.shaderConfig=(({data:t,primitive:n})=>Fi.map(t=>t.initialShaderConfig).reduce((e,r)=>(e=r({data:t,primitive:n})(e),e),(({data:t,primitive:n})=>{t.original;const e=t.original.nodes[n.originalNodeId],r=t.original.meshes[n.originalMeshId].primitives[n.originalPrimitiveId],i=t=>n=>-1!==Object.keys(t.attributes).indexOf(n),o=n.material;let u=0,a=0,s=0,c=0,f=0;return void 0!==e.skin&&(f=t.original.skins[e.skin].joints.length),r.targets&&r.targets.forEach(t=>{Gi(Object.keys(t)).forEach(t=>{switch(t){case"POSITION":a++;break;case"NORMAL":s++;break;case"TANGENT":c++;break;default:console.warn("unknown...",t)}}),u++}),{nMorphWeights:u,nPositionMorphs:a,nNormalMorphs:s,nTangentMorphs:c,nSkinJoints:f,alphaMode:o&&o.alphaMode?o.alphaMode:cr.OPAQUE,hasNormalAttributes:i(r)("NORMAL"),hasTangentAttributes:i(r)("TANGENT"),hasUvAttributes:i(r)("TEXCOORD_0"),hasColorAttributes:i(r)("COLOR_0"),hasBaseColorMap:o&&void 0!==o.baseColorSamplerIndex,hasNormalMap:o&&void 0!==o.normal,hasEmissiveMap:o&&void 0!==o.emissiveSamplerIndex,hasMetalRoughnessMap:o&&void 0!==o.metallicRoughnessSamplerIndex,hasOcclusionMap:o&&void 0!==o.occlusion,manualSRGB:!0===t.initConfig.manualSRGB,fastSRGB:!0===t.initConfig.fastSRGB,extensions:{}}})({data:t,primitive:n})))({data:n,primitive:a}),a}))),r)},uo=({gltf:t,primitives:n,data:e,assets:r})=>{const i=(({gltf:t,buffers:n})=>{const e=new Map;return t.skins&&t.skins.length?(t.skins.forEach((r,i)=>{const o=r.inverseBindMatrices?(t=>{const n=new Array;for(let e=0;e<t.length;)n.push(t.slice(e,e+16)),e+=16;return n})(pi({gltf:t,buffers:n,info:hi({gltf:t,accessorId:r.inverseBindMatrices})})):r.joints.map(Ur());if(o.length!==r.joints.length)throw new Error("inverse bind matrices mismatch!");let u;const a={joints:r.joints.map((t,n)=>{const e={originalNodeId:t,inverseBindMatrix:o[n]};return void 0!==r.skeleton&&r.skeleton===t&&(u=t),e})};void 0!==u&&(a.skeletonRootId=u),e.set(i,a)}),e):e})({gltf:t,buffers:r.buffers}),o=e=>r=>u=>{const a={originalNodeId:r,animationIds:[],kind:void 0!==u.mesh&&n.has(u.mesh)&&n.get(u.mesh).length?fr.MESH:void 0!==u.camera?Ir.CAMERA:void 0},s=u.matrix?Br(Float64Array.from(u.matrix)):function(t){const n={translation:Float64Array.from([0,0,0]),rotation:Float64Array.from([0,0,0,1]),scale:Float64Array.from([1,1,1])};return Object.keys(n).forEach(e=>{const r=t[e];r&&(n[e]=r)}),n}(u),c=u.matrix?new Float64Array(u.matrix):jr(s),f=kr(e)(c);if(a.transform={trs:s,localMatrix:c,modelMatrix:f},a.kind===fr.MESH&&t.meshes[u.mesh].primitives.some(t=>(t=>-1!==Object.keys(t.attributes).indexOf("NORMAL"))(t))&&(a.transform.normalMatrix=Dr(f)),a.kind===fr.MESH){if(a.primitives=n.get(u.mesh),void 0!==u.skin){const t=i.get(u.skin);a.skin={skinId:u.skin,joints:t.joints.slice()},void 0!==t.skeletonRootId&&(a.skin.skeletonRootId=t.skeletonRootId)}const e=u.weights?Float64Array.from(u.weights):t.meshes[u.mesh].weights?Float64Array.from(t.meshes[u.mesh].weights):void 0;e&&(a.morphWeights=e)}else a.kind===Ir.CAMERA&&(a.camera=(t=>"orthographic"===t.type?{kind:Mr.ORTHOGRAPHIC,xmag:t.orthographic.xmag,ymag:t.orthographic.ymag,znear:t.orthographic.znear,zfar:t.orthographic.zfar}:{kind:Mr.PERSPECTIVE,aspectRatio:t.perspective.aspectRatio,yfov:t.perspective.yfov,znear:t.perspective.znear,zfar:t.perspective.zfar})(t.cameras[u.camera]),a.cameraIndex=u.camera);const l=Fi.map(t=>t.createNode).reduce((n,e)=>(n=e(t)(u)(n),n),a);return u.children?Object.assign(l,{children:u.children.map(n=>o(f)(n)(t.nodes[n]))}):l};return(({gltf:t,nodes:n})=>{let e=0;return t.animations&&t.animations.forEach(t=>{t.channels.filter(t=>void 0!==t.target.node).forEach(t=>{ei(n=>(n.originalNodeId===t.target.node&&-1===n.animationIds.indexOf(e)&&n.animationIds.push(e),n))(n),e++})}),n})({gltf:t,nodes:t.nodes.map((t,n)=>o(null)(n)(t))})},ao=t=>n=>e=>{const r=new Map,i=new Map,o=new Array,u=new Array;$r(t=>{t.kind===fr.MESH&&t.transform&&t.transform.modelViewProjectionMatrix?o.push(t):t.kind===Ir.LIGHT&&u.push(t)})(e.nodes),o.forEach(o=>{let a;void 0!==o.skin&&o.skin.skinMatrices&&(a=o.skin.skinMatrices),o.primitives.forEach(s=>{const c=(({renderer:t,data:n,primitive:e})=>{const r=(t=>{if(t.hasNormalAttributes&&(Qi[0]=1),t.hasTangentAttributes&&(Qi[1]=1),t.hasUvAttributes&&(Qi[2]=1),t.hasColorAttributes&&(Qi[3]=1),t.hasBaseColorMap&&(Qi[4]=1),t.hasNormalMap&&(Qi[5]=1),t.hasEmissiveMap&&(Qi[6]=1),t.hasMetalRoughnessMap&&(Qi[7]=1),t.hasOcclusionMap&&(Qi[8]=1),t.manualSRGB&&(Qi[9]=1),t.fastSRGB&&(Qi[10]=1),t.extensions.ibl&&(Qi[11]=1,t.extensions.ibl.useLod&&(Qi[12]=1)),t.extensions.unlit&&(Qi[13]=1),Qi[14]=t.alphaMode===cr.BLEND?0:1,Qi[15]=t.alphaMode===cr.MASK?0:1,Qi[16]=t.alphaMode===cr.OPAQUE?0:1,t.extensions.lights){Qi[17]=1,t.extensions.lights.hasAmbient&&(Qi[18]=1);for(let n=0;n<t.extensions.lights.nDirectionalLights;n++)to[n]=1;for(let n=0;n<t.extensions.lights.nPointLights;n++)to[10+n]=1;for(let n=0;n<t.extensions.lights.nSpotLights;n++)to[20+n]=1}for(let n=0;n<t.nPositionMorphs;n++);for(let n=0;n<t.nNormalMorphs;n++);for(let n=0;n<t.nTangentMorphs;n++);for(let n=0;n<t.nMorphWeights;n++);for(let n=0;n<t.nSkinJoints;n++)Zi[n]=1;const n=no(Qi).toString();return no(Ji).toString(),no(Zi).toString(),no(to).toString(),n})(e.shaderConfig);if(!n.shaders.has(r)){const i=io({data:n,primitive:e}),o=$i({shaderId:Symbol(),renderer:t,source:i});n.shaders.set(r,o)}return n.shaders.get(r)})({renderer:t,data:n,primitive:s});i.has(c.shaderId)||i.set(c.shaderId,[]);const f=i.get(c.shaderId);f.push((t=>()=>{const{renderer:n,data:e,node:r,primitive:i,lightList:o,scene:u,shader:a,skinMatrices:s}=t,{camera:c}=u,{gl:f}=n,l=e.original,{material:p,drawMode:h}=i,{uniforms:d,shaderId:y}=a,{uniform1i:m,uniform1f:_,uniform1fv:v,uniform1iv:g,uniform2fv:E,uniform3fv:T,uniform4fv:b,uniformMatrix4fv:A}=d.setters,R=e.attributes.vaoIdLookup.get(i.vaoId);let S=0;Yi(y),p&&p.doubleSided?n.glToggle(xr.CULL_FACE)(!1):n.glToggle(xr.CULL_FACE)(!0),u.extensions.ibl&&(n.switchTexture(S)(e.extensions.ibl.brdf),m("u_brdfLUT")(S++),e.extensions.ibl.cubeMaps.diffuse&&(n.switchCubeTexture(S)(e.extensions.ibl.cubeMaps.diffuse),m("u_DiffuseEnvSampler")(S++)),e.extensions.ibl.cubeMaps.specular&&(n.switchCubeTexture(S)(e.extensions.ibl.cubeMaps.specular),m("u_SpecularEnvSampler")(S++)),T("u_Camera")(c.position),b("u_ScaleDiffBaseMR")(u.extensions.ibl.scaleDiffBaseMR),b("u_ScaleFGDSpec")(u.extensions.ibl.scaleFGDSpec),b("u_ScaleIBLAmbient")(u.extensions.ibl.scaleIBLAmbient)),u.light&&(T("u_KhrLight_Ambient_Color")(u.light.color),_("u_KhrLight_Ambient_Intensity")(u.light.intensity)),o.forEach(t=>{const{light:n}=t;n.kind===Or.Directional&&(T("u_LightDirection")([-.5825,-.1357,-.8014]),T("u_LightColor")(n.color)),n.kind,Or.Spot}),s&&A("u_Skin_Matrices")(!1)(s),A("u_MVPMatrix")(!1)(r.transform.modelViewProjectionMatrix),A("u_ModelMatrix")(!1)(r.transform.modelMatrix),r.transform.normalMatrix&&A("u_NormalMatrix")(!1)(r.transform.normalMatrix),r.morphWeights&&v("u_MorphWeights")(r.morphWeights);const N=t=>r=>{"number"==typeof r?n.switchTexture(S)(e.textures.get(r)):n.switchTexture(S)(r),m(t)(S++)};if(p&&(E("u_MetallicRoughnessValues")(p.metallicRoughnessValues),b("u_BaseColorFactor")(p.baseColorFactor),void 0!==p.baseColorSamplerIndex&&N("u_BaseColorSampler")(p.baseColorSamplerIndex),void 0!==p.metallicRoughnessSamplerIndex&&N("u_MetallicRoughnessSampler")(p.metallicRoughnessSamplerIndex),void 0!==p.normal&&(_("u_NormalScale")(p.normal.scale),N("u_NormalSampler")(p.normal.samplerIndex)),void 0!==p.occlusion&&(_("u_OcclusionStrength")(p.occlusion.strength),N("u_OcclusionSampler")(p.occlusion.samplerIndex)),void 0!==p.emissiveSamplerIndex&&N("u_EmissiveSampler")(p.emissiveSamplerIndex),void 0!==p.emissiveFactor&&T("u_EmissiveFactor")(p.emissiveFactor),p.alphaMode===cr.MASK)){const t=p.alphaMode===cr.MASK?p.alphaCutoff:1;_("u_AlphaCutoff")(t)}if(n.vertexArrays.activate(R),i.drawKind===lr.ELEMENTS){const t=l.accessors[i.elementsId];f.drawElements(h,t.count,t.componentType,t.byteOffset||0)}else f.drawArrays(h,0,i.arrayCount)})({skinMatrices:a,renderer:t,data:n,node:o,primitive:s,lightList:u,scene:e,shader:c})),r.has(s.shaderConfig.alphaMode)||r.set(s.shaderConfig.alphaMode,new Set),r.get(s.shaderConfig.alphaMode).add(f)})}),t.glToggle(xr.BLEND)(!1),t.glToggle(xr.DEPTH_TEST)(!0),t.glDepthFunc(t.gl.LEQUAL),t.glBlendFunc(t.gl.SRC_ALPHA)(t.gl.ONE_MINUS_SRC_ALPHA);const a=so(t)(r);a(cr.OPAQUE),a(cr.MASK),a(cr.BLEND)},so=t=>n=>e=>{n.has(e)&&(e===cr.BLEND&&t.glToggle(xr.BLEND)(!0),n.get(e).forEach(t=>{t.forEach(t=>t())}))},co=({renderer:t,path:n,config:e,mapper:r})=>{const i=function(t){const n={};let e,r;const i=t=>(t=>n=>Object.assign({},t,{nodes:ei(t=>t.kind===fr.MESH?Object.assign({},t,{primitives:t.primitives.map(t=>n(t))}):t)(t.nodes)}))(t)(n=>eo({data:r,primitive:n,scene:t})),o={renderer:t,getAllNodes:()=>e,getData:()=>r,getOriginalScene:t=>n=>{let o=[];if(n>=0&&r.original.scenes[n]){const t=r.original.scenes[n].nodes;$r(n=>{-1!==t.indexOf(n.originalNodeId)&&o.push(n)})(e)}else o=e,console.warn("no scene specified! Expect duplicate nodes...");const u=n>=0?r.original.scenes[n]:{nodes:r.original.nodes.map((t,n)=>n)},a=Fi.map(t=>t.createScene).reduce((t,n)=>t=n(r.original)(u)(t),{camera:t,extensions:{},nodes:ii({updateLocal:!0,updateModel:!0,updateView:!0,camera:t})(null)(o)});return i(a)},getCameraNode:n=>{const r=Jr(t=>t.kind===Ir.CAMERA&&t.cameraIndex===n)(e);if(!r)return;const i=Object.assign({},r.camera);return i.kind===Mr.PERSPECTIVE&&void 0===i.aspectRatio&&(i.aspectRatio=t.canvas.width/t.canvas.height),Object.assign({},r,{camera:zr(r.transform)(i)})},loadFile:t=>Tr(t).map(ki),loadAssets:({gltf:t,basePath:n,glbBuffers:e})=>Li({basePath:n||"",gltf:t,glbBuffers:e}),start:({gltf:n,assets:i,config:o})=>{const u=Pi({gltf:n,renderer:t,assets:i,config:o}),a=oo({renderer:t,data:u});r=u,e=uo({gltf:n,primitives:a,data:u,assets:i})},renderScene:n=>{ao(t)(r)(n)},updateShaderConfigs:i};return Object.assign(n,o),n}(t);return i.loadFile(n).chain(({gltf:t,glbBuffers:o})=>(t=r?r(t):t,i.loadAssets({gltf:t,glbBuffers:o,basePath:Oi(n)}).map(n=>({gltf:t,config:e,assets:n})))).map(i.start).map(()=>i)},fo=t=>t,lo=t=>t,po=eo,ho=t=>n=>{const e=ii(t)(null)(n);return ei(mo(e))(e)},yo=t=>n=>Jr(n=>n.originalNodeId===t)(n),mo=t=>n=>{if(n.kind===fr.MESH&&n.skin){const e=_o(t)(n),i=n=>{const r=e.find(t=>t.originalNodeId===n);return r?r.transform:yo(n)(t).transform};let o=0;const u=r.invert(r.create(),void 0===n.skin.skeletonRootId?n.transform.modelMatrix:i(n.skin.skeletonRootId).modelMatrix),a=e.reduce((t,n)=>{const e=r.create();r.multiply(e,n.transform.modelMatrix,n.inverseBindMatrix),u&&r.multiply(e,u,e);for(let n=0;n<e.length;n++)t[o++]=e[n];return t},new Float32Array(16*n.skin.joints.length));return Object.assign({},n,{skin:Object.assign({},n.skin,{skinMatrices:a})})}return n},_o=t=>n=>{const e=new Map,r=n.skin.joints.map((t,n)=>(e.set(t.originalNodeId,n),{originalNodeId:t.originalNodeId,inverseBindMatrix:t.inverseBindMatrix}));return $r(t=>{if(e.has(t.originalNodeId)){const n=e.get(t.originalNodeId);if(r[n].transform=t.transform,e.delete(t.originalNodeId),!e.size)return!0}})(t),r},vo=({gl:t,buffers:n})=>{let e,r;const i=new Set,o=new Map,u=new Map,a=i=>{const o=n.get(i);e===i&&r===o.target||(t.bindBuffer(o.target,o.buffer),e=i,r=o.target)};return{globalLocations:i,getLocationInShader:n=>e=>{o.has(n)||o.set(n,new Map);const r=o.get(n);return r.has(e)||r.set(e,t.getAttribLocation(n,e)),r.get(e)},getLocationInRenderer:t=>{if(!u.has(t)){let t=0;i.forEach(n=>{u.has(n)||u.set(n,t),t++})}return u.get(t)},activateElements:a,activateData:n=>e=>r=>{a(e),t.vertexAttribPointer(n,r.size,r.type,void 0!==r.normalized&&r.normalized,void 0===r.stride?0:r.stride,void 0===r.offset?0:r.offset),t.enableVertexAttribArray(n)}}},go=t=>{const n=new Map,e=e=>{const r=n.get(e);t.bindBuffer(r.target,r.buffer)};return{assign:r=>i=>{const o=n.has(r)?n.get(r):{buffer:t.createBuffer()};o.data=i.data,o.target=i.target,o.usagePattern=i.usagePattern,n.set(r,o),e(r),t.bufferData(o.target,o.data,o.usagePattern)},get:t=>n.get(t),bind:e}},Eo=t=>({width:n,height:e})=>{const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,e,0,t.RGBA,t.UNSIGNED_BYTE,null);const i=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n,e);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null);const u=()=>t.bindFramebuffer(t.FRAMEBUFFER,o),a=()=>t.bindFramebuffer(t.FRAMEBUFFER,null);return{bind:u,unbind:a,readPixel:({x:n,y:e})=>{const r=new Uint8Array(4);return u(),t.readPixels(n,e,1,1,t.RGBA,t.UNSIGNED_BYTE,r),a(),r},dispose:()=>{a(),t.deleteFramebuffer(o),t.deleteRenderbuffer(i),t.deleteTexture(r)},clear:n=>{u(),t.clear(n),a()}}},To=({getExtension:t,gl:n,version:e,buffers:r})=>{const i=new Map;let o;const u=r=>1===e?t("OES_vertex_array_object").bindVertexArrayOES(r):n.bindVertexArray(r),a=r=>a=>{(r||o!==a)&&(o=a,i.has(a)||i.set(a,1===e?t("OES_vertex_array_object").createVertexArrayOES():n.createVertexArray()),u(i.get(a)))},s=()=>{null!==o&&(o=null,u(null))};return{activate:a(!1),release:s,assign:t=>e=>{a(!0)(t),e.elementBufferId&&r.bind(e.elementBufferId),e.data.forEach(({location:t,usagePattern:e,bufferId:i,size:o,type:u,normalized:a,stride:s,offset:c})=>{r.get(i),r.bind(i),n.vertexAttribPointer(t,o,u,void 0!==a&&a,void 0===s?0:s,void 0===c?0:c),n.enableVertexAttribArray(t)}),s()}}},bo=t=>t.getParameter(xr.VERSION),Ao=t=>{switch(t){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return!0}return!1},Ro=t=>{const n=bo(t);let e="";for(let t=0;t<n.length;t++){const r=n.charAt(t);if(Ao(r))e+=r;else if(e.length)break}return parseInt(e,10)},So=t=>{const{canvas:n,contextAttributes:e}=t,r=(()=>{if(void 0!==t.gl)return t.gl;let r;if(void 0===t.version||2===t.version){try{r=n.getContext("webgl2",e)}catch(t){r=void 0}if(r)return r;console.warn("Failed to initialize webgl2, trying webgl1 as a fallback...")}try{r=n.getContext("webgl",e)||n.getContext("experimental-webgl",e)}catch(t){r=void 0}return r||console.warn("Unable to initialize webgl1"),r})(),i=Ro(r),o={width:NaN,height:NaN},u=new Map,a=go(r),s=new Map,c=t=>{if(!s.has(t)){const n=r.getExtension(t);n||console.warn("Could not create extension",t),s.set(t,n)}return s.get(t)};let f,l,p;const h=bi(r),d=vo({gl:r,buffers:a}),y=To({getExtension:c,gl:r,version:i,buffers:a});return Object.assign({resize:({width:t,height:e})=>{o.width===t&&o.height===e||(n.setAttribute("width",t.toString()),n.setAttribute("height",e.toString()),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),o.width=t,o.height=e)},canvas:n,gl:r,buffers:a,attributes:d,vertexArrays:y},h,{glToggle:t=>n=>{u.has(t)&&u.get(t)===n||(u.set(t,n),n?r.enable(t):r.disable(t))},glDepthFunc:t=>{t!==f&&(r.depthFunc(t),f=t)},glBlendFunc:t=>n=>{t===l&&n===p||(r.blendFunc(t,n),l=t,p=n)},getExtension:c,version:i,extras:{}})}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(16),i=e(13),o=e(9);n.sTick=r.sWorldUpdate.map(function(t){return t.frameTs});var u=n.sTick.map(i.S.Just).hold(i.S.Nothing);n.mapStreamTick=function(t){return t.snapshot(u,function(t,n){return i.S.map(function(n){return Object.assign({},t,{ts:n})})(n)}).filter(i.S.isJust).map(i.S.maybe(void 0)(i.S.I))},n.alarmUpdates=function(t){var e=new o.StreamSink,r=null,i=function(){null!==r&&(clearTimeout(r),r=null)};return t.listen(function(t){i(),t>=0&&(r=setTimeout(function(){return e.send({cancel:i})},t))}),n.mapStreamTick(e)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(9),i=e(13),o=e(20),u=e(41),a=e(19),s=e(18);n.createBallFrp=function(t){var n=r.Transaction.run(function(){var n=new r.CellLoop,e=u.alarmUpdates(n.map(i.S.maybe(-1)(function(t){return 1e3*t.nextBounceTime}))),o=e.map(i.S.Just).hold(i.S.Nothing);return n.loop(u.mapStreamTick(a.sBallStart_Sink).snapshot3(o,n,function(n,e,r){var o=n.ts;return i.S.map(function(t){return t.cancel()})(e),i.S.Just(f(o)(t))}).orElse(a.sBallStop_Sink.snapshot(o,function(t,n){return i.S.map(function(t){return t.cancel()})(n),i.S.Nothing})).orElse(e.snapshot(n,function(t,n){return i.S.map(function(n){return l(t.ts)(n)})(n)})).hold(i.S.Nothing)),n});return u.sTick.snapshot(n,function(t,n){return i.S.maybe(i.S.I)(function(n){var e=n.t0,r=n.getPosition;return function(n){return o.setBallTranslationY(r((t-e)/1e3))(n)}})(n)})};var c=function(t){return function(n){return function(e){return s.set(t)(n(e))(e)}}},f=function(t){return i.S.pipe([function(t){return{y:t.transform.trs.translation[1]}},c("h")(function(t){return t.y- -.903}),c("getPosition")(function(t){return function(n){return t.y+i.Kinematic3(0)(-9.81)(n)}}),c("nextBounceTime")(function(t){return i.Kinematic5(0)(-9.81)(-t.h)}),c("t0")(function(){return t})])},l=function(t){return i.S.pipe([c("h")(function(t){return.8*t.h}),c("v")(function(t){return i.Kinematic4(0)(9.81)(t.h)}),c("getPosition")(function(t){return function(n){return-.903+i.Kinematic3(t.v)(-9.81)(n)}}),c("nextBounceTime")(function(t){return 2*i.Kinematic7(0)(9.81)(t.v)}),c("t0")(function(){return t})])}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(16),i=e(20),o=e(42),u=function(t,n){return function(e){return t(n(e))}};n.createWorldFrp=function(t){var n=o.createBallFrp(t[0].nodes[0]);return r.sWorldUpdate.map(i.setCamera).merge(n,u).accum({scenes:t},function(t,n){return t(n)}).map(function(t){return i.updateTransforms(t)})}},function(t,n,e){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER",t[t.INSIDE_AT_END=2]="INSIDE_AT_END",t[t.INSIDE_AT_START=3]="INSIDE_AT_START"}(r||(r={}));var i=function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n={}),this.rootIds=t,this.nodes=n,this.initRootIds(),this.initNodes()}return t.prototype.initRootIds=function(){for(var t=0,n=this.rootIds;t<n.length;t++){var e=n[t];this.createEmptyNodeIfNotExist(e)}},t.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var n=0,e=this.nodes[t];n<e.length;n++){var r=e[n];this.createEmptyNodeIfNotExist(r)}},t.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},t.prototype.getRootIds=function(){return this.rootIds.slice()},t.prototype.getNodes=function(){var t={};for(var n in this.nodes)this.nodes.hasOwnProperty(n)&&(t[n]=this.nodes[n].slice());return t},t.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},t.prototype.toObject=function(){return this.getObject()},t.prototype.flatten=function(){for(var t=this,n=[],e=0;e<this.rootIds.length;e++){var r=this.rootIds[e];n.push({id:r,level:0,hasParent:!1,childrenCount:0}),s(r,this.nodes,n,0)}for(var i=0,o=n;i<o.length;i++){var u=o[i];u.childrenCount=a(u.id)}return n;function a(n){return t.nodes[n]?t.nodes[n].length:0}function s(t,n,e,r){if(void 0===r&&(r=0),t&&n&&e&&n[t]){r++;for(var i=n[t],o=0;o<i.length;o++){var u=i[o];e.push({id:u,level:r,hasParent:!0}),s(u,n,e,r)}r--}}},t.prototype.moveIdBeforeId=function(t,n){return this.moveId(t,n,r.BEFORE)},t.prototype.moveIdAfterId=function(t,n){return this.moveId(t,n,r.AFTER)},t.prototype.moveIdIntoId=function(t,n,e){return void 0===e&&(e=!0),e?this.moveId(t,n,r.INSIDE_AT_START):this.moveId(t,n,r.INSIDE_AT_END)},t.prototype.swapRootIdWithRootId=function(t,n){var e=this.findRootId(t),r=this.findRootId(n);this.swapRootPositionWithRootPosition(e,r)},t.prototype.swapRootPositionWithRootPosition=function(t,n){var e=this.rootIds[n];this.rootIds[n]=this.rootIds[t],this.rootIds[t]=e},t.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},t.prototype.insertIdBeforeId=function(t,n){var e=this.findRootId(t);for(var r in e>-1&&this.insertIdIntoRoot(n,e),this.nodes)if(this.nodes.hasOwnProperty(r)){var i=this.findNodeId(r,t);i>-1&&this.insertIdIntoNode(r,n,i)}},t.prototype.insertIdAfterId=function(t,n){var e=this.findRootId(t);for(var r in e>-1&&this.insertIdIntoRoot(n,e+1),this.nodes)if(this.nodes.hasOwnProperty(r)){var i=this.findNodeId(r,t);i>-1&&this.insertIdIntoNode(r,n,i+1)}},t.prototype.insertIdIntoId=function(t,n){this.nodeInsertAtEnd(t,n),this.nodes[n]=[]},t.prototype.insertIdIntoRoot=function(t,n){if(void 0===n)this.rootInsertAtEnd(t);else if(n<0){var e=this.rootIds.length;this.rootIds.splice(n+e+1,0,t)}else this.rootIds.splice(n,0,t);this.nodes[t]=this.nodes[t]||[]},t.prototype.insertIdIntoNode=function(t,n,e){if(this.nodes[t]=this.nodes[t]||[],this.nodes[n]=this.nodes[n]||[],void 0===e)this.nodeInsertAtEnd(t,n);else if(e<0){var r=this.nodes[t].length;this.nodes[t].splice(e+r+1,0,n)}else this.nodes[t].splice(e,0,n)},t.prototype.moveId=function(t,n,e){var i=t,o=this.findRootId(i);for(var u in this.nodes[n],this.nodes)if(this.nodes.hasOwnProperty(u)){this.findNodeId(u,n);break}var a=n,s=this.findRootId(a);for(var u in this.nodes[n],this.nodes)if(this.nodes.hasOwnProperty(u)){this.findNodeId(u,n);break}if(o>-1){if(s>-1)switch(this.rootDelete(o),s>o&&s--,e){case r.BEFORE:this.insertIdIntoRoot(i,s);break;case r.AFTER:this.insertIdIntoRoot(i,s+1);break;case r.INSIDE_AT_START:this.nodeInsertAtStart(a,i);break;case r.INSIDE_AT_END:this.nodeInsertAtEnd(a,i)}else for(var u in this.rootDelete(o),this.nodes)if(this.nodes.hasOwnProperty(u)&&(c=this.findNodeId(u,a))>-1){switch(e){case r.BEFORE:this.insertIdIntoNode(u,i,c);break;case r.AFTER:this.insertIdIntoNode(u,i,c+1);break;case r.INSIDE_AT_START:this.nodeInsertAtStart(a,i);break;case r.INSIDE_AT_END:this.nodeInsertAtEnd(a,i)}break}}else if(s>-1){for(var u in this.nodes)if(this.nodes.hasOwnProperty(u)&&(c=this.findNodeId(u,i))>-1){this.nodeDeleteAtIndex(u,c);break}switch(e){case r.BEFORE:this.insertIdIntoRoot(i,s);break;case r.AFTER:this.insertIdIntoRoot(i,s+1);break;case r.INSIDE_AT_START:this.nodeInsertAtStart(a,i);break;case r.INSIDE_AT_END:this.nodeInsertAtEnd(a,i)}}else{for(var u in this.nodes)if(this.nodes.hasOwnProperty(u)&&(c=this.findNodeId(u,i))>-1){this.nodeDeleteAtIndex(u,c);break}for(var u in this.nodes){var c;if(this.nodes.hasOwnProperty(u)&&(c=this.findNodeId(u,a))>-1){switch(e){case r.BEFORE:this.insertIdIntoNode(u,i,c);break;case r.AFTER:this.insertIdIntoNode(u,i,c+1);break;case r.INSIDE_AT_START:this.nodeInsertAtStart(a,i);break;case r.INSIDE_AT_END:this.nodeInsertAtEnd(a,i)}break}}}},t.prototype.swapArrayElements=function(t,n,e){var r=t[n];return t[n]=t[e],t[e]=r,t},t.prototype.rootDeleteId=function(t){var n=this.findRootId(t);n>-1&&this.rootDelete(n)},t.prototype.nodeAndSubNodesDelete=function(t){for(var n=[],e=0;e<this.nodes[t].length;e++){var r=this.nodes[t][e];this.nodeAndSubNodesDelete(r),n.push(t)}for(this.nodeDelete(t),e=0;e<n.length;e++)this.nodeDelete(n[e])},t.prototype.nodeRefrencesDelete=function(t){for(var n in this.nodes)if(this.nodes.hasOwnProperty(n))for(var e=0;e<this.nodes[n].length;e++)this.nodes[n][e]===t&&this.nodeDeleteAtIndex(n,e)},t.prototype.nodeDelete=function(t){delete this.nodes[t]},t.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},t.prototype.findNodeId=function(t,n){return this.nodes[t].indexOf(n)},t.prototype.findNode=function(t){return this.nodes[t]},t.prototype.nodeInsertAtStart=function(t,n){this.nodes[t].unshift(n)},t.prototype.nodeInsertAtEnd=function(t,n){this.nodes[t].push(n)},t.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},t.prototype.nodeDeleteAtIndex=function(t,n){this.nodes[t].splice(n,1)},t.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},t.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},t}();n.default=i},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(15),i=function(){function t(){this.list=new r.default}return t.prototype.push=function(t){return this.list.add(t,0)},t.prototype.add=function(t){return this.list.add(t,0)},t.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.prototype.peek=function(){return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,n){return this.list.contains(t,n)},t.prototype.isEmpty=function(){return this.list.isEmpty()},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();n.default=i},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),i=e(22),o=function(){function t(t){this.heap=new i.default(r.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();n.default=o},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),i=e(4),o=e(6),u=function(){function t(t,n,e){void 0===e&&(e=!1),this.dict=new i.default(t),this.equalsF=n||r.defaultEquals,this.allowDuplicate=e}return t.prototype.getValue=function(t){var n=this.dict.getValue(t);return r.isUndefined(n)?[]:o.copy(n)},t.prototype.setValue=function(t,n){if(r.isUndefined(t)||r.isUndefined(n))return!1;var e=this.dict.getValue(t);return r.isUndefined(e)?(this.dict.setValue(t,[n]),!0):!(!this.allowDuplicate&&o.contains(e,n,this.equalsF)||(e.push(n),0))},t.prototype.remove=function(t,n){if(r.isUndefined(n)){var e=this.dict.remove(t);return!r.isUndefined(e)}var i=this.dict.getValue(t);return!(r.isUndefined(i)||!o.remove(i,n,this.equalsF)||(0===i.length&&this.dict.remove(t),0))},t.prototype.keys=function(){return this.dict.keys()},t.prototype.values=function(){for(var t=[],n=0,e=this.dict.values();n<e.length;n++)for(var r=0,i=e[n];r<i.length;r++){var o=i[r];t.push(o)}return t},t.prototype.containsKey=function(t){return this.dict.containsKey(t)},t.prototype.clear=function(){this.dict.clear()},t.prototype.size=function(){return this.dict.size()},t.prototype.isEmpty=function(){return this.dict.isEmpty()},t}();n.default=u},function(t,n,e){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e(4),o=e(2),u=function(){function t(t,n){this.key=t,this.value=n}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),a=function(){function t(){this.key=null,this.value=null}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}();function s(t){return null===t.next}var c=function(t){function n(n){var e=t.call(this,n)||this;return e.head=new a,e.tail=new a,e.head.next=e.tail,e.tail.prev=e.head,e}return r(n,t),n.prototype.appendToTail=function(t){var n=this.tail.prev;n.next=t,t.prev=n,t.next=this.tail,this.tail.prev=t},n.prototype.getLinkedDictionaryPair=function(t){if(!o.isUndefined(t)){var n="$"+this.toStr(t);return this.table[n]}},n.prototype.getValue=function(t){var n=this.getLinkedDictionaryPair(t);if(!o.isUndefined(n))return n.value},n.prototype.remove=function(n){var e=this.getLinkedDictionaryPair(n);if(!o.isUndefined(e))return t.prototype.remove.call(this,n),e.unlink(),e.value},n.prototype.clear=function(){t.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},n.prototype.replace=function(t,n){var e="$"+this.toStr(n.key);n.next=t.next,n.prev=t.prev,this.remove(t.key),n.prev.next=n,n.next.prev=n,this.table[e]=n,++this.nElements},n.prototype.setValue=function(t,n){if(!o.isUndefined(t)&&!o.isUndefined(n)){var e=this.getLinkedDictionaryPair(t),r=new u(t,n),i="$"+this.toStr(t);return o.isUndefined(e)?(this.appendToTail(r),this.table[i]=r,void++this.nElements):(this.replace(e,r),e.value)}},n.prototype.keys=function(){var t=[];return this.forEach(function(n,e){t.push(n)}),t},n.prototype.values=function(){var t=[];return this.forEach(function(n,e){t.push(e)}),t},n.prototype.forEach=function(t){for(var n=this.head.next;!s(n);){if(!1===t(n.key,n.value))return;n=n.next}},n}(i.default);n.default=c},function(t,n,e){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n}(e(24).default);n.default=i},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),i=e(4),o=e(25),u=function(){function t(t){this.toStrF=t||r.defaultToString,this.dictionary=new i.default(this.toStrF),this.nElements=0}return t.prototype.add=function(t,n){if(void 0===n&&(n=1),r.isUndefined(t)||n<=0)return!1;if(this.contains(t))this.dictionary.getValue(t).copies+=n;else{var e={value:t,copies:n};this.dictionary.setValue(t,e)}return this.nElements+=n,!0},t.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.remove=function(t,n){if(void 0===n&&(n=1),r.isUndefined(t)||n<=0)return!1;if(this.contains(t)){var e=this.dictionary.getValue(t);return n>e.copies?this.nElements-=e.copies:this.nElements-=n,e.copies-=n,e.copies<=0&&this.dictionary.remove(t),!0}return!1},t.prototype.toArray=function(){for(var t=[],n=0,e=this.dictionary.values();n<e.length;n++)for(var r=e[n],i=r.value,o=r.copies,u=0;u<o;u++)t.push(i);return t},t.prototype.toSet=function(){for(var t=new o.default(this.toStrF),n=0,e=this.dictionary.values();n<e.length;n++){var r=e[n].value;t.add(r)}return t},t.prototype.forEach=function(t){this.dictionary.forEach(function(n,e){for(var r=e.value,i=e.copies,o=0;o<i;o++)if(!1===t(r))return!1;return!0})},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},t}();n.default=u},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(26);n.Kinematic1=function(t){return function(n){return function(e){return t+n*e}}},n.Kinematic2=function(t){return function(n){return function(e){return(n+t)/2*e}}},n.Kinematic3=function(t){return function(n){return function(e){return.5*n*(e*e)+t*e}}},n.Kinematic4=function(t){return function(n){return function(e){var r=t*t+2*n*e;return Math.sqrt(r)}}},n.Kinematic5=function(t){return function(n){return function(e){var i=r.Quadratic(.5*n)(t)(-e),o=i[0],u=i[1];return Math.max(o,u)}}},n.Kinematic6=function(t){return function(n){return function(e){return(t*t-e*e)/(2*n)*-1}}},n.Kinematic7=function(t){return function(n){return function(e){return e/(t+n)}}}},function(t,n,e){!function(n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=n(e(7),e(5)):self.concurrify=n(self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(t,n){"use strict";var e="@@type",r=["first","second","third","fourth","fifth"];function i(t){return"function"==typeof t}function o(t){return t.length>=2}function u(n,e,i,o){throw new TypeError(n+" expects its "+r[e]+" argument to "+i+"\n  Actual: "+t.toString(o))}function a(n,e,r){throw new TypeError(n+" was invoked outside the context of a "+r+". \n  Called on: "+t.toString(e))}return function(r,s,c,f){var l=function(t){return t[e]||t.name||"Anonymous"}(r),p=function(t){var e=n.parse(t);return(e.namespace||"concurrify")+"/Concurrent"+e.name+"@"+e.version}(l),h=n.parse(l).name,d=n.parse(p).name;function y(t){this.sequential=t}function m(t){return t instanceof r||Boolean(t)&&t.constructor===r||n(t)===r[e]}function _(t){return t instanceof y||Boolean(t)&&t.constructor===y||n(t)===p}function v(t){return m(t)||u(d,0,'be of type "'+h+'"',t),new y(t)}(function(n){try{return t.Applicative.test(t.of(n))}catch(t){return!1}})(r)||u("concurrify",0,"represent an Applicative",r),m(s)||u("concurrify",1,'be of type "'+h+'"',s),i(c)||u("concurrify",2,"be a function",c),o(c)||u("concurrify",2,"be binary",c),i(f)||u("concurrify",3,"be a function",f),o(f)||u("concurrify",3,"be binary",f);var g=y.prototype=v.prototype={constructor:v};v[e]=p;var E=new y(s);return v["fantasy-land/zero"]=function(){return E},v["fantasy-land/of"]=function(n){return new y(t.of(r,n))},g["fantasy-land/map"]=function(n){return _(this)||a(d+"#map",this,d),i(n)||u(d+"#map",0,"be a function",n),new y(t.map(n,this.sequential))},g["fantasy-land/ap"]=function(t){return _(this)||a(d+"#ap",this,d),_(t)||u(d+"#ap",0,"be a "+d,t),new y(f(this.sequential,t.sequential))},g["fantasy-land/alt"]=function(t){return _(this)||a(d+"#alt",this,d),_(t)||u(d+"#alt",0,"be a "+d,t),new y(c(this.sequential,t.sequential))},g.toString=function(){return _(this)||a(d+"#toString",this,d),d+"("+t.toString(this.sequential)+")"},v}})},function(t,n,e){"use strict";function r(t){this._head=0,this._tail=0,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}r.prototype.peekAt=function(t){var n=t;if(n===(0|n)){var e=this.size();if(!(n>=e||n<-e))return n<0&&(n+=e),n=this._head+n&this._capacityMask,this._list[n]}},r.prototype.get=function(t){return this.peekAt(t)},r.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},r.prototype.peekFront=function(){return this.peek()},r.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(r.prototype,"length",{get:function(){return this.size()}}),r.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.unshift=function(t){if(void 0===t)return this.size();var n=this._list.length;return this._head=this._head-1+n&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.shift=function(){var t=this._head;if(t!==this._tail){var n=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),n}},r.prototype.push=function(t){if(void 0===t)return this.size();var n=this._tail;return this._list[n]=t,this._tail=n+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.pop=function(){var t=this._tail;if(t!==this._head){var n=this._list.length;this._tail=t-1+n&this._capacityMask;var e=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=n>>>2&&this._shrinkArray(),e}},r.prototype.removeOne=function(t){var n=t;if(n===(0|n)&&this._head!==this._tail){var e=this.size(),r=this._list.length;if(!(n>=e||n<-e)){n<0&&(n+=e),n=this._head+n&this._capacityMask;var i,o=this._list[n];if(t<e/2){for(i=t;i>0;i--)this._list[n]=this._list[n=n-1+r&this._capacityMask];this._list[n]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(i=e-1-t;i>0;i--)this._list[n]=this._list[n=n+1+r&this._capacityMask];this._list[n]=void 0,this._tail=this._tail-1+r&this._capacityMask}return o}}},r.prototype.remove=function(t,n){var e,r=t,i=n;if(r===(0|r)&&this._head!==this._tail){var o=this.size(),u=this._list.length;if(!(r>=o||r<-o||n<1)){if(r<0&&(r+=o),1===n||!n)return(e=new Array(1))[0]=this.removeOne(r),e;if(0===r&&r+n>=o)return e=this.toArray(),this.clear(),e;var a;for(r+n>o&&(n=o-r),e=new Array(n),a=0;a<n;a++)e[a]=this._list[this._head+r+a&this._capacityMask];if(r=this._head+r&this._capacityMask,t+n===o){for(this._tail=this._tail-n+u&this._capacityMask,a=n;a>0;a--)this._list[r=r+1+u&this._capacityMask]=void 0;return e}if(0===t){for(this._head=this._head+n+u&this._capacityMask,a=n-1;a>0;a--)this._list[r=r+1+u&this._capacityMask]=void 0;return e}if(t<o/2){for(this._head=this._head+t+n+u&this._capacityMask,a=t;a>0;a--)this.unshift(this._list[r=r-1+u&this._capacityMask]);for(r=this._head-1+u&this._capacityMask;i>0;)this._list[r=r-1+u&this._capacityMask]=void 0,i--}else{for(this._tail=r,r=r+n+u&this._capacityMask,a=o-(n+t);a>0;a--)this.push(this._list[r++]);for(r=this._tail;i>0;)this._list[r=r+1+u&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=u>>>2&&this._shrinkArray(),e}}},r.prototype.splice=function(t,n){var e=t;if(e===(0|e)){var r=this.size();if(e<0&&(e+=r),!(e>r)){if(arguments.length>2){var i,o,u,a=arguments.length,s=this._list.length,c=2;if(!r||e<r/2){for(o=new Array(e),i=0;i<e;i++)o[i]=this._list[this._head+i&this._capacityMask];for(0===n?(u=[],e>0&&(this._head=this._head+e+s&this._capacityMask)):(u=this.remove(e,n),this._head=this._head+e+s&this._capacityMask);a>c;)this.unshift(arguments[--a]);for(i=e;i>0;i--)this.unshift(o[i-1])}else{var f=(o=new Array(r-(e+n))).length;for(i=0;i<f;i++)o[i]=this._list[this._head+e+n+i&this._capacityMask];for(0===n?(u=[],e!=r&&(this._tail=this._head+e+s&this._capacityMask)):(u=this.remove(e,n),this._tail=this._tail-f+s&this._capacityMask);c<a;)this.push(arguments[c++]);for(i=0;i<f;i++)this.push(o[i])}return u}return this.remove(e,n)}}},r.prototype.clear=function(){this._head=0,this._tail=0},r.prototype.isEmpty=function(){return this._head===this._tail},r.prototype.toArray=function(){return this._copyArray(!1)},r.prototype._fromArray=function(t){for(var n=0;n<t.length;n++)this.push(t[n])},r.prototype._copyArray=function(t){var n,e=[],r=this._list,i=r.length;if(t||this._head>this._tail){for(n=this._head;n<i;n++)e.push(r[n]);for(n=0;n<this._tail;n++)e.push(r[n])}else for(n=this._head;n<this._tail;n++)e.push(r[n]);return e},r.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length*=2,this._capacityMask=this._capacityMask<<1|1},r.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.exports=r},function(t,n){!function(n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=n():self.inspectf=n()}(function(){"use strict";var t=/^ */,n=/\s*[^\s]/,e=/\t/g,r=/\n\r?/;function i(t){return n.test(t)}function o(n){return n.match(t)[0].length}function u(t){return new Array(t+1).join(" ")}function a(t,n){var r=function(t){var n=t.filter(i).map(o),e=n.reduce(Math.min,1/0),r=n.map(function(t){return t-e}).find(function(t){return t>1})||2;return{depth:e,tabsize:r}}(t.slice(1)),a=new RegExp(u(r.tabsize),"g");return t.map(function(t){return t.slice(Math.min(r.depth,o(t))).replace(a,"\t").replace(e,n)}).join("\n")}return function t(n,i){if(function(t){if("number"!=typeof n)throw new TypeError("inspectf expects its first argument to be a number")}(),arguments.length<2)return function(e){return t(n,e)};if(function(t){if("function"!=typeof i)throw new TypeError("inspectf expects its second argument to be a function")}(),i.toString!==Function.prototype.toString)return i.toString();var o=u(n),s=function(t,n){return i.toString().replace(e,n)}(0,o),c=s.split(r);return c.length<2?s:a(c,o)}})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(1),i=e(27);n.MESSAGE="message",n.loadWorker=function(t){return r.Future(function(e,r){var o=function(e){e.data.cmd===i.WorkerCommands.READY&&(t.removeEventListener(n.MESSAGE,o),r(t))};t.addEventListener(n.MESSAGE,o),t.postMessage({cmd:i.WorkerCommands.INIT})})},n.initWorker=function(){return r.Future(function(t,e){var r=function(t){console.log(t),t.data.cmd===i.WorkerCommands.INIT&&(self.removeEventListener(n.MESSAGE,r),self.postMessage({cmd:i.WorkerCommands.READY}),e(self))};self.addEventListener(n.MESSAGE,r)})}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getCompileFlags=function(){return{buildMode:"production",buildVersion:"0.0.1-alpha",isProduction:!0}}},function(t,n){"function"==typeof Object.create?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},function(t,n){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(8);n.S=r.create({checkTypes:!1,env:r.env})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(e(60)),r(e(59))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(13),i=e(16),o=e(43),u=e(27),a=e(19);r.initWorker().fork(console.error,function(t){t.addEventListener(r.MESSAGE,function(n){switch(n.data.cmd){case u.WorkerCommands.TICK:i.sWorldUpdate.send({frameTs:n.data.frameTs,camera:n.data.camera});break;case u.WorkerCommands.WORLD_START:o.createWorldFrp(n.data.scenes).listen(function(n){t.postMessage({cmd:u.WorkerCommands.RENDER,scenes:n.scenes})});break;case u.WorkerCommands.BALL_START:a.sBallStart_Sink.send(null);break;case u.WorkerCommands.BALL_STOP:a.sBallStop_Sink.send(null)}})})}]);
//# sourceMappingURL=main.bundle.map